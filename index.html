<!doctype html><html data-init=no-js><meta charset=UTF-8><title>index</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content=SugarCube><meta name=version content=2.37.3><script id=script-libraries>if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init","loading"),
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){"use strict";if("Element"in e){var t="classList",n="prototype",r=e.Element[n],o=Object,i=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},u=function(e,t){if(""===t)throw new s("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","The token must not contain space characters.");return a.call(e,t)},c=function(e){for(var t=i.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,o=n.length;o>r;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=c[n]=[],f=function(){return new c(this)};if(s[n]=Error[n],l.item=function(e){return this[e]||null},l.contains=function(e){return~u(this,e+"")},l.add=function(){var e,t=arguments,n=0,r=t.length,o=!1;do{~u(this,e=t[n]+"")||(this.push(e),o=!0)}while(++n<r);o&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,r=0,o=n.length,i=!1;do{for(t=u(this,e=n[r]+"");~t;)this.splice(t,1),i=!0,t=u(this,e)}while(++r<o);i&&this._updateClassName()},l.toggle=function(e,t){var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},l.replace=function(e,t){var n=u(e+"");~n&&(this.splice(n,1,t),this._updateClassName())},l.toString=function(){return this.join(" ")},o.defineProperty){var p={get:f,enumerable:!0,configurable:!0};try{o.defineProperty(r,t,p)}catch(e){void 0!==e.number&&-2146823252!==e.number||(p.enumerable=!1,o.defineProperty(r,t,p))}}else o[n].__defineGetter__&&r.__defineGetter__(t,f)}}(self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;r>n;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(e,t){var n=this.toString().split(" "),r=n.indexOf(e+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(t),this.add.apply(this,n.slice(1)))}),e=null}()
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */),function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){var e,t,n=Array,r=n.prototype,o=Object,i=o.prototype,a=Function,s=a.prototype,u=String,c=u.prototype,l=Number,f=l.prototype,p=r.slice,h=r.splice,d=r.push,y=r.unshift,v=r.concat,g=r.join,m=s.call,b=s.apply,w=Math.max,x=Math.min,T=i.toString,j="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,O=Function.prototype.toString,S=/^\s*class /,E=function(e){try{var t=O.call(e).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return S.test(t)}catch(e){return!1}},C=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(j)return function(e){try{return!E(e)&&(O.call(e),!0)}catch(e){return!1}}(e);if(E(e))return!1;var t=T.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},A=RegExp.prototype.exec;e=function(e){return"object"==typeof e&&(j?function(e){try{return A.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===T.call(e))};var I=String.prototype.valueOf;t=function(e){return"string"==typeof e||"object"==typeof e&&(j?function(e){try{return I.call(e),!0}catch(e){return!1}}(e):"[object String]"===T.call(e))};var k=o.defineProperty&&function(){try{var e={};for(var t in o.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),M=function(e){var t;return t=k?function(e,t,n,r){!r&&t in e||o.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)},function(n,r,o){for(var i in r)e.call(r,i)&&t(n,i,r[i],o)}}(i.hasOwnProperty),D=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},N=l.isNaN||function(e){return e!=e},P=function(e){var t=+e;return N(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},R=function(e){var t,n,r;if(D(e))return e;if(n=e.valueOf,C(n)&&(t=n.call(e),D(t)))return t;if(r=e.toString,C(r)&&(t=r.call(e),D(t)))return t;throw new TypeError},L=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return o(e)},_=function(e){return e>>>0},q=function(){};M(s,{bind:function(e){var t=this;if(!C(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=p.call(arguments,1),i=w(0,t.length-r.length),s=[],u=0;u<i;u++)d.call(s,"$"+u);return n=a("binder","return function ("+g.call(s,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof n){var i=b.call(t,this,v.call(r,p.call(arguments)));return o(i)===i?i:this}return b.call(t,e,v.call(r,p.call(arguments)))}),t.prototype&&(q.prototype=t.prototype,n.prototype=new q,q.prototype=null),n}});var F=m.bind(i.hasOwnProperty),H=m.bind(i.toString),$=m.bind(p),W=b.bind(p);if("object"==typeof document&&document&&document.documentElement)try{$(document.documentElement.childNodes)}catch(e){var B=$,U=W;$=function(e){for(var t=[],n=e.length;n-- >0;)t[n]=e[n];return U(t,B(arguments,1))},W=function(e,t){return U($(e),t)}}var z=m.bind(c.slice),G=m.bind(c.split),X=m.bind(c.indexOf),V=m.bind(d),J=m.bind(i.propertyIsEnumerable),Y=m.bind(r.sort),Z=n.isArray||function(e){return"[object Array]"===H(e)},Q=1!==[].unshift(0);M(r,{unshift:function(){return y.apply(this,arguments),this.length}},Q),M(n,{isArray:Z});var K=o("a"),ee="a"!==K[0]||!(0 in K),te=function(e){var t=!0,n=!0,r=!1;if(e)try{e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(e){r=!0}return!!e&&!r&&t&&n};M(r,{forEach:function(e){var n,r=L(this),o=ee&&t(this)?G(this,""):r,i=-1,a=_(o.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<a;)i in o&&(void 0===n?e(o[i],i,r):e.call(n,o[i],i,r))}},!te(r.forEach)),M(r,{map:function(e){var r,o=L(this),i=ee&&t(this)?G(this,""):o,a=_(i.length),s=n(a);if(arguments.length>1&&(r=arguments[1]),!C(e))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;u<a;u++)u in i&&(s[u]=void 0===r?e(i[u],u,o):e.call(r,i[u],u,o));return s}},!te(r.map)),M(r,{filter:function(e){var n,r,o=L(this),i=ee&&t(this)?G(this,""):o,a=_(i.length),s=[];if(arguments.length>1&&(r=arguments[1]),!C(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;u<a;u++)u in i&&(n=i[u],(void 0===r?e(n,u,o):e.call(r,n,u,o))&&V(s,n));return s}},!te(r.filter)),M(r,{every:function(e){var n,r=L(this),o=ee&&t(this)?G(this,""):r,i=_(o.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<i;a++)if(a in o&&!(void 0===n?e(o[a],a,r):e.call(n,o[a],a,r)))return!1;return!0}},!te(r.every)),M(r,{some:function(e){var n,r=L(this),o=ee&&t(this)?G(this,""):r,i=_(o.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<i;a++)if(a in o&&(void 0===n?e(o[a],a,r):e.call(n,o[a],a,r)))return!0;return!1}},!te(r.some));var ne=!1;r.reduce&&(ne="object"==typeof r.reduce.call("es5",function(e,t,n,r){return r})),M(r,{reduce:function(e){var n=L(this),r=ee&&t(this)?G(this,""):n,o=_(r.length);if(!C(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,a=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(a in r){i=r[a++];break}if(++a>=o)throw new TypeError("reduce of empty array with no initial value")}for(;a<o;a++)a in r&&(i=e(i,r[a],a,n));return i}},!ne);var re=!1;r.reduceRight&&(re="object"==typeof r.reduceRight.call("es5",function(e,t,n,r){return r})),M(r,{reduceRight:function(e){var n,r=L(this),o=ee&&t(this)?G(this,""):r,i=_(o.length);if(!C(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=i-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in o){n=o[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return n;do{a in o&&(n=e(n,o[a],a,r))}while(a--);return n}},!re);var oe=r.indexOf&&-1!==[0,1].indexOf(1,2);M(r,{indexOf:function(e){var n=ee&&t(this)?G(this,""):L(this),r=_(n.length);if(0===r)return-1;var o=0;for(arguments.length>1&&(o=P(arguments[1])),o=o>=0?o:w(0,r+o);o<r;o++)if(o in n&&n[o]===e)return o;return-1}},oe);var ie=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);M(r,{lastIndexOf:function(e){var n=ee&&t(this)?G(this,""):L(this),r=_(n.length);if(0===r)return-1;var o=r-1;for(arguments.length>1&&(o=x(o,P(arguments[1]))),o=o>=0?o:r-Math.abs(o);o>=0;o--)if(o in n&&e===n[o])return o;return-1}},ie);var ae=function(){var e=[1,2],t=e.splice();return 2===e.length&&Z(t)&&0===t.length}();M(r,{splice:function(e,t){return 0===arguments.length?[]:h.apply(this,arguments)}},!ae);var se=function(){var e={};return r.splice.call(e,0,0,1),1===e.length}();M(r,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=w(P(this.length),0),arguments.length>0&&"number"!=typeof t&&((n=$(arguments)).length<2?V(n,this.length-e):n[1]=P(t)),h.apply(this,n)}},!se);var ue=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),ce=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();M(r,{splice:function(e,t){for(var n,r=L(this),o=[],i=_(r.length),a=P(e),s=a<0?w(i+a,0):x(a,i),c=0===arguments.length?0:1===arguments.length?i-s:x(w(P(t),0),i-s),l=0;l<c;)n=u(s+l),F(r,n)&&(o[l]=r[n]),l+=1;var f,p=$(arguments,2),h=p.length;if(h<c){l=s;for(var d=i-c;l<d;)n=u(l+c),f=u(l+h),F(r,n)?r[f]=r[n]:delete r[f],l+=1;l=i;for(var y=i-c+h;l>y;)delete r[l-1],l-=1}else if(h>c)for(l=i-c;l>s;)n=u(l+c-1),f=u(l+h-1),F(r,n)?r[f]=r[n]:delete r[f],l-=1;l=s;for(var v=0;v<p.length;++v)r[l]=p[v],l+=1;return r.length=i-c+h,o}},!ue||!ce);var le,fe=r.join;try{le="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){le=!0}le&&M(r,{join:function(e){var n=void 0===e?",":e;return fe.call(t(this)?G(this,""):this,n)}},le);var pe="1,2"!==[1,2].join(void 0);pe&&M(r,{join:function(e){var t=void 0===e?",":e;return fe.call(this,t)}},pe);var he=function(e){for(var t=L(this),n=_(t.length),r=0;r<arguments.length;)t[n+r]=arguments[r],r+=1;return t.length=n+r,n+r},de=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!F(e,0)}();M(r,{push:function(e){return Z(this)?d.apply(this,arguments):he.apply(this,arguments)}},de);var ye=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!F(e,0)}();M(r,{push:he},ye),M(r,{slice:function(e,n){var r=t(this)?G(this,""):this;return W(r,arguments)}},ee);var ve=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e){return!1}}return!0}(),ge=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),me=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();M(r,{sort:function(e){if(void 0===e)return Y(this);if(!C(e))throw new TypeError("Array.prototype.sort callback must be a function");return Y(this,e)}},ve||!me||!ge);var be=!J({toString:null},"toString"),we=J(function(){},"prototype"),xe=!F("x","0"),Te=function(e){var t=e.constructor;return t&&t.prototype===e},je={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},Oe=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!je["$"+e]&&F(window,e)&&null!==window[e]&&"object"==typeof window[e]&&Te(window[e])}catch(e){return!0}return!1}(),Se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ee=Se.length,Ce=function(e){return"[object Arguments]"===H(e)},Ae=Ce(arguments)?Ce:function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&!Z(e)&&C(e.callee)};M(o,{keys:function(e){var n=C(e),r=Ae(e),o=null!==e&&"object"==typeof e,i=o&&t(e);if(!o&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],s=we&&n;if(i&&xe||r)for(var c=0;c<e.length;++c)V(a,u(c));if(!r)for(var l in e)s&&"prototype"===l||!F(e,l)||V(a,u(l));if(be)for(var f=function(e){if("undefined"==typeof window||!Oe)return Te(e);try{return Te(e)}catch(e){return!1}}(e),p=0;p<Ee;p++){var h=Se[p];f&&"constructor"===h||!F(e,h)||V(a,h)}return a}});var Ie=o.keys&&function(){return 2===o.keys(arguments).length}(1,2),ke=o.keys&&function(){var e=o.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Me=o.keys;M(o,{keys:function(e){return Ae(e)?Me($(e)):Me(e)}},!Ie||ke);var De,Ne,Pe=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Re=new Date(-0x55d318d56a724),Le=new Date(14496624e5),_e="Mon, 01 Jan -45875 11:59:59 GMT"!==Re.toUTCString();Re.getTimezoneOffset()<-720?(De="Tue Jan 02 -45875"!==Re.toDateString(),Ne=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Le))):(De="Mon Jan 01 -45875"!==Re.toDateString(),Ne=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Le)));var qe=m.bind(Date.prototype.getFullYear),Fe=m.bind(Date.prototype.getMonth),He=m.bind(Date.prototype.getDate),$e=m.bind(Date.prototype.getUTCFullYear),We=m.bind(Date.prototype.getUTCMonth),Be=m.bind(Date.prototype.getUTCDate),Ue=m.bind(Date.prototype.getUTCDay),ze=m.bind(Date.prototype.getUTCHours),Ge=m.bind(Date.prototype.getUTCMinutes),Xe=m.bind(Date.prototype.getUTCSeconds),Ve=m.bind(Date.prototype.getUTCMilliseconds),Je=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ze=function(e,t){return He(new Date(t,e,0))};M(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this);return e<0&&Fe(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this),t=Fe(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this),t=Fe(this),n=He(this);return e<0&&t>11?12===t?n:Ze(0,e+1)-n+1:n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this);return e<0&&We(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=We(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=We(this),n=Be(this);return e<0&&t>11?12===t?n:Ze(0,e+1)-n+1:n}},Pe),M(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this),t=Be(this),n=We(this),r=$e(this),o=ze(this),i=Ge(this),a=Xe(this);return Je[e]+", "+(t<10?"0"+t:t)+" "+Ye[n]+" "+r+" "+(o<10?"0"+o:o)+":"+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+" GMT"}},Pe||_e),M(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear();return Je[e]+" "+Ye[n]+" "+(t<10?"0"+t:t)+" "+r}},Pe||De),(Pe||Ne)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear(),o=this.getHours(),i=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=Math.floor(Math.abs(s)/60),c=Math.floor(Math.abs(s)%60);return Je[e]+" "+Ye[n]+" "+(t<10?"0"+t:t)+" "+r+" "+(o<10?"0"+o:o)+":"+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(u<10?"0"+u:u)+(c<10?"0"+c:c)},k&&o.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var Qe=-621987552e5,Ke="-000001",et=Date.prototype.toISOString&&-1===new Date(Qe).toISOString().indexOf(Ke),tt=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),nt=m.bind(Date.prototype.getTime);M(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(nt(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=$e(this),t=We(this);e+=Math.floor(t/12);var n=[(t=(t%12+12)%12)+1,Be(this),ze(this),Ge(this),Xe(this)];e=(e<0?"-":e>9999?"+":"")+z("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var r=0;r<n.length;++r)n[r]=z("00"+n[r],-2);return e+"-"+$(n,0,2).join("-")+"T"+$(n,2).join(":")+"."+z("000"+Ve(this),-3)+"Z"}},et||tt),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(Qe).toJSON().indexOf(Ke)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(e){var t=o(this),n=R(t);if("number"==typeof n&&!isFinite(n))return null;var r=t.toISOString;if(!C(r))throw new TypeError("toISOString property is not callable");return r.call(t)});var rt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ot=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||ot||!rt){var it=Math.pow(2,31)-1,at=N(new Date(1970,0,1,0,0,0,it+1).getTime());Date=function(e){var t=function(n,r,o,i,a,s,c){var l,f=arguments.length;if(this instanceof e){var p=s,h=c;if(at&&f>=7&&c>it){var d=Math.floor(c/it)*it,y=Math.floor(d/1e3);p+=y,h-=1e3*y}l=1===f&&u(n)===n?new e(t.parse(n)):f>=7?new e(n,r,o,i,a,p,h):f>=6?new e(n,r,o,i,a,p):f>=5?new e(n,r,o,i,a):f>=4?new e(n,r,o,i):f>=3?new e(n,r,o):f>=2?new e(n,r):f>=1?new e(n instanceof e?+n:n):new e}else l=e.apply(this,arguments);return D(l)||M(l,{constructor:t},!0),l},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],o=function(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)};for(var i in e)F(e,i)&&(t[i]=e[i]);M(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,M(t.prototype,{constructor:t},!0);return M(t,{parse:function(t){var r=n.exec(t);if(r){var i,a=l(r[1]),s=l(r[2]||1)-1,u=l(r[3]||1)-1,c=l(r[4]||0),f=l(r[5]||0),p=l(r[6]||0),h=Math.floor(1e3*l(r[7]||0)),d=Boolean(r[4]&&!r[8]),y="-"===r[9]?1:-1,v=l(r[10]||0),g=l(r[11]||0);return c<(f>0||p>0||h>0?24:25)&&f<60&&p<60&&h<1e3&&s>-1&&s<12&&v<24&&g<60&&u>-1&&u<o(a,s+1)-o(a,s)&&(i=1e3*(60*((i=60*(24*(o(a,s)+u)+c+v*y))+f+g*y)+p)+h,d&&(i=function(t){var n=0,r=t;if(at&&r>it){var o=Math.floor(r/it)*it,i=Math.floor(o/1e3);n+=i,r-=1e3*i}return l(new e(1970,0,1,0,0,n,r))}(i)),-864e13<=i&&i<=864e13)?i:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var st=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),ut={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,r=t;++n<ut.size;)r+=e*ut.data[n],ut.data[n]=r%ut.base,r=Math.floor(r/ut.base)},divide:function(e){for(var t=ut.size,n=0;--t>=0;)n+=ut.data[t],ut.data[t]=Math.floor(n/e),n=n%e*ut.base},numToString:function(){for(var e=ut.size,t="";--e>=0;)if(""!==t||0===e||0!==ut.data[e]){var n=u(ut.data[e]);""===t?t=n:t+=z("0000000",0,7-n.length)+n}return t},pow:function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}};M(f,{toFixed:function(e){var t,n,r,o,i,a,s,c;if(t=l(e),(t=N(t)?0:Math.floor(t))<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=l(this),N(n))return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(r="",n<0&&(r="-",n=-n),o="0",n>1e-21)if(a=(i=ut.log(n*ut.pow(2,69,1))-69)<0?n*ut.pow(2,-i,1):n/ut.pow(2,i,1),a*=4503599627370496,(i=52-i)>0){for(ut.multiply(0,a),s=t;s>=7;)ut.multiply(1e7,0),s-=7;for(ut.multiply(ut.pow(10,s,1),0),s=i-1;s>=23;)ut.divide(1<<23),s-=23;ut.divide(1<<s),ut.multiply(1,1),ut.divide(2),o=ut.numToString()}else ut.multiply(0,a),ut.multiply(1<<-i,0),o=ut.numToString()+z("0.00000000000000000000",2,2+t);return o=t>0?(c=o.length)<=t?r+z("0.0000000000000000000",0,t-c+2)+o:r+z(o,0,c-t)+"."+z(o,c-t):r+o}},st);var ct=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),lt=f.toPrecision;M(f,{toPrecision:function(e){return void 0===e?lt.call(this):lt.call(this,e)}},ct),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var t=void 0===/()??/.exec("")[1],n=Math.pow(2,32)-1;c.split=function(r,o){var i=String(this);if(void 0===r&&0===o)return[];if(!e(r))return G(this,r,o);var a,s,u,c,l=[],f=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(r.sticky?"y":""),p=0,h=new RegExp(r.source,f+"g");t||(a=new RegExp("^"+h.source+"$(?!\\s)",f));var y=void 0===o?n:_(o);for(s=h.exec(i);s&&!((u=s.index+s[0].length)>p&&(V(l,z(i,p,s.index)),!t&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<i.length&&d.apply(l,$(s,1)),c=s[0].length,p=u,l.length>=y));)h.lastIndex===s.index&&h.lastIndex++,s=h.exec(i);return p===i.length?!c&&h.test("")||V(l,""):V(l,z(i,p)),l.length>y?$(l,0,y):l}}():"0".split(void 0,0).length&&(c.split=function(e,t){return void 0===e&&0===t?[]:G(this,e,t)});var ft=c.replace,pt=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){V(e,n)}),1===e.length&&void 0===e[0]}();pt||(c.replace=function(t,n){var r=C(n),o=e(t)&&/\)[*?]/.test(t.source);if(r&&o){return ft.call(this,t,function(e){var r=arguments.length,o=t.lastIndex;t.lastIndex=0;var i=t.exec(e)||[];return t.lastIndex=o,V(i,arguments[r-2],arguments[r-1]),n.apply(this,i)})}return ft.call(this,t,n)});var ht=c.substr,dt="".substr&&"b"!=="0b".substr(-1);M(c,{substr:function(e,t){var n=e;return e<0&&(n=w(this.length+e,0)),ht.call(this,n,t)}},dt);var yt="\t\n\v\f\r                　\u2028\u2029\ufeff",vt="["+yt+"]",gt=new RegExp("^"+vt+vt+"*"),mt=new RegExp(vt+vt+"*$"),bt=c.trim&&(yt.trim()||!"​".trim());M(c,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(gt,"").replace(mt,"")}},bt);var wt=m.bind(String.prototype.trim),xt=c.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);M(c,{lastIndexOf:function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var t=u(this),n=u(e),r=arguments.length>1?l(arguments[1]):NaN,o=N(r)?1/0:P(r),i=x(w(o,0),t.length),a=n.length,s=i+a;s>0;){s=w(0,s-a);var c=X(z(t,s,i+a),n);if(-1!==c)return s+c}return-1}},xt);var Tt=c.lastIndexOf;if(M(c,{lastIndexOf:function(e){return Tt.apply(this,arguments)}},1!==c.lastIndexOf.length),8===parseInt(yt+"08")&&22===parseInt(yt+"0x16")||(parseInt=function(e){var t=/^[-+]?0[xX]/;return function(n,r){var o=wt(String(n)),i=l(r)||(t.test(o)?16:10);return e(o,i)}}(parseInt)),1/parseFloat("-0")!=-1/0&&(parseFloat=function(e){return function(t){var n=wt(String(t)),r=e(n);return 0===r&&"-"===z(n,0,1)?-0:r}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=u(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=u(t)),e?t?e+": "+t:e:t}}if(k){var jt=function(e,t){if(J(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};jt(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),jt(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e}}}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){"use strict";var e,t=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),r=Array.isArray,o=Object.keys,i=function(e){try{return e(),!1}catch(e){return!0}},a=function(e){try{return e()}catch(e){return!1}},s=function(e){return function(){return!t(e,this,arguments)}}(i),u=!!Object.defineProperty&&!i(function(){return Object.defineProperty({},"x",{get:function(){}})}),c="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),p=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),d=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},y=function(e,t,n){l(o(t),function(r){var o=t[r];d(e,r,o,!!n)})},v=Function.call.bind(Object.prototype.toString),g="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===v(e)}:function(e){return"function"==typeof e},m=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},w=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},x=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},T=function(e,t){t&&g(t.toString)&&d(e,"toString",t.toString.bind(t),!0)},j=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&o(t).forEach(function(e){x(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&a(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=j(e.prototype,{constructor:{value:n}}),t(n)})},S=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),E=S.isFinite,C=Function.call.bind(String.prototype.indexOf),A=Function.apply.bind(Array.prototype.indexOf),I=Function.call.bind(Array.prototype.concat),k=Function.call.bind(String.prototype.slice),M=Function.call.bind(Array.prototype.push),D=Function.apply.bind(Array.prototype.push),N=Function.call.bind(Array.prototype.shift),P=Math.max,R=Math.min,L=Math.floor,_=Math.abs,q=Math.exp,F=Math.log,H=Math.sqrt,$=Function.call.bind(Object.prototype.hasOwnProperty),W=function(){},B=S.Map,U=B&&B.prototype.delete,z=B&&B.prototype.get,G=B&&B.prototype.has,X=B&&B.prototype.set,V=S.Symbol||{},J=V.species||"@@species",Y=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&E(e)},Q=g(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t||Y(t)?t:t<0?-1:1},K=function(e){var t=Number(e);return t<-1||Y(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(F(1+t)/(1+t-1))},ee=function(e){return"[object Arguments]"===v(e)},te=ee(arguments)?ee:function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==v(e)&&"[object Function]"===v(e.callee)},ne=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},re=function(e){return"[object String]"===v(e)},oe=function(e){return"[object RegExp]"===v(e)},ie=function(e){return"function"==typeof S.Symbol&&"symbol"==typeof e},ae=function(e,t,n){var r=e[t];d(e,t,n,!0),T(e[t],r)},se="function"==typeof V&&"function"==typeof V.for&&ie(V()),ue=ie(V.iterator)?V.iterator:"_es6-shim iterator_";S.Set&&"function"==typeof(new S.Set)["@@iterator"]&&(ue="@@iterator"),S.Reflect||d(S,"Reflect",{},!0);var ce=S.Reflect,le=String,fe="undefined"!=typeof document&&document?document.all:null,pe=null==fe?function(e){return null==e}:function(e){return null==e&&e!==fe},he={Call:function(e,n){var r=arguments.length>2?arguments[2]:[];if(!he.IsCallable(e))throw new TypeError(e+" is not a function");return t(e,n,r)},RequireObjectCoercible:function(e,t){if(pe(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"==typeof e||e===fe)},ToObject:function(e,t){return Object(he.RequireObjectCoercible(e,t))},IsCallable:g,IsConstructor:function(e){return he.IsCallable(e)},ToInt32:function(e){return he.ToNumber(e)|0},ToUint32:function(e){return he.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===v(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=he.ToNumber(e);return Y(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(_(t)):t},ToLength:function(e){var t=he.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:Y(e)&&Y(t)},SameValueZero:function(e,t){return e===t||Y(e)&&Y(t)},IsIterable:function(e){return he.TypeIsObject(e)&&(void 0!==e[ue]||te(e))},GetIterator:function(t){if(te(t))return new e(t,"value");var n=he.GetMethod(t,ue);if(!he.IsCallable(n))throw new TypeError("value is not an iterable");var r=he.Call(n,t);if(!he.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=he.ToObject(e)[t];if(!pe(n)){if(!he.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=he.GetMethod(e,"return");if(void 0!==n){var r,o;try{r=he.Call(n,e)}catch(e){o=e}if(!t){if(o)throw o;if(!he.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!he.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=he.IteratorNext(e);return!he.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var o=void 0===n?e:n;if(!r&&ce.construct)return ce.construct(e,t,o);var i=o.prototype;he.TypeIsObject(i)||(i=Object.prototype);var a=j(i),s=he.Call(e,a,t);return he.TypeIsObject(s)?s:a},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!he.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[J];if(pe(r))return t;if(!he.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var o=he.ToString(e),i="<"+t;""!==n&&(i+=" "+n+'="'+he.ToString(r).replace(/"/g,"&quot;")+'"');return i+">"+o+"</"+t+">"},IsRegExp:function(e){if(!he.TypeIsObject(e))return!1;var t=e[V.match];return void 0!==t?!!t:oe(e)},ToString:function(e){return le(e)}};if(u&&se){var de=function(e){if(ie(V[e]))return V[e];var t=V.for("Symbol."+e);return Object.defineProperty(V,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!ie(V.search)){var ye=de("search"),ve=String.prototype.search;d(RegExp.prototype,ye,function(e){return he.Call(ve,e,[this])});ae(String.prototype,"search",function(e){var t=he.RequireObjectCoercible(this);if(!pe(e)){var n=he.GetMethod(e,ye);if(void 0!==n)return he.Call(n,e,[t])}return he.Call(ve,t,[he.ToString(e)])})}if(!ie(V.replace)){var ge=de("replace"),me=String.prototype.replace;d(RegExp.prototype,ge,function(e,t){return he.Call(me,e,[this,t])});ae(String.prototype,"replace",function(e,t){var n=he.RequireObjectCoercible(this);if(!pe(e)){var r=he.GetMethod(e,ge);if(void 0!==r)return he.Call(r,e,[n,t])}return he.Call(me,n,[he.ToString(e),t])})}if(!ie(V.split)){var be=de("split"),we=String.prototype.split;d(RegExp.prototype,be,function(e,t){return he.Call(we,e,[this,t])});ae(String.prototype,"split",function(e,t){var n=he.RequireObjectCoercible(this);if(!pe(e)){var r=he.GetMethod(e,be);if(void 0!==r)return he.Call(r,e,[n,t])}return he.Call(we,n,[he.ToString(e),t])})}var xe=ie(V.match),Te=xe&&function(){var e={};return e[V.match]=function(){return 42},42!=="a".match(e)}();if(!xe||Te){var je=de("match"),Oe=String.prototype.match;d(RegExp.prototype,je,function(e){return he.Call(Oe,e,[this])});ae(String.prototype,"match",function(e){var t=he.RequireObjectCoercible(this);if(!pe(e)){var n=he.GetMethod(e,je);if(void 0!==n)return he.Call(n,e,[t])}return he.Call(Oe,t,[he.ToString(e)])})}}var Se=function(e,t,n){T(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?l(Object.getOwnPropertyNames(e),function(r){r in W||n[r]||b(e,r,t)}):l(Object.keys(e),function(r){r in W||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,w(e.prototype,"constructor",t)},Ee=function(){return this},Ce=function(e){u&&!$(e,J)&&m(e,J,Ee)},Ae=function(e,t){var n=t||function(){return this};d(e,ue,n),!e[ue]&&ie(ue)&&(e[ue]=n)},Ie=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!he.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},ke=function(e,t,n,r){if(!he.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var o=t.prototype;he.TypeIsObject(o)||(o=n);var i=j(o);for(var a in r)if($(r,a)){var s=r[a];d(i,a,s,!0)}return i};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Me=String.fromCodePoint;ae(String,"fromCodePoint",function(e){return he.Call(Me,this,arguments)})}var De={fromCodePoint:function(e){for(var t,n=[],r=0,o=arguments.length;r<o;r++){if(t=Number(arguments[r]),!he.SameValue(t,he.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?M(n,String.fromCharCode(t)):(t-=65536,M(n,String.fromCharCode(55296+(t>>10))),M(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=he.ToObject(e,"bad callSite"),n=he.ToObject(t.raw,"bad raw value"),r=n.length,o=he.ToLength(r);if(o<=0)return"";for(var i,a,s,u,c=[],l=0;l<o&&(i=he.ToString(l),s=he.ToString(n[i]),M(c,s),!(l+1>=o));)a=l+1<arguments.length?arguments[l+1]:"",u=he.ToString(a),M(c,u),l+=1;return c.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&ae(String,"raw",De.raw),y(String,De);var Ne=function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r},Pe=1/0,Re={repeat:function(e){var t=he.ToString(he.RequireObjectCoercible(this)),n=he.ToInteger(e);if(n<0||n>=Pe)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Ne(t,n)},startsWith:function(e){var t=he.ToString(he.RequireObjectCoercible(this));if(he.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=he.ToString(e);arguments.length>1&&(n=arguments[1]);var o=P(he.ToInteger(n),0);return k(t,o,o+r.length)===r},endsWith:function(e){var t=he.ToString(he.RequireObjectCoercible(this));if(he.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=he.ToString(e),o=t.length;arguments.length>1&&(n=arguments[1]);var i=void 0===n?o:he.ToInteger(n),a=R(P(i,0),o);return k(t,a-r.length,a)===r},includes:function(e){if(he.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=he.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=he.ToString(he.RequireObjectCoercible(this)),n=he.ToInteger(e),r=t.length;if(n>=0&&n<r){var o=t.charCodeAt(n);if(o<55296||o>56319||n+1===r)return o;var i=t.charCodeAt(n+1);return i<56320||i>57343?o:1024*(o-55296)+(i-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&ae(String.prototype,"includes",Re.includes),String.prototype.startsWith&&String.prototype.endsWith){var Le=i(function(){return"/a/".startsWith(/a/)}),_e=a(function(){return!1==="abc".startsWith("a",1/0)});Le&&_e||(ae(String.prototype,"startsWith",Re.startsWith),ae(String.prototype,"endsWith",Re.endsWith))}if(se){var qe=a(function(){var e=/a/;return e[V.match]=!1,"/a/".startsWith(e)});qe||ae(String.prototype,"startsWith",Re.startsWith);var Fe=a(function(){var e=/a/;return e[V.match]=!1,"/a/".endsWith(e)});Fe||ae(String.prototype,"endsWith",Re.endsWith);var He=a(function(){var e=/a/;return e[V.match]=!1,"/a/".includes(e)});He||ae(String.prototype,"includes",Re.includes)}y(String.prototype,Re);var $e=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),We=new RegExp("(^["+$e+"]+)|(["+$e+"]+$)","g"),Be=function(){return he.ToString(he.RequireObjectCoercible(this)).replace(We,"")},Ue=["","​","￾"].join(""),ze=new RegExp("["+Ue+"]","g"),Ge=/^[-+]0x[0-9a-f]+$/i,Xe=Ue.trim().length!==Ue.length;d(String.prototype,"trim",Be,Xe);var Ve=function(e){return{value:e,done:0===arguments.length}},Je=function(e){he.RequireObjectCoercible(e),this._s=he.ToString(e),this._i=0};Je.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,Ve();var n,r,o=e.charCodeAt(t);return r=o<55296||o>56319||t+1===e.length||(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,Ve(e.substr(t,r))},Ae(Je.prototype),Ae(String.prototype,function(){return new Je(this)});var Ye={from:function(e){var t,r,o,i,a,s,u=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)r=!1;else{if(!he.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2]),r=!0}if(void 0!==(te(e)||he.GetMethod(e,ue))){a=he.IsConstructor(u)?Object(new u):[];var c,l,f=he.GetIterator(e);for(s=0;!1!==(c=he.IteratorStep(f));){l=c.value;try{r&&(l=void 0===o?t(l,s):n(t,o,l,s)),a[s]=l}catch(e){throw he.IteratorClose(f,!0),e}s+=1}i=s}else{var p,h=he.ToObject(e);for(i=he.ToLength(h.length),a=he.IsConstructor(u)?Object(new u(i)):new Array(i),s=0;s<i;++s)p=h[s],r&&(p=void 0===o?t(p,s):n(t,o,p,s)),Ie(a,s,p)}return a.length=i,a},of:function(){for(var e=arguments.length,t=this,n=r(t)||!he.IsCallable(t)?new Array(e):he.Construct(t,[e]),o=0;o<e;++o)Ie(n,o,arguments[o]);return n.length=e,n}};y(Array,Ye),Ce(Array),e=function(e,t){this.i=0,this.array=e,this.kind=t},y(e.prototype,{next:function(){var t=this.i,n=this.array;if(!(this instanceof e))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=he.ToLength(n.length);t<r;t++){var o,i=this.kind;return"key"===i?o=t:"value"===i?o=n[t]:"entry"===i&&(o=[t,n[t]]),this.i=t+1,Ve(o)}return this.array=void 0,Ve()}}),Ae(e.prototype);var Ze=Array.of===Ye.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}();Ze||ae(Array,"of",Ye.of);var Qe={copyWithin:function(e,t){var n,r=he.ToObject(this),o=he.ToLength(r.length),i=he.ToInteger(e),a=he.ToInteger(t),s=i<0?P(o+i,0):R(i,o),u=a<0?P(o+a,0):R(a,o);arguments.length>2&&(n=arguments[2]);var c=void 0===n?o:he.ToInteger(n),l=c<0?P(o+c,0):R(c,o),f=R(l-u,o-s),p=1;for(u<s&&s<u+f&&(p=-1,u+=f-1,s+=f-1);f>0;)u in r?r[s]=r[u]:delete r[s],u+=p,s+=p,f-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=he.ToObject(this),o=he.ToLength(r.length);t=he.ToInteger(void 0===t?0:t);for(var i=(n=he.ToInteger(void 0===n?o:n))<0?o+n:n,a=t<0?P(o+t,0):R(t,o);a<o&&a<i;++a)r[a]=e;return r},find:function(e){var t=he.ToObject(this),r=he.ToLength(t.length);if(!he.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var o,i=arguments.length>1?arguments[1]:null,a=0;a<r;a++)if(o=t[a],i){if(n(e,i,o,a,t))return o}else if(e(o,a,t))return o},findIndex:function(e){var t=he.ToObject(this),r=he.ToLength(t.length);if(!he.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var o=arguments.length>1?arguments[1]:null,i=0;i<r;i++)if(o){if(n(e,o,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"entry")}};if(Array.prototype.keys&&!he.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!he.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(y(Array.prototype,{values:Array.prototype[ue]}),ie(V.unscopables)&&(Array.prototype[V.unscopables].values=!0)),c&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ke=Array.prototype.values;ae(Array.prototype,"values",function(){return he.Call(Ke,this,arguments)}),d(Array.prototype,ue,Array.prototype.values,!0)}y(Array.prototype,Qe),1/[!0].indexOf(!0,-0)<0&&d(Array.prototype,"indexOf",function(e){var t=A(this,arguments);return 0===t&&1/t<0?0:t},!0),Ae(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&Ae(Object.getPrototypeOf([].values()));var et=a(function(){return 0===Array.from({length:-1}).length}),tt=function(){var e=Array.from([0].entries());return 1===e.length&&r(e[0])&&0===e[0][0]&&0===e[0][1]}();if(et&&tt||ae(Array,"from",Ye.from),!a(function(){return Array.from([0],void 0)})){var nt=Array.from;ae(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?he.Call(nt,this,arguments):n(nt,this,e)})}var rt=-(Math.pow(2,32)-1),ot=function(e,t){var r={length:rt};return r[t?(r.length>>>0)-1:0]=!0,a(function(){return n(e,r,function(){throw new RangeError("should not reach here")},[]),!0})};if(!ot(Array.prototype.forEach)){var it=Array.prototype.forEach;ae(Array.prototype,"forEach",function(e){return he.Call(it,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.map)){var at=Array.prototype.map;ae(Array.prototype,"map",function(e){return he.Call(at,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.filter)){var st=Array.prototype.filter;ae(Array.prototype,"filter",function(e){return he.Call(st,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.some)){var ut=Array.prototype.some;ae(Array.prototype,"some",function(e){return he.Call(ut,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.every)){var ct=Array.prototype.every;ae(Array.prototype,"every",function(e){return he.Call(ct,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.reduce)){var lt=Array.prototype.reduce;ae(Array.prototype,"reduce",function(e){return he.Call(lt,this.length>=0?this:[],arguments)})}if(!ot(Array.prototype.reduceRight,!0)){var ft=Array.prototype.reduceRight;ae(Array.prototype,"reduceRight",function(e){return he.Call(ft,this.length>=0?this:[],arguments)})}var pt=8!==Number("0o10"),ht=2!==Number("0b10"),dt=h(Ue,function(e){return 0===Number(e+0+e)});if(pt||ht||dt){var yt=Number,vt=/^0b[01]+$/i,gt=/^0o[0-7]+$/i,mt=vt.test.bind(vt),bt=gt.test.bind(gt),wt=ze.test.bind(ze),xt=Ge.test.bind(Ge),Tt=function(){var e=function(t){var n;n=arguments.length>0?ne(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),ne(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),ne(t)))return t;throw new TypeError("No default value")}(t):0,"string"==typeof n&&(n=he.Call(Be,n),mt(n)?n=parseInt(k(n,2),2):bt(n)?n=parseInt(k(n,2),8):(wt(n)||xt(n))&&(n=NaN));var r=this,o=a(function(){return yt.prototype.valueOf.call(r),!0});return r instanceof e&&!o?new yt(n):yt(n)};return e}();Se(yt,Tt,{}),y(Tt,{NaN:yt.NaN,MAX_VALUE:yt.MAX_VALUE,MIN_VALUE:yt.MIN_VALUE,NEGATIVE_INFINITY:yt.NEGATIVE_INFINITY,POSITIVE_INFINITY:yt.POSITIVE_INFINITY}),Number=Tt,w(S,"Number",Tt)}var jt=Math.pow(2,53)-1;y(Number,{MAX_SAFE_INTEGER:jt,MIN_SAFE_INTEGER:-jt,EPSILON:2220446049250313e-31,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&he.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&_(e)<=Number.MAX_SAFE_INTEGER},isNaN:Y}),d(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt),1===[,1].find(function(){return!0})&&ae(Array.prototype,"find",Qe.find),0!==[,1].findIndex(function(){return!0})&&ae(Array.prototype,"findIndex",Qe.findIndex);var Ot=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),St=function(e,t){u&&Ot(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},Et=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),o=e;o<t;++o)r[o-e]=arguments[o];return r},Ct=function(e){return function(t,n){return t[n]=e[n],t}},At=function(e,t){var n,r=o(Object(t));return he.IsCallable(Object.getOwnPropertySymbols)&&(n=p(Object.getOwnPropertySymbols(Object(t)),Ot(t))),f(I(r,n||[]),Ct(t),e)},It={assign:function(e,t){var n=he.ToObject(e,"Cannot convert undefined or null to object");return f(he.Call(Et,1,arguments),At,n)},is:function(e,t){return he.SameValue(e,t)}},kt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}();if(kt&&ae(Object,"assign",It.assign),y(Object,It),u){var Mt={setPrototypeOf:function(e,t){var r,o=function(e,t){return function(e,t){if(!he.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!he.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),n(r,e,t),e};try{r=e.getOwnPropertyDescriptor(e.prototype,t).set,n(r,{},null)}catch(n){if(e.prototype!=={}[t])return;r=function(e){this[t]=e},o.polyfill=o(o({},null),e.prototype)instanceof e}return o}(Object,"__proto__")};y(Object,Mt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var e=Object.create(null),t=Object.getPrototypeOf,n=Object.setPrototypeOf;Object.getPrototypeOf=function(n){var r=t(n);return r===e?null:r},Object.setPrototypeOf=function(t,r){return n(t,null===r?e:r)},Object.setPrototypeOf.polyfill=!1}(),!!i(function(){return Object.keys("foo")})){var Dt=Object.keys;ae(Object,"keys",function(e){return Dt(he.ToObject(e))}),o=Object.keys}if(i(function(){return Object.keys(/a/g)})){var Nt=Object.keys;ae(Object,"keys",function(e){if(oe(e)){var t=[];for(var n in e)$(e,n)&&M(t,n);return t}return Nt(e)}),o=Object.keys}if(Object.getOwnPropertyNames&&!!i(function(){return Object.getOwnPropertyNames("foo")})){var Pt="object"==typeof window?Object.getOwnPropertyNames(window):[],Rt=Object.getOwnPropertyNames;ae(Object,"getOwnPropertyNames",function(e){var t=he.ToObject(e);if("[object Window]"===v(t))try{return Rt(t)}catch(e){return I([],Pt)}return Rt(t)})}if(Object.getOwnPropertyDescriptor&&!!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Lt=Object.getOwnPropertyDescriptor;ae(Object,"getOwnPropertyDescriptor",function(e,t){return Lt(he.ToObject(e),t)})}if(Object.seal&&!!i(function(){return Object.seal("foo")})){var _t=Object.seal;ae(Object,"seal",function(e){return he.TypeIsObject(e)?_t(e):e})}if(Object.isSealed&&!!i(function(){return Object.isSealed("foo")})){var qt=Object.isSealed;ae(Object,"isSealed",function(e){return!he.TypeIsObject(e)||qt(e)})}if(Object.freeze&&!!i(function(){return Object.freeze("foo")})){var Ft=Object.freeze;ae(Object,"freeze",function(e){return he.TypeIsObject(e)?Ft(e):e})}if(Object.isFrozen&&!!i(function(){return Object.isFrozen("foo")})){var Ht=Object.isFrozen;ae(Object,"isFrozen",function(e){return!he.TypeIsObject(e)||Ht(e)})}if(Object.preventExtensions&&!!i(function(){return Object.preventExtensions("foo")})){var $t=Object.preventExtensions;ae(Object,"preventExtensions",function(e){return he.TypeIsObject(e)?$t(e):e})}if(Object.isExtensible&&!!i(function(){return Object.isExtensible("foo")})){var Wt=Object.isExtensible;ae(Object,"isExtensible",function(e){return!!he.TypeIsObject(e)&&Wt(e)})}if(Object.getPrototypeOf&&!!i(function(){return Object.getPrototypeOf("foo")})){var Bt=Object.getPrototypeOf;ae(Object,"getPrototypeOf",function(e){return Bt(he.ToObject(e))})}var Ut=u&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&he.IsCallable(e.get)}();if(u&&!Ut){m(RegExp.prototype,"flags",function(){if(!he.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var zt=u&&a(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=se&&u&&function(){var e=/./;return e[V.match]=!1,RegExp(e)===e}(),Xt=a(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Vt=Xt&&a(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Vt){var Jt=RegExp.prototype.toString;d(RegExp.prototype,"toString",function(){var e=he.RequireObjectCoercible(this);return oe(e)?n(Jt,e):"/"+le(e.source)+"/"+le(e.flags)},!0),T(RegExp.prototype.toString,Jt)}if(u&&(!zt||Gt)){var Yt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=he.IsCallable(Zt.get)?Zt.get:function(){return this.source},Kt=RegExp,en=function e(t,n){var r=he.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?oe(t)?new e(he.Call(Qt,t),void 0===n?he.Call(Yt,t):n):(r&&(t.source,void 0===n&&t.flags),new Kt(t,n)):t};Se(Kt,en,{$input:!0}),RegExp=en,w(S,"RegExp",en)}if(u){var tn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(o(tn),function(e){e in RegExp&&!(tn[e]in RegExp)&&m(RegExp,tn[e],function(){return RegExp[e]})})}Ce(RegExp);var nn=1/Number.EPSILON,rn=Math.pow(2,-23),on=Math.pow(2,127)*(2-rn),an=Math.pow(2,-126),sn=Math.E,un=Math.LOG2E,cn=Math.LOG10E,ln=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(Y(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return K(t-1+H(1-n)*t);var r=t/2;return K(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!E(t))return t;var n=_(t),r=n*n,o=Q(t);return n<1?o*K(n+r/(H(r+1)+1)):o*(K(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(Y(t)||t<-1||t>1)return NaN;var n=_(t);return Q(t)*K(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=q(F(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=he.ToUint32(t);return 0===n?32:ln?he.Call(ln,n):31-L(F(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(Y(t))return NaN;if(!E(t))return 1/0;var n=q(_(t)-1);return(n+1/(n*sn*sn))*(sn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!E(t)||0===t)return t;if(_(t)>.5)return q(t)-1;for(var n=t,r=0,o=1;r+n!==r;)r+=n,n*=t/(o+=1);return r},hypot:function(e,t){for(var n=0,r=0,o=0;o<arguments.length;++o){var i=_(Number(arguments[o]));r<i?(n*=r/i*(r/i),n+=1,r=i):n+=i>0?i/r*(i/r):i}return r===1/0?1/0:r*H(n)},log2:function(e){return F(e)*un},log10:function(e){return F(e)*cn},log1p:K,sign:Q,sinh:function(e){var t=Number(e);if(!E(t)||0===t)return t;var n=_(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var o=q(n-1);return Q(t)*(o-1/(o*sn*sn))*(sn/2)},tanh:function(e){var t=Number(e);return Y(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(q(t)+q(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=he.ToUint32(e),r=he.ToUint32(t),o=65535&n,i=65535&r;return o*i+((n>>>16&65535)*i+o*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||Y(t))return t;var n=Q(t),r=_(t);if(r<an)return n*function(e){return e+nn-nn}(r/an/rn)*an*rn;var o=(1+rn/Number.EPSILON)*r,i=o-(o-r);return i>on||Y(i)?n*(1/0):n*i}},pn=function(e,t,n){return _(1-e/t)/Number.EPSILON<(n||8)};y(Math,fn),d(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),d(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),d(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),d(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),d(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),d(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),d(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),d(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),d(Math,"acosh",fn.acosh,!pn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),d(Math,"cbrt",fn.cbrt,!pn(Math.cbrt(1e-300),1e-100)),d(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);d(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var dn=Math.round,yn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),vn=[nn+1,2*nn-1].every(function(e){return Math.round(e)===e});d(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!yn||!vn),T(Math.round,dn);var gn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,T(Math.imul,gn)),2!==Math.imul.length&&ae(Math,"imul",function(e,t){return he.Call(gn,Math,arguments)});var mn=function(){var e=S.setTimeout;if("function"==typeof e||"object"==typeof e){he.IsPromise=function(e){return!!he.TypeIsObject(e)&&void 0!==e._promise};var t,r=function(e){if(!he.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!he.IsCallable(t.resolve)||!he.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&he.IsCallable(window.postMessage)&&(t=function(){var e=[],t="zero-timeout-message";return window.addEventListener("message",function(n){if(n.source===window&&n.data===t){if(n.stopPropagation(),0===e.length)return;N(e)()}},!0),function(n){M(e,n),window.postMessage(t,"*")}});var o,i,a=he.IsCallable(S.setImmediate)?S.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:function(){var e=S.Promise,t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}}()||(he.IsCallable(t)?t():function(t){e(t,0)}),s=function(e){return e},u=function(e){throw e},c={},l=function(e,t,n){a(function(){f(e,t,n)})},f=function(e,t,n){var r,o;if(t===c)return e(n);try{r=e(n),o=t.resolve}catch(e){r=e,o=t.reject}o(r)},p=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(l(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var o=1,i=0;o<r;o++,i+=3)l(n[i+0],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},h=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(l(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var o=1,i=0;o<r;o++,i+=3)l(n[i+1],n[i+2],t),e[i+0]=void 0,e[i+1]=void 0,e[i+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},d=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return h(e,new TypeError("Self resolution"));if(!he.TypeIsObject(n))return p(e,n);try{r=n.then}catch(t){return h(e,t)}if(!he.IsCallable(r))return p(e,n);a(function(){g(e,n,r)})}},reject:function(n){if(!t)return t=!0,h(e,n)}}},v=function(e,t,r,o){e===i?n(e,t,r,o,c):n(e,t,r,o)},g=function(e,t,n){var r=d(e),o=r.resolve,i=r.reject;try{v(n,t,o,i)}catch(e){i(e)}},m=function(){var e=function(t){if(!(this instanceof e))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!he.IsCallable(t))throw new TypeError("not a valid resolver");var n=ke(this,e,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),r=d(n),i=r.reject;try{t(r.resolve,i)}catch(e){i(e)}return n};return e}();o=m.prototype;var b=function(e,t,n,r){var o=!1;return function(i){o||(o=!0,t[e]=i,0===--r.count&&(0,n.resolve)(t))}};return y(m,{all:function(e){var t=this;if(!he.TypeIsObject(t))throw new TypeError("Promise is not object");var n,o,i=new r(t);try{return function(e,t,n){for(var r,o,i=e.iterator,a=[],s={count:1},u=0;;){try{if(!1===(r=he.IteratorStep(i))){e.done=!0;break}o=r.value}catch(t){throw e.done=!0,t}a[u]=void 0;var c=t.resolve(o),l=b(u,a,n,s);s.count+=1,v(c.then,c,l,n.reject),u+=1}return 0===--s.count&&(0,n.resolve)(a),n.promise}(o={iterator:n=he.GetIterator(e),done:!1},t,i)}catch(e){var a=e;if(o&&!o.done)try{he.IteratorClose(n,!0)}catch(e){a=e}return(0,i.reject)(a),i.promise}},race:function(e){var t=this;if(!he.TypeIsObject(t))throw new TypeError("Promise is not object");var n,o,i=new r(t);try{return function(e,t,n){for(var r,o,i,a=e.iterator;;){try{if(!1===(r=he.IteratorStep(a))){e.done=!0;break}o=r.value}catch(t){throw e.done=!0,t}i=t.resolve(o),v(i.then,i,n.resolve,n.reject)}return n.promise}(o={iterator:n=he.GetIterator(e),done:!1},t,i)}catch(e){var a=e;if(o&&!o.done)try{he.IteratorClose(n,!0)}catch(e){a=e}return(0,i.reject)(a),i.promise}},reject:function(e){if(!he.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new r(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!he.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(he.IsPromise(e)&&e.constructor===t)return e;var n=new r(t);return(0,n.resolve)(e),n.promise}}),y(o,{catch:function(e){return this.then(null,e)},then:function(e,t){var n=this;if(!he.IsPromise(n))throw new TypeError("not a promise");var o,i=he.SpeciesConstructor(n,m);o=arguments.length>2&&arguments[2]===c&&i===m?c:new r(i);var a,f=he.IsCallable(e)?e:s,p=he.IsCallable(t)?t:u,h=n._promise;if(0===h.state){if(0===h.reactionLength)h.fulfillReactionHandler0=f,h.rejectReactionHandler0=p,h.reactionCapability0=o;else{var d=3*(h.reactionLength-1);h[d+0]=f,h[d+1]=p,h[d+2]=o}h.reactionLength+=1}else if(1===h.state)a=h.result,l(f,o,a);else{if(2!==h.state)throw new TypeError("unexpected Promise state");a=h.result,l(p,o,a)}return o.promise}}),c=new r(m),i=o.then,m}}();if(S.Promise&&(delete S.Promise.accept,delete S.Promise.defer,delete S.Promise.prototype.chain),"function"==typeof mn){y(S,{Promise:mn});var bn=O(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),wn=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)}),xn=i(function(){return S.Promise.call(3,W)}),Tn=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,W).then(null,W)}catch(e){return!0}return t===n}(S.Promise),jn=u&&function(){var e=0,t=Object.defineProperty({},"then",{get:function(){e+=1}});return Promise.resolve(t),1===e}(),On=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};On.prototype=Promise.prototype,On.all=Promise.all;var Sn=a(function(){return!!On.all([1,2])});if(bn&&wn&&xn&&!Tn&&jn&&!Sn||(Promise=mn,ae(S,"Promise",mn)),1!==Promise.all.length){var En=Promise.all;ae(Promise,"all",function(e){return he.Call(En,this,arguments)})}if(1!==Promise.race.length){var Cn=Promise.race;ae(Promise,"race",function(e){return he.Call(Cn,this,arguments)})}if(1!==Promise.resolve.length){var An=Promise.resolve;ae(Promise,"resolve",function(e){return he.Call(An,this,arguments)})}if(1!==Promise.reject.length){var In=Promise.reject;ae(Promise,"reject",function(e){return he.Call(In,this,arguments)})}St(Promise,"all"),St(Promise,"race"),St(Promise,"resolve"),St(Promise,"reject"),Ce(Promise)}var kn=function(e){var t=o(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Mn=kn(["z","a","bb"]),Dn=kn(["z",1,"a","3",2]);if(u){var Nn=function(e,t){return t||Mn?pe(e)?"^"+he.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Dn?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Pn=function(){return Object.create?Object.create(null):{}},Rn=function(e,t,o){if(r(o)||re(o))l(o,function(e){if(!he.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(o instanceof e)n(e.prototype.forEach,o,function(e,n){t.set(n,e)});else{var i,a;if(!pe(o)){if(a=t.set,!he.IsCallable(a))throw new TypeError("bad map");i=he.GetIterator(o)}if(void 0!==i)for(;;){var s=he.IteratorStep(i);if(!1===s)break;var u=s.value;try{if(!he.TypeIsObject(u))throw new TypeError("Iterator value "+u+" is not an entry object");n(a,t,u[0],u[1])}catch(e){throw he.IteratorClose(i,!0),e}}}},Ln=function(e,t,o){if(r(o)||re(o))l(o,function(e){t.add(e)});else if(o instanceof e)n(e.prototype.forEach,o,function(e){t.add(e)});else{var i,a;if(!pe(o)){if(a=t.add,!he.IsCallable(a))throw new TypeError("bad set");i=he.GetIterator(o)}if(void 0!==i)for(;;){var s=he.IteratorStep(i);if(!1===s)break;var u=s.value;try{n(a,t,u)}catch(e){throw he.IteratorClose(i,!0),e}}}},_n={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var r,o=function(e,t){if(!he.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+he.ToString(e))},i=function(e,t){o(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};i.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return Ve();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,Ve(e);return this.i=void 0,Ve()}},Ae(i.prototype);var a=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var n=ke(this,e,r,{_es6map:!0,_head:null,_map:B?new B:null,_size:0,_storage:Pn()}),o=new t(null,null);return o.next=o.prev=o,n._head=o,arguments.length>0&&Rn(e,n,arguments[0]),n};return m(r=a.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),y(r,{get:function(e){var t;o(this,"get");var n=Nn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=z.call(this._map,e))?t.value:void 0;for(var r=this._head,i=r;(i=i.next)!==r;)if(he.SameValueZero(i.key,e))return i.value},has:function(e){o(this,"has");var t=Nn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(he.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){o(this,"set");var r,i=this._head,a=i,s=Nn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),a=i.prev}else this._map&&(G.call(this._map,e)?z.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),a=i.prev));for(;(a=a.next)!==i;)if(he.SameValueZero(a.key,e))return a.value=n,this;return r=r||new t(e,n),he.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){o(this,"delete");var n=this._head,r=n,i=Nn(t,!0);if(null!==i){if(void 0===this._storage[i])return!1;r=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!G.call(this._map,t))return!1;r=z.call(this._map,t).prev,U.call(this._map,t)}for(;(r=r.next)!==n;)if(he.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){o(this,"clear"),this._map=B?new B:null,this._size=0,this._storage=Pn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return o(this,"keys"),new i(this,"key")},values:function(){return o(this,"values"),new i(this,"value")},entries:function(){return o(this,"entries"),new i(this,"key+value")},forEach:function(e){o(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,r=this.entries(),i=r.next();!i.done;i=r.next())t?n(e,t,i.value[1],i.value[0],this):e(i.value[1],i.value[0],this)}}),Ae(r,r.entries),a}(),Set:function(){var e,t=function(e,t){if(!he.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+he.ToString(e))},r=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=ke(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:Pn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Ln(t,n,arguments[0]),n};e=r.prototype;var i=function(e){if(!e["[[SetData]]"]){var t=new _n.Map;e["[[SetData]]"]=t,l(o(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?k(t,1):"n"===n?+k(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};m(r.prototype,"size",function(){return t(this,"size"),this._storage?o(this._storage).length:(i(this),this["[[SetData]]"].size)}),y(r.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=Nn(e))?!!this._storage[n]:(i(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=Nn(e))?(this._storage[n]=!0,this):(i(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=Nn(e))){var r=$(this._storage,n);return delete this._storage[n]&&r}return i(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=Pn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),i(this),new a(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),i(this),new a(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var r=arguments.length>1?arguments[1]:null,o=this;i(o),this["[[SetData]]"].forEach(function(t,i){r?n(e,r,i,i,o):e(i,i,o)})}}),d(r.prototype,"keys",r.prototype.values,!0),Ae(r.prototype,r.prototype.values);var a=function(e){this.it=e};return a.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},Ae(a.prototype),r}()};if(S.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(S.Set=_n.Set),S.Map||S.Set){a(function(){return 2===new Map([[1,2]]).get(1)})||(S.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Rn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,S.Map.prototype),t},S.Map.prototype=j(B.prototype),d(S.Map.prototype,"constructor",S.Map,!0),T(S.Map,B));var qn=new Map,Fn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);return e.set(-0,e),e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}(),Hn=qn.set(1,2)===qn;Fn&&Hn||ae(Map.prototype,"set",function(e,t){return n(X,this,0===e?0:e,t),this}),Fn||(y(Map.prototype,{get:function(e){return n(z,this,0===e?0:e)},has:function(e){return n(G,this,0===e?0:e)}},!0),T(Map.prototype.get,z),T(Map.prototype.has,G));var $n=new Set,Wn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&function(e){return e.delete(0),e.add(-0),!e.has(0)}($n),Bn=$n.add(1)===$n;if(!Wn||!Bn){var Un=Set.prototype.add;Set.prototype.add=function(e){return n(Un,this,0===e?0:e),this},T(Set.prototype.add,Un)}if(!Wn){var zn=Set.prototype.has;Set.prototype.has=function(e){return n(zn,this,0===e?0:e)},T(Set.prototype.has,zn);var Gn=Set.prototype.delete;Set.prototype.delete=function(e){return n(Gn,this,0===e?0:e)},T(Set.prototype.delete,Gn)}var Xn=O(S.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Vn=Object.setPrototypeOf&&!Xn,Jn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();0===S.Map.length&&!Vn&&Jn||(S.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Rn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},S.Map.prototype=B.prototype,d(S.Map.prototype,"constructor",S.Map,!0),T(S.Map,B));var Yn=O(S.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),Zn=Object.setPrototypeOf&&!Yn,Qn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(0!==S.Set.length||Zn||!Qn){var Kn=S.Set;S.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new Kn;return arguments.length>0&&Ln(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},S.Set.prototype=Kn.prototype,d(S.Set.prototype,"constructor",S.Set,!0),T(S.Set,Kn)}var er=new S.Map,tr=!a(function(){return er.keys().next().done});if(("function"!=typeof S.Map.prototype.clear||0!==(new S.Set).size||0!==er.size||"function"!=typeof S.Map.prototype.keys||"function"!=typeof S.Set.prototype.keys||"function"!=typeof S.Map.prototype.forEach||"function"!=typeof S.Set.prototype.forEach||s(S.Map)||s(S.Set)||"function"!=typeof er.keys().next||tr||!Xn)&&y(S,{Map:_n.Map,Set:_n.Set},!0),S.Set.prototype.keys!==S.Set.prototype.values&&d(S.Set.prototype,"keys",S.Set.prototype.values,!0),Ae(Object.getPrototypeOf((new S.Map).keys())),Ae(Object.getPrototypeOf((new S.Set).keys())),c&&"has"!==S.Set.prototype.has.name){var nr=S.Set.prototype.has;ae(S.Set.prototype,"has",function(e){return n(nr,this,e)})}}y(S,_n),Ce(S.Map),Ce(S.Set)}var rr=function(e){if(!he.TypeIsObject(e))throw new TypeError("target must be an object")},or={apply:function(){return he.Call(he.Call,null,arguments)},construct:function(e,t){if(!he.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!he.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return he.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(rr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return rr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(or,{ownKeys:function(e){rr(e);var t=Object.getOwnPropertyNames(e);return he.IsCallable(Object.getOwnPropertySymbols)&&D(t,Object.getOwnPropertySymbols(e)),t}});var ir=function(e){return!i(e)};if(Object.preventExtensions&&Object.assign(or,{isExtensible:function(e){return rr(e),Object.isExtensible(e)},preventExtensions:function(e){return rr(e),ir(function(){return Object.preventExtensions(e)})}}),u){var ar=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var o=Object.getPrototypeOf(e);if(null===o)return;return ar(o,t,n)}return"value"in r?r.value:r.get?he.Call(r.get,n):void 0},sr=function(e,t,r,o){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var a=Object.getPrototypeOf(e);if(null!==a)return sr(a,t,r,o);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in i?!!i.writable&&(!!he.TypeIsObject(o)&&(Object.getOwnPropertyDescriptor(o,t)?ce.defineProperty(o,t,{value:r}):ce.defineProperty(o,t,{value:r,writable:!0,enumerable:!0,configurable:!0}))):!!i.set&&(n(i.set,o,r),!0)};Object.assign(or,{defineProperty:function(e,t,n){return rr(e),ir(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return rr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){return rr(e),ar(e,t,arguments.length>2?arguments[2]:e)},set:function(e,t,n){return rr(e),sr(e,t,n,arguments.length>3?arguments[3]:e)}})}if(Object.getPrototypeOf){var ur=Object.getPrototypeOf;or.getPrototypeOf=function(e){return rr(e),ur(e)}}if(Object.setPrototypeOf&&or.getPrototypeOf){Object.assign(or,{setPrototypeOf:function(e,t){if(rr(e),null!==t&&!he.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===ce.getPrototypeOf(e)||!(ce.isExtensible&&!ce.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=or.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(or).forEach(function(e){!function(e,t){he.IsCallable(S.Reflect[e])?a(function(){return S.Reflect[e](1),S.Reflect[e](NaN),S.Reflect[e](!0),!0})&&ae(S.Reflect,e,t):d(S.Reflect,e,t)}(e,or[e])});var cr=S.Reflect.getPrototypeOf;if(c&&cr&&"getPrototypeOf"!==cr.name&&ae(S.Reflect,"getPrototypeOf",function(e){return n(cr,S.Reflect,e)}),S.Reflect.setPrototypeOf&&a(function(){return S.Reflect.setPrototypeOf(1,{}),!0})&&ae(S.Reflect,"setPrototypeOf",or.setPrototypeOf),S.Reflect.defineProperty&&(a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||ae(S.Reflect,"defineProperty",or.defineProperty)),S.Reflect.construct&&(a(function(){var e=function(){};return S.Reflect.construct(function(){},[],e)instanceof e})||ae(S.Reflect,"construct",or.construct)),"Invalid Date"!==String(new Date(NaN))){var lr=Date.prototype.toString;ae(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":he.Call(lr,this)})}var fr={anchor:function(e){return he.CreateHTML(this,"a","name",e)},big:function(){return he.CreateHTML(this,"big","","")},blink:function(){return he.CreateHTML(this,"blink","","")},bold:function(){return he.CreateHTML(this,"b","","")},fixed:function(){return he.CreateHTML(this,"tt","","")},fontcolor:function(e){return he.CreateHTML(this,"font","color",e)},fontsize:function(e){return he.CreateHTML(this,"font","size",e)},italics:function(){return he.CreateHTML(this,"i","","")},link:function(e){return he.CreateHTML(this,"a","href",e)},small:function(){return he.CreateHTML(this,"small","","")},strike:function(){return he.CreateHTML(this,"strike","","")},sub:function(){return he.CreateHTML(this,"sub","","")},sup:function(){return he.CreateHTML(this,"sup","","")}};l(Object.keys(fr),function(e){var t=String.prototype[e],r=!1;if(he.IsCallable(t)){var o=n(t,"",' " '),i=I([],o.match(/"/g)).length;r=o!==o.toLowerCase()||i>2}else r=!0;r&&ae(String.prototype,e,fr[e])});var pr=function(){if(!se)return!1;var e="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(V()))return!0;if("[null]"!==e([V()]))return!0;var t={a:V()};return t[V()]=!0,"{}"!==e(t)}(),hr=a(function(){return!se||"{}"===JSON.stringify(Object(V()))&&"[{}]"===JSON.stringify([Object(V())])});if(pr||!hr){var dr=JSON.stringify;ae(JSON,"stringify",function(e){if("symbol"!=typeof e){var t;arguments.length>1&&(t=arguments[1]);var o=[e];if(r(t))o.push(t);else{var i=he.IsCallable(t)?t:null;o.push(function(e,t){var r=i?n(i,this,e,t):t;if("symbol"!=typeof r)return ie(r)?Ct({})(r):r})}return arguments.length>2&&o.push(arguments[2]),dr.apply(this,o)}})}return S}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=Object.getPrototypeOf,o=n.slice,i=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,s=n.indexOf,u={},c=u.toString,l=u.hasOwnProperty,f=l.toString,p=f.call(Object),h={},d=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},v=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,o,i=(n=n||v).createElement("script");if(i.text=e,t)for(r in g)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[c.call(e)]||"object":typeof e}var w="3.7.1",x=/HTML$/i,T=function(e,t){return new T.fn.init(e,t)};function j(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!d(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}T.fn=T.prototype={jquery:w,constructor:T,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},T.extend=T.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||d(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(T.isPlainObject(r)||(o=Array.isArray(r)))?(n=a[t],i=o&&!Array.isArray(n)?[]:o||T.isPlainObject(n)?n:{},o=!1,a[t]=T.extend(c,i,r)):void 0!==r&&(a[t]=r));return a},T.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=r(e))&&("function"!=typeof(n=l.call(t,"constructor")&&t.constructor)||f.call(n)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(j(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,o=e.nodeType;if(!o)for(;t=e[r++];)n+=T.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?T.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!x.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,s=[];if(j(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return i(s)},guid:1,support:h}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=n[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var S=n.pop,E=n.sort,C=n.splice,A="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");T.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var k=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}T.escapeSelector=function(e){return(e+"").replace(k,M)};var D=v,N=a;!function(){var t,r,i,a,u,c,f,p,d,y,v=N,g=T.expando,m=0,b=0,w=ee(),x=ee(),j=ee(),k=ee(),M=function(e,t){return e===t&&(u=!0),0},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+A+"*("+R+")(?:"+A+"*([*^$|!~]?=)"+A+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+A+"*\\]",_=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",q=new RegExp(A+"+","g"),F=new RegExp("^"+A+"*,"+A+"*"),H=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),$=new RegExp(A+"|>"),W=new RegExp(_),B=new RegExp("^"+R+"$"),U={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+_),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},z=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,V=/[+~]/,J=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),Y=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=function(){ue()},Q=pe(function(e){return!0===e.disabled&&O(e,"fieldset")},{dir:"parentNode",next:"legend"});try{v.apply(n=o.call(D.childNodes),D.childNodes),n[D.childNodes.length].nodeType}catch(t){v={apply:function(e,t){N.apply(e,o.call(t))},call:function(e){N.apply(e,o.call(arguments,1))}}}function K(e,t,n,r){var o,i,a,s,u,l,f,y=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&(ue(t),t=t||c,p)){if(11!==m&&(u=X.exec(e)))if(o=u[1]){if(9===m){if(!(a=t.getElementById(o)))return n;if(a.id===o)return v.call(n,a),n}else if(y&&(a=y.getElementById(o))&&K.contains(t,a)&&a.id===o)return v.call(n,a),n}else{if(u[2])return v.apply(n,t.getElementsByTagName(e)),n;if((o=u[3])&&t.getElementsByClassName)return v.apply(n,t.getElementsByClassName(o)),n}if(!(k[e+" "]||d&&d.test(e))){if(f=e,y=t,1===m&&($.test(e)||H.test(e))){for((y=V.test(e)&&se(t.parentNode)||t)==t&&h.scope||((s=t.getAttribute("id"))?s=T.escapeSelector(s):t.setAttribute("id",s=g)),i=(l=le(e)).length;i--;)l[i]=(s?"#"+s:":scope")+" "+fe(l[i]);f=l.join(",")}try{return v.apply(n,y.querySelectorAll(f)),n}catch(t){k(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return me(e.replace(I,"$1"),t,n,r)}function ee(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function te(e){return e[g]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return O(t,"input")&&t.type===e}}function oe(e){return function(t){return(O(t,"input")||O(t,"button"))&&t.type===e}}function ie(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Q(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te(function(t){return t=+t,te(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function se(e){return e&&void 0!==e.getElementsByTagName&&e}function ue(e){var t,n=e?e.ownerDocument||e:D;return n!=c&&9===n.nodeType&&n.documentElement&&(f=(c=n).documentElement,p=!T.isXMLDoc(c),y=f.matches||f.webkitMatchesSelector||f.msMatchesSelector,f.msMatchesSelector&&D!=c&&(t=c.defaultView)&&t.top!==t&&t.addEventListener("unload",Z),h.getById=ne(function(e){return f.appendChild(e).id=T.expando,!c.getElementsByName||!c.getElementsByName(T.expando).length}),h.disconnectedMatch=ne(function(e){return y.call(e,"*")}),h.scope=ne(function(){return c.querySelectorAll(":scope")}),h.cssHas=ne(function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),h.getById?(r.filter.ID=function(e){var t=e.replace(J,Y);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,Y);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&p){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&p)return t.getElementsByClassName(e)},d=[],ne(function(e){var t;f.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+A+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+g+"-]").length||d.push("~="),e.querySelectorAll("a#"+g+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+A+"*name"+A+"*="+A+"*(?:''|\"\")")}),h.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),M=function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==D&&K.contains(D,e)?-1:t===c||t.ownerDocument==D&&K.contains(D,t)?1:a?s.call(a,e)-s.call(a,t):0:4&n?-1:1)}),c}for(t in K.matches=function(e,t){return K(e,null,null,t)},K.matchesSelector=function(e,t){if(ue(e),p&&!k[t+" "]&&(!d||!d.test(t)))try{var n=y.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){k(t,!0)}return 0<K(t,c,null,[e]).length},K.contains=function(e,t){return(e.ownerDocument||e)!=c&&ue(e),T.contains(e,t)},K.attr=function(e,t){(e.ownerDocument||e)!=c&&ue(e);var n=r.attrHandle[t.toLowerCase()],o=n&&l.call(r.attrHandle,t.toLowerCase())?n(e,t,!p):void 0;return void 0!==o?o:e.getAttribute(t)},K.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},T.uniqueSort=function(e){var t,n=[],r=0,i=0;if(u=!h.sortStable,a=!h.sortStable&&o.call(e,0),E.call(e,M),u){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)C.call(e,n[r],1)}return a=null,e},T.fn.uniqueSort=function(){return this.pushStack(T.uniqueSort(o.apply(this)))},(r=T.expr={cacheLength:50,createPseudo:te,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,Y),e[3]=(e[3]||e[4]||e[5]||"").replace(J,Y),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||K.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&K.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=le(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,Y).toLowerCase();return"*"===e?function(){return!0}:function(e){return O(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+A+")"+e+"("+A+"|$)"))&&w(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=K.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o.replace(q," ")+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,p,h,d=i!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s,w=!1;if(y){if(i){for(;d;){for(f=t;f=f[d];)if(s?O(f,v):1===f.nodeType)return!1;h=d="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&b){for(w=(p=(c=(l=y[g]||(y[g]={}))[e]||[])[0]===m&&c[1])&&c[2],f=p&&y.childNodes[p];f=++p&&f&&f[d]||(w=p=0)||h.pop();)if(1===f.nodeType&&++w&&f===t){l[e]=[m,p,w];break}}else if(b&&(w=p=(c=(l=t[g]||(t[g]={}))[e]||[])[0]===m&&c[1]),!1===w)for(;(f=++p&&f&&f[d]||(w=p=0)||h.pop())&&(!(s?O(f,v):1===f.nodeType)||!++w||(b&&((l=f[g]||(f[g]={}))[e]=[m,w]),f!==t)););return(w-=o)===r||w%r==0&&0<=w/r}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||K.error("unsupported pseudo: "+e);return o[g]?o(t):1<o.length?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?te(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)e[r=s.call(e,i[a])]=!(n[r]=i[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:te(function(e){var t=[],n=[],r=ge(e.replace(I,"$1"));return r[g]?te(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:te(function(e){return function(t){return 0<K(e,t).length}}),contains:te(function(e){return e=e.replace(J,Y),function(t){return-1<(t.textContent||T.text(t)).indexOf(e)}}),lang:te(function(e){return B.test(e||"")||K.error("unsupported lang: "+e),e=e.replace(J,Y).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ie(!1),disabled:ie(!0),checked:function(e){return O(e,"input")&&!!e.checked||O(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return z.test(e.nodeName)},button:function(e){return O(e,"input")&&"button"===e.type||O(e,"button")},text:function(e){var t;return O(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae(function(){return[0]}),last:ae(function(e,t){return[t-1]}),eq:ae(function(e,t,n){return[n<0?n+t:n]}),even:ae(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ae(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ae(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ae(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=re(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=oe(t);function ce(){}function le(e,t){var n,o,i,a,s,u,c,l=x[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(a in n&&!(o=F.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(i=[])),n=!1,(o=H.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(I," ")}),s=s.slice(n.length)),r.filter)!(o=U[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),i.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?K.error(e):x(e,u).slice(0)}function fe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function pe(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=b++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,u){var c,l,f=[m,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(l=t[g]||(t[g]={}),o&&O(t,o))t=t[r]||t;else{if((c=l[i])&&c[0]===m&&c[1]===s)return f[2]=c[2];if((l[i]=f)[2]=e(t,n,u))return!0}return!1}}function he(e){return 1<e.length?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function de(e,t,n,r,o){for(var i,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(s)));return a}function ye(e,t,n,r,o,i){return r&&!r[g]&&(r=ye(r)),o&&!o[g]&&(o=ye(o,i)),te(function(i,a,u,c){var l,f,p,h,d=[],y=[],g=a.length,m=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)K(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),b=!e||!i&&t?m:de(m,d,e,u,c);if(n?n(b,h=o||(i?e:g||r)?[]:a,u,c):h=b,r)for(l=de(h,y),r(l,[],u,c),f=l.length;f--;)(p=l[f])&&(h[y[f]]=!(b[y[f]]=p));if(i){if(o||e){if(o){for(l=[],f=h.length;f--;)(p=h[f])&&l.push(b[f]=p);o(null,h=[],l,c)}for(f=h.length;f--;)(p=h[f])&&-1<(l=o?s.call(i,p):d[f])&&(i[l]=!(a[l]=p))}}else h=de(h===a?h.splice(g,h.length):h),o?o(null,a,h,c):v.apply(a,h)})}function ve(e){for(var t,n,o,a=e.length,u=r.relative[e[0].type],c=u||r.relative[" "],l=u?1:0,f=pe(function(e){return e===t},c,!0),p=pe(function(e){return-1<s.call(t,e)},c,!0),h=[function(e,n,r){var o=!u&&(r||n!=i)||((t=n).nodeType?f(e,n,r):p(e,n,r));return t=null,o}];l<a;l++)if(n=r.relative[e[l].type])h=[pe(he(h),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[g]){for(o=++l;o<a&&!r.relative[e[o].type];o++);return ye(1<l&&he(h),1<l&&fe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(I,"$1"),n,l<o&&ve(e.slice(l,o)),o<a&&ve(e=e.slice(o)),o<a&&fe(e))}h.push(n)}return he(h)}function ge(e,t){var n,o,a,s,u,l,f=[],h=[],d=j[e+" "];if(!d){for(t||(t=le(e)),n=t.length;n--;)(d=ve(t[n]))[g]?f.push(d):h.push(d);(d=j(e,(o=h,s=0<(a=f).length,u=0<o.length,l=function(e,t,n,l,f){var h,d,y,g=0,b="0",w=e&&[],x=[],j=i,O=e||u&&r.find.TAG("*",f),E=m+=null==j?1:Math.random()||.1,C=O.length;for(f&&(i=t==c||t||f);b!==C&&null!=(h=O[b]);b++){if(u&&h){for(d=0,t||h.ownerDocument==c||(ue(h),n=!p);y=o[d++];)if(y(h,t||c,n)){v.call(l,h);break}f&&(m=E)}s&&((h=!y&&h)&&g--,e&&w.push(h))}if(g+=b,s&&b!==g){for(d=0;y=a[d++];)y(w,x,t,n);if(e){if(0<g)for(;b--;)w[b]||x[b]||(x[b]=S.call(l));x=de(x)}v.apply(l,x),f&&!e&&0<x.length&&1<g+a.length&&T.uniqueSort(l)}return f&&(m=E,i=j),w},s?te(l):l))).selector=e}return d}function me(e,t,n,o){var i,a,s,u,c,l="function"==typeof e&&e,f=!o&&le(e=l.selector||e);if(n=n||[],1===f.length){if(2<(a=f[0]=f[0].slice(0)).length&&"ID"===(s=a[0]).type&&9===t.nodeType&&p&&r.relative[a[1].type]){if(!(t=(r.find.ID(s.matches[0].replace(J,Y),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=U.needsContext.test(e)?0:a.length;i--&&(s=a[i],!r.relative[u=s.type]);)if((c=r.find[u])&&(o=c(s.matches[0].replace(J,Y),V.test(a[0].type)&&se(t.parentNode)||t))){if(a.splice(i,1),!(e=o.length&&fe(a)))return v.apply(n,o),n;break}}return(l||ge(e,f))(o,t,!p,n,!t||V.test(e)&&se(t.parentNode)||t),n}ce.prototype=r.filters=r.pseudos,r.setFilters=new ce,h.sortStable=g.split("").sort(M).join("")===g,ue(),h.sortDetached=ne(function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))}),T.find=K,T.expr[":"]=T.expr.pseudos,T.unique=T.uniqueSort,K.compile=ge,K.select=me,K.setDocument=ue,K.tokenize=le,K.escape=T.escapeSelector,K.getText=T.text,K.isXML=T.isXMLDoc,K.selectors=T.expr,K.support=T.support,K.uniqueSort=T.uniqueSort}();var P=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&T(e).is(n))break;r.push(e)}return r},R=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},L=T.expr.match.needsContext,_=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function q(e,t,n){return d(t)?T.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?T.grep(e,function(e){return e===t!==n}):"string"!=typeof t?T.grep(e,function(e){return-1<s.call(t,e)!==n}):T.filter(t,e,n)}T.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?T.find.matchesSelector(r,e)?[r]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<r;t++)if(T.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)T.find(e,o[t],n);return 1<r?T.uniqueSort(n):n},filter:function(e){return this.pushStack(q(this,e||[],!1))},not:function(e){return this.pushStack(q(this,e||[],!0))},is:function(e){return!!q(this,"string"==typeof e&&L.test(e)?T(e):e||[],!1).length}});var F,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||F,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:v,!0)),_.test(r[1])&&T.isPlainObject(t))for(r in t)d(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=v.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):d(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,F=T(v);var $=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function B(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&T(e);if(!L.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&T.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?T.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?s.call(T(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return B(e,"nextSibling")},prev:function(e){return B(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(O(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(e,t){T.fn[e]=function(n,r){var o=T.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=T.filter(r,o)),1<this.length&&(W[e]||T.uniqueSort(o),$.test(e)&&o.reverse()),this.pushStack(o)}});var U=/[^\x20\t\r\n\f]+/g;function z(e){return e}function G(e){throw e}function X(e,t,n,r){var o;try{e&&d(o=e.promise)?o.call(e).done(t).fail(n):e&&d(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},T.each(t.match(U)||[],function(e,t){n[t]=!0}),n):T.extend({},e);var r,o,i,a,s=[],u=[],c=-1,l=function(){for(a=a||e.once,i=r=!0;u.length;c=-1)for(o=u.shift();++c<s.length;)!1===s[c].apply(o[0],o[1])&&e.stopOnFalse&&(c=s.length,o=!1);e.memory||(o=!1),r=!1,a&&(s=o?[]:"")},f={add:function(){return s&&(o&&!r&&(c=s.length-1,u.push(o)),function t(n){T.each(n,function(n,r){d(r)?e.unique&&f.has(r)||s.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),o&&!r&&l()),this},remove:function(){return T.each(arguments,function(e,t){for(var n;-1<(n=T.inArray(t,s,n));)s.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<T.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=o="",this},disabled:function(){return!s},lock:function(){return a=u=[],o||r||(s=o=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),r||l()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},T.extend({Deferred:function(t){var n=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return T.Deferred(function(t){T.each(n,function(n,r){var o=d(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=o&&o.apply(this,arguments);e&&d(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){var i=0;function a(t,n,r,o){return function(){var s=this,u=arguments,c=function(){var e,c;if(!(t<i)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,d(c)?o?c.call(e,a(i,n,z,o),a(i,n,G,o)):(i++,c.call(e,a(i,n,z,o),a(i,n,G,o),a(i,n,z,n.notifyWith))):(r!==z&&(s=void 0,u=[e]),(o||n.resolveWith)(s,u))}},l=o?c:function(){try{c()}catch(e){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(e,l.error),i<=t+1&&(r!==G&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?l():(T.Deferred.getErrorHook?l.error=T.Deferred.getErrorHook():T.Deferred.getStackHook&&(l.error=T.Deferred.getStackHook()),e.setTimeout(l))}}return T.Deferred(function(e){n[0][3].add(a(0,e,d(o)?o:z,e.notifyWith)),n[1][3].add(a(0,e,d(t)?t:z)),n[2][3].add(a(0,e,d(r)?r:G))}).promise()},promise:function(e){return null!=e?T.extend(e,o):o}},i={};return T.each(n,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=T.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=1<arguments.length?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(X(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||d(i[n]&&i[n].then)))return a.then();for(;n--;)X(i[n],s(n),a.reject);return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&V.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},T.readyException=function(t){e.setTimeout(function(){throw t})};var J=T.Deferred();function Y(){v.removeEventListener("DOMContentLoaded",Y),e.removeEventListener("load",Y),T.ready()}T.fn.ready=function(e){return J.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0)!==e&&0<--T.readyWait||J.resolveWith(v,[T])}}),T.ready.then=J.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?e.setTimeout(T.ready):(v.addEventListener("DOMContentLoaded",Y),e.addEventListener("load",Y));var Z=function(e,t,n,r,o,i,a){var s=0,u=e.length,c=null==n;if("object"===b(n))for(s in o=!0,n)Z(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,d(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(T(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):u?t(e[0],n):i},Q=/^-ms-/,K=/-([a-z])/g;function ee(e,t){return t.toUpperCase()}function te(e){return e.replace(Q,"ms-").replace(K,ee)}var ne=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function re(){this.expando=T.expando+re.uid++}re.uid=1,re.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ne(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[te(t)]=n;else for(r in t)o[te(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][te(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(te):(t=te(t))in r?[t]:t.match(U)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||T.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var oe=new re,ie=new re,ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,se=/[A-Z]/g;function ue(e,t,n){var r,o;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(se,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:ae.test(o)?JSON.parse(o):o)}catch(e){}ie.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return ie.hasData(e)||oe.hasData(e)},data:function(e,t,n){return ie.access(e,t,n)},removeData:function(e,t){ie.remove(e,t)},_data:function(e,t,n){return oe.access(e,t,n)},_removeData:function(e,t){oe.remove(e,t)}}),T.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ie.get(i),1===i.nodeType&&!oe.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=te(r.slice(5)),ue(i,r,o[r]));oe.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ie.set(this,e)}):Z(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=ie.get(i,e))||void 0!==(n=ue(i,e))?n:void 0;this.each(function(){ie.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){ie.remove(this,e)})}}),T.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=oe.get(e,t),n&&(!r||Array.isArray(n)?r=oe.access(e,t,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),r=n.length,o=n.shift(),i=T._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){T.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return oe.get(e,n)||oe.access(e,n,{empty:T.Callbacks("once memory").add(function(){oe.remove(e,[t+"queue",n])})})}}),T.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?T.queue(this[0],e):void 0===t?this:this.each(function(){var n=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&T.dequeue(this,e)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=T.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=oe.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,le=new RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],pe=v.documentElement,he=function(e){return T.contains(e.ownerDocument,e)},de={composed:!0};pe.getRootNode&&(he=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(de)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&he(e)&&"none"===T.css(e,"display")};function ve(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return T.css(e,t,"")},u=s(),c=n&&n[3]||(T.cssNumber[t]?"":"px"),l=e.nodeType&&(T.cssNumber[t]||"px"!==c&&+u)&&le.exec(T.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)T.style(e,t,l+c),(1-i)*(1-(i=s()/u||.5))<=0&&(a=0),l/=i;l*=2,T.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=o)),o}var ge={};function me(e,t){for(var n,r,o,i,a,s,u,c=[],l=0,f=e.length;l<f;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(c[l]=oe.get(r,"display")||null,c[l]||(r.style.display="")),""===r.style.display&&ye(r)&&(c[l]=(u=a=i=void 0,a=(o=r).ownerDocument,s=o.nodeName,(u=ge[s])||(i=a.body.appendChild(a.createElement(s)),u=T.css(i,"display"),i.parentNode.removeChild(i),"none"===u&&(u="block"),ge[s]=u)))):"none"!==n&&(c[l]="none",oe.set(r,"display",n)));for(l=0;l<f;l++)null!=c[l]&&(e[l].style.display=c[l]);return e}T.fn.extend({show:function(){return me(this,!0)},hide:function(){return me(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ye(this)?T(this).show():T(this).hide()})}});var be,we,xe=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,je=/^$|^module$|\/(?:java|ecma)script/i;be=v.createDocumentFragment().appendChild(v.createElement("div")),(we=v.createElement("input")).setAttribute("type","radio"),we.setAttribute("checked","checked"),we.setAttribute("name","t"),be.appendChild(we),h.checkClone=be.cloneNode(!0).cloneNode(!0).lastChild.checked,be.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!be.cloneNode(!0).lastChild.defaultValue,be.innerHTML="<option></option>",h.option=!!be.lastChild;var Oe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&O(e,t)?T.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)oe.set(e[n],"globalEval",!t||oe.get(t[n],"globalEval"))}Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td,h.option||(Oe.optgroup=Oe.option=[1,"<select multiple='multiple'>","</select>"]);var Ce=/<|&#?\w+;/;function Ae(e,t,n,r,o){for(var i,a,s,u,c,l,f=t.createDocumentFragment(),p=[],h=0,d=e.length;h<d;h++)if((i=e[h])||0===i)if("object"===b(i))T.merge(p,i.nodeType?[i]:i);else if(Ce.test(i)){for(a=a||f.appendChild(t.createElement("div")),s=(Te.exec(i)||["",""])[1].toLowerCase(),u=Oe[s]||Oe._default,a.innerHTML=u[1]+T.htmlPrefilter(i)+u[2],l=u[0];l--;)a=a.lastChild;T.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(i));for(f.textContent="",h=0;i=p[h++];)if(r&&-1<T.inArray(i,r))o&&o.push(i);else if(c=he(i),a=Se(f.appendChild(i),"script"),c&&Ee(a),n)for(l=0;i=a[l++];)je.test(i.type||"")&&n.push(i);return f}var Ie=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Me(){return!1}function De(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)De(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Me;else if(!o)return e;return 1===i&&(a=o,(o=function(e){return T().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),e.each(function(){T.event.add(this,t,o,r,n)})}function Ne(e,t,n){n?(oe.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var n,r=oe.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=o.call(arguments),oe.set(this,t,r),this[t](),n=oe.get(this,t),oe.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(oe.set(this,t,T.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=ke)}})):void 0===oe.get(e,t)&&T.event.add(e,t,ke)}T.event={global:{},add:function(e,t,n,r,o){var i,a,s,u,c,l,f,p,h,d,y,v=oe.get(e);if(ne(e))for(n.handler&&(n=(i=n).handler,o=i.selector),o&&T.find.matchesSelector(pe,o),n.guid||(n.guid=T.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(U)||[""]).length;c--;)h=y=(s=Ie.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),h&&(f=T.event.special[h]||{},h=(o?f.delegateType:f.bindType)||h,f=T.event.special[h]||{},l=T.extend({type:h,origType:y,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:d.join(".")},i),(p=u[h])||((p=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(h,a)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,l):p.push(l),T.event.global[h]=!0)},remove:function(e,t,n,r,o){var i,a,s,u,c,l,f,p,h,d,y,v=oe.hasData(e)&&oe.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(U)||[""]).length;c--;)if(h=y=(s=Ie.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),h){for(f=T.event.special[h]||{},p=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=p.length;i--;)l=p[i],!o&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(i,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(e,l));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,d,v.handle)||T.removeEvent(e,h,v.handle),delete u[h])}else for(h in u)T.event.remove(e,h+t[c],n,r,!0);T.isEmptyObject(u)&&oe.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=new Array(arguments.length),u=T.event.fix(e),c=(oe.get(this,"events")||Object.create(null))[u.type]||[],l=T.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(a=T.event.handlers.call(this,u,c),t=0;(o=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((T.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,o,i,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],a={},n=0;n<u;n++)void 0===a[o=(r=t[n]).selector+" "]&&(a[o]=r.needsContext?-1<T(o,this).index(c):T.find(o,this,null,[c]).length),a[o]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:d(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return xe.test(t.type)&&t.click&&O(t,"input")&&Ne(t,"click",!0),!1},trigger:function(e){var t=this||e;return xe.test(t.type)&&t.click&&O(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return xe.test(t.type)&&t.click&&O(t,"input")&&oe.get(t,"click")||O(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Me,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Me,isPropagationStopped:Me,isImmediatePropagationStopped:Me,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(v.documentMode){var n=oe.get(this,"handle"),r=T.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else T.event.simulate(t,e.target,T.event.fix(e))}T.event.special[e]={setup:function(){var r;if(Ne(this,e,!0),!v.documentMode)return!1;(r=oe.get(this,t))||this.addEventListener(t,n),oe.set(this,t,(r||0)+1)},trigger:function(){return Ne(this,e),!0},teardown:function(){var e;if(!v.documentMode)return!1;(e=oe.get(this,t)-1)?oe.set(this,t,e):(this.removeEventListener(t,n),oe.remove(this,t))},_default:function(t){return oe.get(t.target,e)},delegateType:t},T.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=v.documentMode?this:r,i=oe.get(o,t);i||(v.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),oe.set(o,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=v.documentMode?this:r,i=oe.get(o,t)-1;i?oe.set(o,t,i):(v.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),oe.remove(o,t))}}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||T.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),T.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,T(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Me),this.each(function(){T.event.remove(this,e,n,t)})}});var Pe=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function _e(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function qe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function He(e,t){var n,r,o,i,a,s;if(1===t.nodeType){if(oe.hasData(e)&&(s=oe.get(e).events))for(o in oe.remove(t,"handle events"),s)for(n=0,r=s[o].length;n<r;n++)T.event.add(t,o,s[o][n]);ie.hasData(e)&&(i=ie.access(e),a=T.extend({},i),ie.set(t,a))}}function $e(e,t,n,r){t=i(t);var o,a,s,u,c,l,f=0,p=e.length,y=p-1,v=t[0],g=d(v);if(g||1<p&&"string"==typeof v&&!h.checkClone&&Re.test(v))return e.each(function(o){var i=e.eq(o);g&&(t[0]=v.call(this,o,i.html())),$e(i,t,n,r)});if(p&&(a=(o=Ae(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(u=(s=T.map(Se(o,"script"),qe)).length;f<p;f++)c=o,f!==y&&(c=T.clone(c,!0,!0),u&&T.merge(s,Se(c,"script"))),n.call(e[f],c,f);if(u)for(l=s[s.length-1].ownerDocument,T.map(s,Fe),f=0;f<u;f++)c=s[f],je.test(c.type||"")&&!oe.access(c,"globalEval")&&T.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?T._evalUrl&&!c.noModule&&T._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):m(c.textContent.replace(Le,""),c,l))}return e}function We(e,t,n){for(var r,o=t?T.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||T.cleanData(Se(r)),r.parentNode&&(n&&he(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,i,a,s,u,c,l=e.cloneNode(!0),f=he(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(a=Se(l),r=0,o=(i=Se(e)).length;r<o;r++)s=i[r],"input"===(c=(u=a[r]).nodeName.toLowerCase())&&xe.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(t)if(n)for(i=i||Se(e),a=a||Se(l),r=0,o=i.length;r<o;r++)He(i[r],a[r]);else He(e,l);return 0<(a=Se(l,"script")).length&&Ee(a,!f&&Se(e,"script")),l},cleanData:function(e){for(var t,n,r,o=T.event.special,i=0;void 0!==(n=e[i]);i++)if(ne(n)){if(t=n[oe.expando]){if(t.events)for(r in t.events)o[r]?T.event.remove(n,r):T.removeEvent(n,r,t.handle);n[oe.expando]=void 0}n[ie.expando]&&(n[ie.expando]=void 0)}}}),T.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return Z(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_e(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_e(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return Z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!Oe[(Te.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,function(t){var n=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(Se(this)),n&&n.replaceChild(t,this))},e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){T.fn[e]=function(e){for(var n,r=[],o=T(e),i=o.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),T(o[s])[t](n),a.apply(r,n.get());return this.pushStack(r)}});var Be=new RegExp("^("+ce+")(?!px)[a-z%]+$","i"),Ue=/^--/,ze=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ge=function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=i[o];return r},Xe=new RegExp(fe.join("|"),"i");function Ve(e,t,n){var r,o,i,a,s=Ue.test(t),u=e.style;return(n=n||ze(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(I,"$1")||void 0),""!==a||he(e)||(a=T.style(e,t)),!h.pixelBoxStyles()&&Be.test(a)&&Xe.test(t)&&(r=u.width,o=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=o,u.maxWidth=i)),void 0!==a?a+"":a}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(c).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,u=12===n(t.marginLeft),l.style.right="60%",a=36===n(t.right),o=36===n(t.width),l.style.position="absolute",i=12===n(l.offsetWidth/3),pe.removeChild(c),l=null}}function n(e){return Math.round(parseFloat(e))}var r,o,i,a,s,u,c=v.createElement("div"),l=v.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,o;return null==s&&(t=v.createElement("table"),n=v.createElement("tr"),r=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",pe.appendChild(t).appendChild(n).appendChild(r),o=e.getComputedStyle(n),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===n.offsetHeight,pe.removeChild(t)),s}}))}();var Ye=["Webkit","Moz","ms"],Ze=v.createElement("div").style,Qe={};function Ke(e){return T.cssProps[e]||Qe[e]||(e in Ze?e:Qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ye.length;n--;)if((e=Ye[n]+t)in Ze)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=le.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ot(e,t,n,r,o,i){var a="width"===t?1:0,s=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=T.css(e,n+fe[a],!0,o)),r?("content"===n&&(u-=T.css(e,"padding"+fe[a],!0,o)),"margin"!==n&&(u-=T.css(e,"border"+fe[a]+"Width",!0,o))):(u+=T.css(e,"padding"+fe[a],!0,o),"padding"!==n?u+=T.css(e,"border"+fe[a]+"Width",!0,o):s+=T.css(e,"border"+fe[a]+"Width",!0,o));return!r&&0<=i&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))||0),u+c}function it(e,t,n){var r=ze(e),o=(!h.boxSizingReliable()||n)&&"border-box"===T.css(e,"boxSizing",!1,r),i=o,a=Ve(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Be.test(a)){if(!n)return a;a="auto"}return(!h.boxSizingReliable()&&o||!h.reliableTrDimensions()&&O(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===T.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===T.css(e,"boxSizing",!1,r),(i=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+ot(e,t,n||(o?"border":"content"),i,r,a)+"px"}function at(e,t,n,r,o){return new at.prototype.init(e,t,n,r,o)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ve(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=te(t),u=Ue.test(t),c=e.style;if(u||(t=Ke(s)),a=T.cssHooks[t]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:c[t];"string"==(i=typeof n)&&(o=le.exec(n))&&o[1]&&(n=ve(e,t,o),i="number"),null!=n&&n==n&&("number"!==i||u||(n+=o&&o[3]||(T.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var o,i,a,s=te(t);return Ue.test(t)||(t=Ke(s)),(a=T.cssHooks[t]||T.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ve(e,t,r)),"normal"===o&&t in nt&&(o=nt[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),T.each(["height","width"],function(e,t){T.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,t,r):Ge(e,tt,function(){return it(e,t,r)})},set:function(e,n,r){var o,i=ze(e),a=!h.scrollboxSize()&&"absolute"===i.position,s=(a||r)&&"border-box"===T.css(e,"boxSizing",!1,i),u=r?ot(e,t,r,s,i):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-ot(e,t,"border",!1,i)-.5)),u&&(o=le.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=T.css(e,t)),rt(0,n,u)}}}),T.cssHooks.marginLeft=Je(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(e,t){T.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+fe[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(T.cssHooks[e+t].set=rt)}),T.fn.extend({css:function(e,t){return Z(this,function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=ze(e),o=t.length;a<o;a++)i[t[a]]=T.css(e,t[a],!1,r);return i}return void 0!==n?T.style(e,t,n):T.css(e,t)},e,t,1<arguments.length)}}),((T.Tween=at).prototype={constructor:at,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=at.prototype.init,T.fx.step={};var st,ut,ct,lt,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ht(){ut&&(!1===v.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ht):e.setTimeout(ht,T.fx.interval),T.fx.tick())}function dt(){return e.setTimeout(function(){st=void 0}),st=Date.now()}function yt(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=fe[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function vt(e,t,n){for(var r,o=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function gt(e,t,n){var r,o,i=0,a=gt.prefilters.length,s=T.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=st||dt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,a=c.tweens.length;i<a;i++)c.tweens[i].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||dt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=T.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=te(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=T.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(l,c.opts.specialEasing);i<a;i++)if(r=gt.prefilters[i].call(c,e,l,c.opts))return d(r.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return T.map(l,vt,c),d(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(gt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ve(n.elem,e,le.exec(t),n),n}]},tweener:function(e,t){d(e)?(t=e,e=["*"]):e=e.match(U);for(var n,r=0,o=e.length;r<o;r++)n=e[r],gt.tweeners[n]=gt.tweeners[n]||[],gt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,u,c,l,f="width"in t||"height"in t,p=this,h={},d=e.style,y=e.nodeType&&ye(e),v=oe.get(e,"fxshow");for(r in n.queue||(null==(a=T._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,T.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[r],ft.test(o)){if(delete t[r],i=i||"toggle"===o,o===(y?"hide":"show")){if("show"!==o||!v||void 0===v[r])continue;y=!0}h[r]=v&&v[r]||T.style(e,r)}if((u=!T.isEmptyObject(t))||!T.isEmptyObject(h))for(r in f&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=v&&v.display)&&(c=oe.get(e,"display")),"none"===(l=T.css(e,"display"))&&(c?l=c:(me([e],!0),c=e.style.display||c,l=T.css(e,"display"),me([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===T.css(e,"float")&&(u||(p.done(function(){d.display=c}),null==c&&(l=d.display,c="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),u=!1,h)u||(v?"hidden"in v&&(y=v.hidden):v=oe.access(e,"fxshow",{display:c}),i&&(v.hidden=!y),y&&me([e],!0),p.done(function(){for(r in y||me([e]),oe.remove(e,"fxshow"),h)T.style(e,r,h[r])})),u=vt(y?v[r]:0,r,p),r in v||(v[r]=u.start,y&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),T.speed=function(e,t,n){var r=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||d(e)&&e,duration:e,easing:n&&t||t&&!d(t)&&t};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){d(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=T.isEmptyObject(e),i=T.speed(t,n,r),a=function(){var t=gt(this,T.extend({},e),i);(o||oe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=T.timers,a=oe.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&pt.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||T.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=oe.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=T.timers,a=r?r.length:0;for(n.finish=!0,T.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),T.each(["toggle","show","hide"],function(e,t){var n=T.fn[t];T.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(yt(t,!0),e,r,o)}}),T.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){T.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),st=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){ut||(ut=!0,ht())},T.fx.stop=function(){ut=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,n){return t=T.fx&&T.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},ct=v.createElement("input"),lt=v.createElement("select").appendChild(v.createElement("option")),ct.type="checkbox",h.checkOn=""!==ct.value,h.optSelected=lt.selected,(ct=v.createElement("input")).value="t",ct.type="radio",h.radioValue="t"===ct.value;var mt,bt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return Z(this,T.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?T.prop(e,t,n):(1===i&&T.isXMLDoc(e)||(o=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=T.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&O(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(U);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var n=bt[t]||T.find.attr;bt[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=bt[a],bt[a]=o,o=null!=n(e,t,r)?a:null,bt[a]=i),o}});var wt=/^(?:input|select|textarea|button)$/i,xt=/^(?:a|area)$/i;function Tt(e){return(e.match(U)||[]).join(" ")}function jt(e){return e.getAttribute&&e.getAttribute("class")||""}function Ot(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(U)||[]}T.fn.extend({prop:function(e,t){return Z(this,T.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(e)||(t=T.propFix[t]||t,o=T.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,n,r,o,i,a;return d(e)?this.each(function(t){T(this).addClass(e.call(this,t,jt(this)))}):(t=Ot(e)).length?this.each(function(){if(r=jt(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(i=0;i<t.length;i++)o=t[i],n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(e){var t,n,r,o,i,a;return d(e)?this.each(function(t){T(this).removeClass(e.call(this,t,jt(this)))}):arguments.length?(t=Ot(e)).length?this.each(function(){if(r=jt(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(i=0;i<t.length;i++)for(o=t[i];-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,r,o,i,a=typeof e,s="string"===a||Array.isArray(e);return d(e)?this.each(function(n){T(this).toggleClass(e.call(this,n,jt(this),t),t)}):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Ot(e),this.each(function(){if(s)for(i=T(this),o=0;o<n.length;o++)r=n[o],i.hasClass(r)?i.removeClass(r):i.addClass(r);else void 0!==e&&"boolean"!==a||((r=jt(this))&&oe.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":oe.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+Tt(jt(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;T.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=d(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,T(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=T.map(o,function(e){return null==e?"":e+""})),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=T.valHooks[o.type]||T.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(St,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:Tt(T.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?i+1:o.length;for(r=i<0?u:a?i:0;r<u;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!O(n.parentNode,"optgroup"))){if(t=T(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=T.makeArray(t),a=o.length;a--;)((r=o[a]).selected=-1<T.inArray(T.valHooks.option.get(r),i))&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<T.inArray(T(e).val(),t)}},h.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=e.location,Ct={guid:Date.now()},At=/\?/;T.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||T.error("Invalid XML: "+(r?T.map(r.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var It=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(t,n,r,o){var i,a,s,u,c,f,p,h,g=[r||v],m=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(a=h=s=r=r||v,3!==r.nodeType&&8!==r.nodeType&&!It.test(m+T.event.triggered)&&(-1<m.indexOf(".")&&(m=(b=m.split(".")).shift(),b.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[T.expando]?t:new T.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:T.makeArray(n,[t]),p=T.event.special[m]||{},o||!p.trigger||!1!==p.trigger.apply(r,n))){if(!o&&!p.noBubble&&!y(r)){for(u=p.delegateType||m,It.test(u+m)||(a=a.parentNode);a;a=a.parentNode)g.push(a),s=a;s===(r.ownerDocument||v)&&g.push(s.defaultView||s.parentWindow||e)}for(i=0;(a=g[i++])&&!t.isPropagationStopped();)h=a,t.type=1<i?u:p.bindType||m,(f=(oe.get(a,"events")||Object.create(null))[t.type]&&oe.get(a,"handle"))&&f.apply(a,n),(f=c&&a[c])&&f.apply&&ne(a)&&(t.result=f.apply(a,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),n)||!ne(r)||c&&d(r[m])&&!y(r)&&((s=r[c])&&(r[c]=null),T.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,kt),r[m](),t.isPropagationStopped()&&h.removeEventListener(m,kt),T.event.triggered=void 0,s&&(r[c]=s)),t.result}},simulate:function(e,t,n){var r=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(r,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}});var Mt=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function Rt(e,t,n,r){var o;if(Array.isArray(t))T.each(t,function(t,o){n||Mt.test(e)?r(e,o):Rt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==b(t))r(e,t);else for(o in t)Rt(e+"["+o+"]",t[o],n,r)}T.param=function(e,t){var n,r=[],o=function(e,t){var n=d(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){o(this.name,this.value)});else for(n in e)Rt(n,e[n],t,o);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Pt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!xe.test(e))}).map(function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var Lt=/%20/g,_t=/#.*$/,qt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,$t=/^\/\//,Wt={},Bt={},Ut="*/".concat("*"),zt=v.createElement("a");function Gt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(U)||[];if(d(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var o={},i=e===Bt;function a(s){var u;return o[s]=!0,T.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||i||o[c]?i?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Vt(e,t){var n,r,o=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&T.extend(!0,e,r),e}zt.href=Et.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,T.ajaxSettings),t):Vt(T.ajaxSettings,e)},ajaxPrefilter:Gt(Wt),ajaxTransport:Gt(Bt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,i,a,s,u,c,l,f,p,h=T.ajaxSetup({},n),d=h.context||h,y=h.context&&(d.nodeType||d.jquery)?T(d):T.event,g=T.Deferred(),m=T.Callbacks("once memory"),b=h.statusCode||{},w={},x={},j="canceled",O={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Ft.exec(i);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)O.always(e[O.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||j;return r&&r.abort(t),S(0,t),this}};if(g.promise(O),h.url=((t||h.url||Et.href)+"").replace($t,Et.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(U)||[""],null==h.crossDomain){u=v.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=zt.protocol+"//"+zt.host!=u.protocol+"//"+u.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=T.param(h.data,h.traditional)),Xt(Wt,h,n,O),c)return O;for(f in(l=T.event&&h.global)&&0==T.active++&&T.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ht.test(h.type),o=h.url.replace(_t,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Lt,"+")):(p=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(At.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(qt,"$1"),p=(At.test(o)?"&":"?")+"_="+Ct.guid+++p),h.url=o+p),h.ifModified&&(T.lastModified[o]&&O.setRequestHeader("If-Modified-Since",T.lastModified[o]),T.etag[o]&&O.setRequestHeader("If-None-Match",T.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&O.setRequestHeader("Content-Type",h.contentType),O.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ut+"; q=0.01":""):h.accepts["*"]),h.headers)O.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(d,O,h)||c))return O.abort();if(j="abort",m.add(h.complete),O.done(h.success),O.fail(h.error),r=Xt(Bt,h,n,O)){if(O.readyState=1,l&&y.trigger("ajaxSend",[O,h]),c)return O;h.async&&0<h.timeout&&(s=e.setTimeout(function(){O.abort("timeout")},h.timeout));try{c=!1,r.send(w,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,n,a,u){var f,p,v,w,x,j=n;c||(c=!0,s&&e.clearTimeout(s),r=void 0,i=u||"",O.readyState=0<t?4:0,f=200<=t&&t<300||304===t,a&&(w=function(e,t,n){for(var r,o,i,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==u[0]&&u.unshift(i),n[i]}(h,O,a)),!f&&-1<T.inArray("script",h.dataTypes)&&T.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),w=function(e,t,n,r){var o,i,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(a=c[u+" "+i]||c["* "+i]))for(o in c)if((s=o.split(" "))[1]===i&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(i=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(h,w,O,f),f?(h.ifModified&&((x=O.getResponseHeader("Last-Modified"))&&(T.lastModified[o]=x),(x=O.getResponseHeader("etag"))&&(T.etag[o]=x)),204===t||"HEAD"===h.type?j="nocontent":304===t?j="notmodified":(j=w.state,p=w.data,f=!(v=w.error))):(v=j,!t&&j||(j="error",t<0&&(t=0))),O.status=t,O.statusText=(n||j)+"",f?g.resolveWith(d,[p,j,O]):g.rejectWith(d,[O,j,v]),O.statusCode(b),b=void 0,l&&y.trigger(f?"ajaxSuccess":"ajaxError",[O,h,f?p:v]),m.fireWith(d,[O,j]),l&&(y.trigger("ajaxComplete",[O,h]),--T.active||T.event.trigger("ajaxStop")))}return O},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,t){T[t]=function(e,n,r,o){return d(n)&&(o=o||r,r=n,n=void 0),T.ajax(T.extend({url:e,type:t,dataType:o,data:n,success:r},T.isPlainObject(e)&&e))}}),T.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),T._evalUrl=function(e,t,n){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,n)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(d(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return d(e)?this.each(function(t){T(this).wrapInner(e.call(this,t))}):this.each(function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=d(e);return this.each(function(n){T(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Yt=T.ajaxSettings.xhr();h.cors=!!Yt&&"withCredentials"in Yt,h.ajax=Yt=!!Yt,T.ajaxTransport(function(t){var n,r;if(h.cors||Yt&&!t.crossDomain)return{send:function(o,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(o){if(n)throw o}},abort:function(){n&&n()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),v.head.appendChild(t[0])},abort:function(){n&&n()}}});var Zt,Qt=[],Kt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Qt.pop()||T.expando+"_"+Ct.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,a,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=d(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+o):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||T.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always(function(){void 0===i?T(e).removeProp(o):e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Qt.push(o)),a&&d(i)&&i(a[0]),a=i=void 0}),"script"}),h.createHTMLDocument=((Zt=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Zt.childNodes.length),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((r=(t=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,t.head.appendChild(r)):t=v),i=!n&&[],(o=_.exec(e))?[t.createElement(o[1])]:(o=Ae([e],t,i),i&&i.length&&T(i).remove(),T.merge([],o.childNodes)));var r,o,i},T.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),d(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<a.length&&T.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?T("<div>").append(T.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(e,t,n){var r,o,i,a,s,u,c=T.css(e,"position"),l=T(e),f={};"static"===c&&(e.style.position="relative"),s=l.offset(),i=T.css(e,"top"),u=T.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(i+u).indexOf("auto")?(a=(r=l.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(u)||0),d(t)&&(t=t.call(e,n,T.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):l.css(f)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===T.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),o.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-T.css(r,"marginTop",!0),left:t.left-o.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||pe})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;T.fn[e]=function(r){return Z(this,function(e,r,o){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),T.each(["top","left"],function(e,t){T.cssHooks[t]=Je(h.pixelPosition,function(e,n){if(n)return n=Ve(e,t),Be.test(n)?T(e).position()[t]+"px":n})}),T.each({Height:"height",Width:"width"},function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){T.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return Z(this,function(t,n,o){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?T.css(t,n,s):T.style(t,n,o,s)},t,a?o:void 0,a)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){T.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),d(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||T.guid++,i},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=O,T.isFunction=d,T.isWindow=y,T.camelCase=te,T.type=b,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T});var tn=e.jQuery,nn=e.$;return T.noConflict=function(t){return e.$===T&&(e.$=nn),t&&e.jQuery===T&&(e.jQuery=tn),T},void 0===t&&(e.jQuery=e.$=T),T}),function(e,t){var n,r=e.jQuery||e.Cowboy||(e.Cowboy={});r.throttle=n=function(e,n,o,i){var a,s=0;function u(){var r=this,u=+new Date-s,c=arguments;function l(){s=+new Date,o.apply(r,c)}i&&!a&&l(),a&&clearTimeout(a),i===t&&u>e?l():!0!==n&&(a=setTimeout(i?function(){a=t}:l,i===t?e-u:e))}return"boolean"!=typeof n&&(i=o,o=n,n=t),r.guid&&(u.guid=o.guid=o.guid||r.guid++),u},r.debounce=function(e,r,o){return o===t?n(e,r,!1):n(e,o,!1!==r)}}(this),!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},r=n[e]=n[e]||[];return-1==r.indexOf(t)&&r.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(t);return-1!=r&&n.splice(r,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var i=n[o];r&&r[i]&&(this.off(e,i),delete r[i]),i.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(n){return t(e,n)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t){for(var n in t)e[n]=t[n];return e}function r(e,t,o){if(!(this instanceof r))return new r(e,t,o);var i=e;return"string"==typeof e&&(i=document.querySelectorAll(e)),i?(this.elements=function(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?u.call(e):[e]}(i),this.options=n({},this.options),"function"==typeof t?o=t:n(this.options,t),o&&this.on("always",o),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void s.error("Bad element for imagesLoaded "+(i||e))}function o(e){this.img=e}function i(e,t){this.url=e,this.element=t,this.img=new Image}var a=e.jQuery,s=e.console,u=Array.prototype.slice;r.prototype=Object.create(t.prototype),r.prototype.options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var n=e.querySelectorAll("img"),r=0;r<n.length;r++){var o=n[r];this.addImage(o)}if("string"==typeof this.options.background){var i=e.querySelectorAll(this.options.background);for(r=0;r<i.length;r++){var a=i[r];this.addElementBackgroundImages(a)}}}};var c={1:!0,9:!0,11:!0};return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,r=n.exec(t.backgroundImage);null!==r;){var o=r&&r[2];o&&this.addBackground(o,e),r=n.exec(t.backgroundImage)}},r.prototype.addImage=function(e){var t=new o(e);this.images.push(t)},r.prototype.addBackground=function(e,t){var n=new i(e,t);this.images.push(n)},r.prototype.check=function(){function e(e,n,r){setTimeout(function(){t.progress(e,n,r)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},r.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+n,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},o.prototype=Object.create(t.prototype),o.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},i.prototype=Object.create(o.prototype),i.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},i.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},r.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((a=t).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(a(this))})},r.makeJQueryPlugin(),r});
/*! lz-string.min.js v1.5.0 | (c) 2023 Pieroxy | MIT license */
var LZString=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(n){return o(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach(function(t){a.push(e(t))}),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return o(n,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},u="",c="",l="",f=2,p=3,h=2,d=[],y=0,v=0;for(i=0;i<e.length;i+=1)if(u=e.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=p++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)y<<=1,v==t-1?(v=0,d.push(n(y)),y=0):v++;for(o=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1}else{for(o=1,r=0;r<h;r++)y=y<<1|o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete s[l]}else for(o=a[l],r=0;r<h;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1;0==--f&&(f=Math.pow(2,h),h++),a[c]=p++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)y<<=1,v==t-1?(v=0,d.push(n(y)),y=0):v++;for(o=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1}else{for(o=1,r=0;r<h;r++)y=y<<1|o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete s[l]}else for(o=a[l],r=0;r<h;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1;0==--f&&(f=Math.pow(2,h),h++)}for(o=2,r=0;r<h;r++)y=y<<1|1&o,v==t-1?(v=0,d.push(n(y)),y=0):v++,o>>=1;for(;;){if(y<<=1,v==t-1){d.push(n(y));break}v++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var o,i,a,s,u,c,l,f=[],p=4,h=4,d=3,y="",v=[],g={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=e(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=e(a);break;case 2:return""}for(f[3]=l,i=l,v.push(l);;){if(g.index>t)return"";for(a=0,u=Math.pow(2,d),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=e(a),l=h-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,d),d++),f[l])y=f[l];else{if(l!==h)return null;y=i+i.charAt(0)}v.push(y),f[h++]=i+y.charAt(0),i=y,0==--p&&(p=Math.pow(2,d),d++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString}),
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof exports?t():(t(),e.FileSaver={})}(this,function(){"use strict";function e(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function t(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(o,i,a){var s=r.URL||r.webkitURL,u=document.createElement("a");i=i||o.name||"download",u.download=i,u.rel="noopener","string"==typeof o?(u.href=o,u.origin===location.origin?n(u):t(u.href)?e(o,i,a):n(u,u.target="_blank")):(u.href=s.createObjectURL(o),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){n(u)},0))}:"msSaveOrOpenBlob"in navigator?function(r,o,i){if(o=o||r.name||"download","string"!=typeof r)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(r,i),o);else if(t(r))e(r,o,i);else{var a=document.createElement("a");a.href=r,a.target="_blank",setTimeout(function(){n(a)})}}:function(t,n,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var s="application/octet-stream"===t.type,u=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||o)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(t)}else{var f=r.URL||r.webkitURL,p=f.createObjectURL(t);a?a.location=p:location.href=p,a=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});r.saveAs=i.saveAs=i,"undefined"!=typeof module&&(module.exports=i)}),function(e,t,n){var r,o=256,i="random",a=n.pow(o,6),s=n.pow(2,52),u=2*s,c=255;function l(c,l,y){function v(){for(var e=b.g(6),t=a,n=0;e<s;)e=(e+n)*o,t*=o,n=b.g(1);for(;u<=e;)e/=2,t/=2,n>>>=1;return(e+n)/t}var g=[],m=h(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[c,d(t)]:null==c?function(){try{var n;return r&&(n=r.randomBytes)?n=n(o):(n=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(n)),d(n)}catch(n){var i=e.navigator,a=i&&i.plugins;return[+new Date,e,a,e.screen,d(t)]}}():c,3),g),b=new f(g);return v.int32=function(){return 0|b.g(4)},v.quick=function(){return b.g(4)/4294967296},v.double=v,h(d(b.S),t),(l.pass||y||function(e,t,r,o){return o&&(o.S&&p(o,b),e.state=function(){return p(b,{})}),r?(n[i]=e,t):e})(v,m,"global"in l?l.global:this==n,l.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=c&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=c&i+1],n=n*o+s[c&(s[i]=s[a=c&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){for(var n,r=e+"",o=0;o<r.length;)t[c&o]=c&(n^=19*t[c&o])+r.charCodeAt(o++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}if(h(n.random(),t),"object"==typeof module&&module.exports){module.exports=l;try{r=require("crypto")}catch(l){}}else"function"==typeof define&&define.amd?define(function(){return l}):n["seed"+i]=l}("undefined"!=typeof self?self:this,[],Math),function(){for(var e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],t=e.length,n=function(){},r=window.console=window.console||{};t--;){var o=e[t];r[o]||(r[o]=n)}}()}else document.documentElement.setAttribute("data-init","lacking")</script><style id=style-normalize>/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */
html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-family:sans-serif}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{vertical-align:baseline;display:inline-block}audio:not([controls]){height:0;display:none}[hidden],template{display:none}a{background-color:#0000}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0;font-size:2em}mark{color:#000;background:#ff0}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style><style id=style-init-screen>@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{z-index:500000;color:#eee;text-align:center;background-color:#111;width:100%;height:100%;font:700 28px/1 Helmet,Freesans,sans-serif;display:none;position:fixed;top:0;left:0}#init-screen>div{max-width:1136px;margin:0 auto;display:none;position:relative;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{padding:0 1em;display:block}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{border:12px solid #7f7f7f;border-color:#7f7f7f #0000;border-radius:50%;width:100px;height:100px;-webkit-animation:2s linear infinite init-loading-spin;-o-animation:2s linear infinite init-loading-spin;animation:2s linear infinite init-loading-spin;display:block}html[data-init=loading] #init-loading>div{text-indent:16128px;white-space:nowrap;overflow:hidden}html[data-init=loading] #story,html[data-init=loading] #ui-bar{display:none!important}</style><style id=style-font-icons>@font-face{font-family:sc-icons;font-display:block;src:url(data:application/octet-stream;base64,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)format("woff")}</style><style id=style-font-emoji>@font-face{font-family:color-emoji;src:local(Twemoji Mozilla),local(Apple Color Emoji),local(Segoe UI Emoji),local(Segoe UI Symbol),local(Noto Color Emoji),local(EmojiOne Color),local(Android Emoji)}</style><style id=style-core>#store-area,tw-storydata{z-index:0;display:none!important}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-corner,::-webkit-scrollbar-track{background-color:#111}::-webkit-scrollbar-thumb{background-color:#333;border:1px solid #111}*{scrollbar-color:#333 #111;scrollbar-width:thin}:-webkit-full-screen{width:100%;height:100%}:fullscreen{width:100%;height:100%}:fullscreen{width:100%;height:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}html{font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Cantarell,Ubuntu,Helvetica Neue,Helvetica,Arial,sans-serif,color-emoji;font-size:16px;line-height:1}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;-o-transition-duration:.2s;text-decoration:none;-webkit-transition-duration:.2s;transition-duration:.2s}a:hover,html[data-outlines] a:focus{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover,html[data-outlines] a.link-broken:focus{color:#e44}a[disabled],span.link-disabled{color:#aaa;text-decoration:none;cursor:not-allowed!important}a.link-internal{-webkit-touch-callout:none}area{cursor:pointer}button{cursor:pointer;color:#eee;-o-transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#35a;border:1px solid #57c;padding:.4em;line-height:normal;-webkit-transition-duration:.2s;transition-duration:.2s}button:hover,html[data-outlines] button:focus{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}code,kbd,pre,samp,var{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Lucida Console,Courier New,Courier,monospace}pre{overflow:auto}input,select,textarea{color:#eee;background-color:#0000;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{resize:vertical;min-width:30em}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{cursor:pointer;background:#222;border:1px solid #444;border-radius:0;width:100%;height:10px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;cursor:pointer;background:#35a;border:1px solid #57c;border-radius:0;width:33px;height:18px;margin-top:-5px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{cursor:pointer;background:#222;border:1px solid #444;border-radius:0;width:100%;height:10px}input[type=range]::-moz-range-thumb{cursor:pointer;background:#35a;border:1px solid #57c;border-radius:0;width:33px;height:18px}input[type=range]::-ms-track{color:#0000;cursor:pointer;background:0 0;border-color:#0000;width:calc(100% - 1px);height:10px}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{cursor:pointer;background:#35a;border:1px solid #57c;border-radius:0;width:33px;height:16px}html[data-outlines] input:focus,html[data-outlines] select:focus,html[data-outlines] textarea:focus,input:hover,select:hover,textarea:hover{background-color:#333;border-color:#eee}input:disabled,select:disabled,textarea:disabled{color:#333;background-color:#0000;border-color:#111}hr{border:none;border-top:1px solid #eee;height:1px;margin:1em 0;padding:0;display:block}audio,canvas,progress,video{vertical-align:middle;max-width:100%}.no-transition{-o-transition:none!important;-webkit-transition:none!important;transition:none!important}.error-view{background-color:#511;border-left:.5em solid #c22;max-width:100%;margin:.1em;padding:0 .25em;display:inline-block;position:relative}.error-view>.error-toggle{line-height:inherit;background-color:#0000;border:none;width:1.75em;padding:0;position:absolute;top:0;left:0}.error-view>.error-toggle:hover,html[data-outlines] .error-view>.error-toggle:focus{background-color:#0000}.error-view>.error{margin-left:.25em;display:inline-block}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:#0003;margin:0 0 .25em;padding:.25em;display:block;overflow-x:auto}.highlight,.marked{color:#ff0;font-style:italic;font-weight:700}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:sc-icons!important}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before);margin-right:.35em}[data-icon-after]:after{content:attr(data-icon-after);margin-left:.35em}.error-view>.error-toggle:before{content:""}.error-view>.error-toggle.enabled:before{content:""}.error-view>.error:before{content:"";margin-right:.35em}a.link-external:after{content:"";margin-left:.25em}</style><style id=style-core-display>#story{z-index:10;margin:2.5em}@media screen and (width<=1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style><style id=style-core-passage>.passage{text-align:left;-o-transition:opacity .4s ease-in;line-height:1.75;-webkit-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{border-collapse:collapse;margin:1em 0;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-o-transition:opacity 0s;-webkit-transition:opacity;transition:opacity}}</style><style id=style-core-macro>@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-o-transition:opacity .4s ease-in;-webkit-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{content:"▐";opacity:1;-webkit-animation:1s infinite cursor-blink;-o-animation:1s infinite cursor-blink;animation:1s infinite cursor-blink}</style><style id=style-ui-dialog>html[data-dialog] body{overflow:hidden}#ui-overlay{opacity:0;-o-transition:visibility .2s step-end,opacity .2s ease-in;visibility:hidden;z-index:100000;background-color:#000;width:200%;height:200%;-webkit-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in;position:fixed;top:-50%;left:-50%}#ui-overlay.open{opacity:.8;-o-transition:visibility 0s;visibility:visible;-webkit-transition:visibility;transition:visibility}#ui-dialog{opacity:0;z-index:100100;max-width:66em;margin:0;padding:0;display:none;position:fixed;top:50px}#ui-dialog.open{opacity:1;-o-transition:opacity .2s ease-in;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;display:block}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{background-color:#444;min-height:24px;position:relative}#ui-dialog-title{text-align:center;text-transform:uppercase;margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em}#ui-dialog-close{cursor:pointer;-o-transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#0000;border:1px solid #0000;width:3.6em;height:92%;margin:0;padding:0;font-size:120%;font-style:normal;font-weight:400;line-height:1;-webkit-transition-duration:.2s;transition-duration:.2s;display:block;position:absolute;top:0;right:0;font-family:sc-icons!important}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{text-align:left;background-color:#111;border:1px solid #444;min-width:300px;height:calc(100% - 2.1em);padding:1em;line-height:1.5;overflow:auto}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{margin:0;padding:.4em .4em 0 0;display:inline-block}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}@media (prefers-reduced-motion:reduce){#ui-overlay,#ui-overlay.open,#ui-dialog.open{-o-transition:opacity 0s;-webkit-transition:opacity;transition:opacity}}</style><style id=style-ui-dialog-saves>#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves>h2{font-size:inherit;background-color:#222;margin:0;padding:.1em 0 .1em .4em}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em}#ui-dialog-body.saves td:first-child{display:none!important}#ui-dialog-body.saves td:nth-child(3){width:100%;line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .details{margin-left:.25em;font-size:75%}#ui-dialog-body.saves #saves-list button{color:#eee;background-color:#0000;border:1px solid #444;width:2.237em;height:2.237em}#ui-dialog-body.saves #saves-list button:disabled{color:#444;border-color:#444}#ui-dialog-body.saves #saves-list button:not(:disabled):hover{background-color:#222;border-color:#ddd}#ui-dialog-body.saves #saves-list button.delete:not(:disabled),#ui-dialog-body.saves button[id=saves-clear]:not(:disabled){background-color:#911;border-color:#b33}#ui-dialog-body.saves #saves-list button.delete:not(:disabled):hover,#ui-dialog-body.saves button[id=saves-clear]:not(:disabled):hover{background-color:#b33;border-color:#d55}#ui-dialog-body.saves #saves-list button.load:not(:disabled){background-color:#161;border-color:#383}#ui-dialog-body.saves #saves-list button.load:not(:disabled):hover{background-color:#383;border-color:#5a5}#ui-dialog-body.saves .buttons li{padding:.4em}#ui-dialog-body.saves .buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves .buttons.slots>li:last-child{float:right}#ui-dialog-body.saves #saves-list button:before,#ui-dialog-body.saves .buttons button:before{font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:sc-icons!important}#ui-dialog-body.saves .buttons button:before{margin-right:.35em}#ui-dialog-body.saves button.delete:before{content:""}#ui-dialog-body.saves button.delete:disabled:before{content:""}#ui-dialog-body.saves button.load:before{content:""}#ui-dialog-body.saves button.save:before{content:""}#ui-dialog-body.saves button[id=saves-export]:before{content:""}#ui-dialog-body.saves button[id=saves-import]:before{content:""}#ui-dialog-body.saves button[id=saves-clear]:before{content:""}#ui-dialog-body.saves button[id=saves-clear]:disabled:before{content:""}#ui-dialog-body.saves button[id=saves-disk-save]:before{content:""}#ui-dialog-body.saves button[id=saves-disk-load]:before{content:""}</style><style id=style-ui-dialog-settings>#ui-dialog-body.settings [id|=setting-body]>div:first-child{width:100%;display:table}#ui-dialog-body.settings [id|=setting-label]{padding:.4em 2em .4em 0;display:table-cell}#ui-dialog-body.settings [id|=setting-label]+div{text-align:right;vertical-align:middle;white-space:nowrap;min-width:8em;display:table-cell}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{margin:0 0 0 .5em;font-size:87.5%}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:#0000;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-left:.35em;font-style:normal;font-weight:400;line-height:1;font-family:sc-icons!important}#ui-dialog-body.settings button[id|=setting-control]:after{content:""}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:""}</style><style id=style-ui-dialog-legacy>#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{border:1px solid #0000;margin:0;padding:0;list-style:none}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{color:#eee;border:1px solid #0000;padding:.25em .75em;text-decoration:none;display:block}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.list a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style><style id=style-ui-bar>#story{-o-transition:margin-left .2s ease-in;margin-left:20em;-webkit-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (width<=1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (width<=768px){#story{margin-left:3.5em}}#ui-bar{text-align:center;-o-transition:left .2s ease-in;z-index:50;background-color:#222;border-right:1px solid #444;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;transition:left .2s ease-in;position:fixed;top:0;left:0}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em;line-height:1.5;overflow:auto}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-o-transition:visibility .2s step-end;-webkit-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-tray button{color:#eee;background-color:#0000;border:1px solid #444}#ui-bar-tray button:hover{background-color:#444;border-color:#eee}#ui-bar-tray button:disabled{color:#444;background-color:#0000;border-color:#444}button#ui-bar-toggle{border-right:none;position:absolute;top:0;right:0}#ui-bar-history{margin:0 auto}#ui-bar-history button:not(:first-child){margin-left:1.2em}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{border:1px solid #444;margin:1em 0 0;padding:0;list-style:none}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{color:#eee;text-transform:uppercase;border:1px solid #0000;padding:.25em .75em;display:block}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-tray button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-tray button:before{font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:sc-icons!important}#ui-bar-tray button:before{width:1em;font-size:1.1em;display:block}#ui-bar-toggle:before{content:""}#ui-bar.stowed #ui-bar-toggle:before{content:""}#ui-bar-tray #history-backward:before{content:""}#ui-bar-tray #history-jumpto:before{content:""}#ui-bar-tray #history-forward:before{content:""}#menu-item-continue a:before,#menu-item-restart a:before,#menu-item-saves a:before,#menu-item-settings a:before,#menu-item-share a:before{margin-right:.35em}#menu-item-continue a:before{content:""}#menu-item-saves a:before{content:""}#menu-item-settings a:before{content:""}#menu-item-restart a:before{content:""}#menu-item-share a:before{content:""}@media (prefers-reduced-motion:reduce){#story{-o-transition:margin-left 0s;-webkit-transition:margin-left;transition:margin-left}#ui-bar{-o-transition:left 0s;-webkit-transition:left;transition:left}}</style><style id=style-ui-debug-bar>#debug-bar{z-index:99900;background-color:#222;border-top:1px solid #444;border-left:1px solid #444;min-width:300px;max-width:66em;max-height:95%;margin:0;padding:.5em;position:fixed;bottom:0;right:0}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{width:14em;min-width:8em}#debug-bar>div>select{width:22em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;width:2em;height:calc(100% + 1px);position:absolute;top:-1px;left:calc(-2em - 1px)}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{opacity:.33;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;font-size:4.5em;position:fixed;bottom:.75em;right:.6em}#debug-bar-watch{z-index:99800;background-color:#222;border-top:1px solid #444;border-left:1px solid #444;max-height:calc(95vh - 100%);font-size:.9em;position:absolute;bottom:calc(100% + 1px);left:-1px;right:0;overflow:hidden scroll}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;text-align:center;margin:1em auto;font-style:italic}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:#7f7f7f26}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{color:#c00;background-color:#0000;border:none}#debug-bar-watch-all,#debug-bar-watch-clear{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:#0000;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-passage-play:before,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-clear:before,#debug-bar-watch-toggle:after{font-variant:normal;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:sc-icons!important}#debug-bar-toggle:before{content:""}#debug-bar-hint:after{content:" "}#debug-bar-watch .watch-delete:before{content:""}#debug-bar-watch-add:before{content:""}#debug-bar-watch-all:before{content:""}#debug-bar-watch-clear:before{content:""}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"";margin-left:.35em}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:""}#debug-bar-passage-play:before{content:""}</style><style id=style-ui-debug-views>html[data-debug-view] .debug{background-color:#234;padding:.25em}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{vertical-align:middle;display:inline-block}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{white-space:pre;background-color:#00000040;font-family:monospace}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name)">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name)">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name)">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name)">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style><div id=init-screen><div id=init-no-js><noscript>JavaScript must be enabled to play.</noscript></div><div id=init-lacking><p>Browser lacks capabilities required to play.<p>Upgrade or switch to another browser.</div><div id=init-loading><div>Loading&hellip;</div></div></div><tw-storydata name=index startnode=29 creator=Twine creator-version=2.10.0 format=SugarCube format-version=2.37.3 ifid=B3B21878-5DE6-4F62-B5E7-C09E21CF0F73 options="" tags="" zoom=1 hidden><style role=stylesheet id=twine-user-stylesheet type=text/twine-css>@import url("./index.css")</style><script role=script id=twine-user-script type=text/twine-javascript>window.ready = false;

function getAllMethods(object) {
    return Object.getOwnPropertyNames(object).filter(function(property) {
        return typeof object[property] == 'function';
    });
}

window.runFunction = function(name, args = []) {
	if (name == null) {
    	return;
    }
  
  	if (getAllMethods(window).includes(name)) {
      	if (!window.ready) {
        	setTimeout(
              function() {window.runFunction(name,args)}, 
            200);1
        }
      
    	var argString = "";
      	
      	for (var i = 0;i<args.length; i++) {
        	argString += args[i];
          
			if (args[i+1] != undefined) {
            	argString = argString + ",";
            }
    	}

    	eval("window." + name + "(" + argString + ")");
    } else {
      	console.log(name + " does not exist");
    	setTimeout(
            function() {window.runFunction(name,args)}, 
        200);
    }
}


window.display_thumbnail = function() {};
//window.conversationStart = function() {};
window.updateObjective = function(data) {
	setTimeout(function() {
    	window.updateObjective(data);
    }, 200);
};

/* Execute the handler function exactly once, since it's only fired once. */
$(document).one(':storyready', function (ev) {
 	setTimeout(function() {
      	window.Engine = Engine;
      	window.restart = function() {
        	localStorage.clear();
          	window.Engine.restart();
        }
        
  		var myScript = document.createElement("script");
      	myScript.setAttribute("type", "module");
	    myScript.setAttribute("src", "./index.js");
      	document.body.appendChild(myScript);
     
      	var myNotifyScript = document.createElement("script");
	    myNotifyScript.setAttribute("src", "./simple-notify.min.js");
      	document.head.appendChild(myNotifyScript);
      
      	//window.runFunction("conversationStart", false);
      	window.ready = true;
    }, 20);
});

window.testConversationStart = function (ev) {
	if (typeof window.conversationStart != "function") {
    	setTimeout(function() {
        	testConversationStart(ev);
        }, 500);
    } else {
    	window.conversationStart(ev);
    }
};

$(document).on(':passagestart', function(ev) {
  	window.testConversationStart(ev);
});</script><tw-passagedata pid=1 name="End conversation" tags="" position=400,400 size=100,100>&lt;&lt;if $questStage is 1&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Find out when the school ship disappeared&quot;);&gt;&gt;\ &lt;&lt;elseif $questStage is 2&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Find the Sailor&quot;);&gt;&gt;\ &lt;&lt;elseif $questStage is 3&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Return to H.N. Andersen&quot;);&gt;&gt;\ &lt;&lt;elseif $questStage is 4&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Find out which of the EAC&#39;s ships is the most known one&quot;);&gt;&gt;\ &lt;&lt;elseif $questStage is 5&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Tell H.N. Andersen about the Jutlandia&quot;);&gt;&gt;\ &lt;&lt;elseif $questStage is 6&gt;&gt;\ &lt;&lt;run window.updateObjective(&quot;Figure out what caused the collapse of EAC&quot;);&gt;&gt;\ \&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid=2 name=Sailor tags="" position=400,600 size=100,100>&lt;&lt;if $questStage is 2&gt;&gt;\ What do you want? [[What happened to the EAC after the school ship Copenhagen disappeared?]] &lt;&lt;elseif $questStage is 4&gt;&gt;\ What now? [[What&#39;s the best ship in the history of the EAC?]] &lt;&lt;else&gt;&gt;\ Scram buddy [[End conversation]] \&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid=3 name=HNAndersen tags="" position=400,200 size=100,100>&lt;&lt;if $questStage is 1&gt;&gt;\ Have you found out what happened with the school ship? [[the school ship disappeared]] [[End conversation]] &lt;&lt;elseif $questStage is 2&gt;&gt;\ The sailor is by the ships, you should probably talk to him [[End conversation]] &lt;&lt;elseif $questStage is 3&gt;&gt;\ Did you talk to the Sailor about what came after the school ship? [[So during the second world war-]] &lt;&lt;elseif $questStage is 4&gt;&gt; You should go ask the sailor about the biggest ship we&#39;ve made. [[End conversation]] &lt;&lt;elseif $questStage is 5&gt;&gt;\ So what have we done since I... died [[EAC created a great ship called the Jutlandia]] &lt;&lt;elseif $questStage is 6&gt;&gt;\ So, this is The EAC Foundation house? All this text on the wall is our history [[Yeah, it is]] &lt;&lt;else&gt;&gt;\ Hey you! yes I am talking to you, can you help me? [[Sure, what&#39;s up?]] \&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid=4 name="Sure, what&#39;s up?" tags="" position=550,200 size=100,100>I don&#39;t know where I am, the last thing I remember is the school ship [[...]]</tw-passagedata><tw-passagedata pid=5 name=... tags="" position=550,225 size=100,100>I... don&#39;t know how many years it&#39;s been. Can you find out? &lt;&lt;set $questStage to 1&gt;&gt; [[End conversation]]</tw-passagedata><tw-passagedata pid=6 name=1945 tags="" position=125,25 size=100,100>That feels a bit too late [[It sank in...]]</tw-passagedata><tw-passagedata pid=7 name="It sank in..." tags="" position=75,50 size=100,100>What year was it? [[1900]] [[1969]] [[1928]] [[1945]]</tw-passagedata><tw-passagedata pid=8 name=1969 tags="" position=75,25 size=100,100>That&#39;s a bit out of this world [[It sank in...]]</tw-passagedata><tw-passagedata pid=9 name=1928 tags="" position=25,50 size=100,100>So long ago?! I must know more, what happened to the foundation? [[Relax...]]</tw-passagedata><tw-passagedata pid=10 name=1900 tags="" position=100,25 size=100,100>I don&#39;t think that&#39;s right [[It sank in...]]</tw-passagedata><tw-passagedata pid=11 name=Relax... tags="" position=25,75 size=100,100>Okay, okay... Could you maybe talk to the sailor? You can probably find him by the ships &lt;&lt;set $questStage to 2&gt;&gt; [[End conversation]]</tw-passagedata><tw-passagedata pid=12 name="the school ship disappeared" tags="" position=175,50 size=100,100>Oh yeah, I remember. When did it disappear? [[1900]] [[1969]] [[1928]] [[1945]]</tw-passagedata><tw-passagedata pid=13 name="What happened to the EAC after the school ship Copenhagen disappeared?" tags="" position=550,600 size=100,100>What happened? The second world war was what happened. I was working hard between 1939-1945 &lt;&lt;set $questStage to 3&gt;&gt; [[End conversation]]</tw-passagedata><tw-passagedata pid=14 name="So during the second world war-" tags="" position=700,25 size=100,100>The second what now? Do you mean the great war wasn&#39;t the last one? [[Sadly not...]]</tw-passagedata><tw-passagedata pid=15 name="Sadly not..." tags="" position=725,25 size=100,100>What did we do during the second world war then? [[Denmark fell under occupation from Germany and the EAC made all their ships leave to assist the other side]]</tw-passagedata><tw-passagedata pid=16 name="Denmark fell under occupation from Germany and the EAC made all their ships leave to assist the other side" tags="" position=750,25 size=100,100>So we helped our allies, even when Denmark was under occupation? So how long did the second world war last? [[It never ended]] [[6 years]] [[20 years]] [[a week]]</tw-passagedata><tw-passagedata pid=17 name="It never ended" tags="" position=700,150 size=100,100>It seems to, just looking out the window. [[Oh right, it ended...]]</tw-passagedata><tw-passagedata pid=18 name="20 years" tags="" position=775,150 size=100,100>I feel like that&#39;s a bit too long [[Oh right, it ended...]]</tw-passagedata><tw-passagedata pid=19 name="a week" tags="" position=700,175 size=100,100>That seems a bit short [[Oh right, it ended...]]</tw-passagedata><tw-passagedata pid=20 name="6 years" tags="" position=900,150 size=100,100>This is a big moment for the foundation! But we must have done something more... [[Like?]]</tw-passagedata><tw-passagedata pid=21 name="Oh right, it ended..." tags="" position=900,25 size=100,100>So how long did the second world war last? [[It never ended]] [[6 years]] [[20 years]] [[a week]]</tw-passagedata><tw-passagedata pid=22 name=Like? tags="" position=1050,200 size=100,100>I don&#39;t know, Something spectacular that went down in history. Could you go find out what the best ship we ever created is? you could ask the sailor &lt;&lt;set $questStage to 4&gt;&gt; [[End conversation]]</tw-passagedata><tw-passagedata pid=23 name="What&#39;s the best ship in the history of the EAC?" tags="" position=250,600 size=100,100>That&#39;s a vague question, I think the most &quot;objective&quot; one would be the Jutlandia. [[What was up with the Jutlandia?]]</tw-passagedata><tw-passagedata pid=24 name="What was up with the Jutlandia?" tags="" position=250,750 size=100,100>Jutlandia stayed in dry dock during world war 2 and served as a medical ship during the korean war [[Thanks!]]</tw-passagedata><tw-passagedata pid=25 name=Thanks! tags="" position=400,750 size=100,100>Yeah, yeah, screw off &lt;&lt;set $questStage to 5&gt;&gt; [[End conversation]]</tw-passagedata><tw-passagedata pid=26 name="EAC created a great ship called the Jutlandia" tags="" position=550,50 size=100,100>Oh that&#39;s good, what did it do? [[The Jutlandia helped people during a war in Korea as a medical ship, it also stayed in dock during world war 2]]</tw-passagedata><tw-passagedata pid=27 name="The Jutlandia helped people during a war in Korea as a medical ship, it also stayed in dock during world war 2" tags="" position=700,300 size=100,100>That&#39;s great! So how is the EAC foundation today? [[It&#39;s going great, we&#39;re actually standing in the EAC foundation house right now]]</tw-passagedata><tw-passagedata pid=28 name="It&#39;s going great, we&#39;re actually standing in the EAC foundation house right now" tags="" position=700,325 size=100,100>So the EAC foundation house? [[Yes]]</tw-passagedata><tw-passagedata pid=29 name=Start tags="" position=400,100 size=100,100>&lt;&lt;if $questStage is 1&gt;&gt; &lt;&lt;goto End Conversation&gt;&gt; &lt;&lt;else&gt;&gt; &lt;&lt;goto HNAndersen&gt;&gt; &lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid=30 name="End Game" tags="" position=700,500 size=100,100>Thanks for playing! would you like to play again or exit? [[I would like to exit]] [[I want to play again]]</tw-passagedata><tw-passagedata pid=31 name="I would like to exit" tags="" position=700,625 size=100,100>&lt;&lt;if localStorage.getItem(&quot;leftGame&quot;) neq &quot;true&quot;&gt;&gt; &lt;&lt;run localStorage.setItem(&quot;leftGame&quot;, true)&gt;&gt; &lt;&lt;run window.location.href = &quot;https://asia-house.dk/&quot;;&gt;&gt; &lt;&lt;else&gt;&gt; &lt;&lt;run window.runFunction(&quot;restart&quot;);&gt;&gt; &lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid=32 name="I want to play again" tags="" position=825,625 size=100,100>&lt;&lt;run window.restart();&gt;&gt;</tw-passagedata><tw-passagedata pid=33 name="Yeah, it is" tags="" position=200,300 size=100,100>Thank you for letting my thoughts go to rest. I myself will go rest now that I can do so, with a good conscience. [[End Game]]</tw-passagedata><tw-passagedata pid=34 name=Yes tags="" position=700,350 size=100,100>All this text on the wall is our history? [[Right again]]</tw-passagedata><tw-passagedata pid=35 name="Right again" tags="" position=700,375 size=100,100>Thank you for letting my thoughts go to rest, I myself will rest now that I can do so, with a good conscience. [[End Game]]</tw-passagedata></tw-storydata><script id=script-sugarcube>/*! SugarCube JS */
"loading"===document.documentElement.getAttribute("data-init")&&function(window,document,jQuery,undefined){"use strict";var _excluded=["bubbles","cancelable","composed","detail"],_excluded2=["bubbles","cancelable"],_excluded3=["state"];function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function e(e,t,r,n){var a="Error",i="A".concat(r?" fatal":"n"," error has occurred.");i+=r?" Aborting.":" You may be able to continue, but some parts may not work properly.";var o=null!==t&&"object"===_typeof(t),s=(o&&"message"in t?String(t.message).replace(errorPrologRegExp,""):String(t)).trim()||"unknown error";null!=e&&(a+=" [".concat(e,"]")),a+=": ".concat(s,"."),o&&"stack"in t&&(a+="\n\nStack Trace:\n".concat(t.stack)),a&&(i+="\n\n".concat(a)),n||console[r?"error":"warn"](a),window.alert(i)}var t;return t=window.onerror,window.onerror=function(r,n,a,i,o){"complete"===document.readyState?e(null,null!=o?o:r,!1,!0):(e(null,null!=o?o:r,!0,!0),window.onerror=t,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.preventExtensions(Object.create(null,{error:{value:function(t,r){e(t,r)}},fatal:{value:function(t,r){e(t,r,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach(function(e,t){wsRe.test(t)||(missing+=e)}),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),url="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+",externalUrl=url.replace(/\|javascript|\|data/g,""),Object.freeze(Object.assign(Object.create(null),{space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:url,externalUrl:externalUrl}))),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss,url,externalUrl;!function(){var e,t,r=(e=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),t=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(r,n){var a=String(r);if(!a)return a;switch(n){case"start":return e.test(a)?a.replace(e,""):a;case"end":return t.test(a)?a.replace(t,""):a;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(n,'"'))}});function n(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n=void 0===t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}if(Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function e(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var t=0===arguments.length?1:Number(arguments[0])||0;if(t<1)return Array.prototype.slice.call(this);var r=Array.prototype.push;return Array.prototype.reduce.call(this,function(n,a){return a instanceof Array?r.apply(n,e.call(a,t-1)):n.push(a),n},[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(n===t||n!=n&&t!=t)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(e){if("object"!==_typeof(e)||null===e)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(e).map(function(t){return[t,e[t]]})}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(e){return Array.from(e).reduce(function(e,t){if(Object(t)!==t)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return t[0]in e?Object.defineProperty(e,t[0],{configurable:!0,enumerable:!0,writable:!0,value:t[1]}):e[t[0]]=t[1],e},{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var t=Object(e);return Reflect.ownKeys(t).reduce(function(e,r){var n=Object.getOwnPropertyDescriptor(t,r);return void 0!==n&&(r in e?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[r]=n),e},{})}}),!Object.hasOwn){var a=Object.prototype.hasOwnProperty;Object.defineProperty(Object,"hasOwn",{configurable:!0,writable:!0,value:function(e,t){return a.call(Object(e),t)}})}Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(e){if("object"!==_typeof(e)||null===e)throw new TypeError("Object.values object parameter must be an object");return Object.keys(e).map(function(t){return e[t]})}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var r=String(this),a=r.length,i=Number.parseInt(e,10);return i<=a?r:n(i-a,t)+r}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var r=String(this),a=r.length,i=Number.parseInt(e,10);return i<=a?r:r+n(i-a,t)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return r(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return r(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return r(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return r(this,"end")}})}(),function(){var e,t,r,n,a=Math.random;function i(){var e,t;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:e=0,t=arguments[0];break;default:e=arguments[0],t=arguments[1]}if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(a()*(t-e+1))+e}function o(e,t){var r,n;switch(t.length){case 1:r=0,n=e-1;break;case 2:r=0,n=Math.trunc(t[1]);break;default:r=Math.trunc(t[1]),n=Math.trunc(t[2])}return Number.isNaN(r)?r=0:!Number.isFinite(r)||r>=e?r=e-1:r<0&&(r=e+r)<0&&(r=0),Number.isNaN(n)?n=0:(!Number.isFinite(n)||n>=e||n<0&&(n=e+n)<0)&&(n=e-1),i(r,n)}function s(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var e=Array.from(this);if(0===arguments.length)return e;var t=Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[]),r=t.length;if(0===r)return e;for(var n=Array.prototype.indexOf,a=Array.prototype.push,i=0;i<r;++i){var o=t[i];-1===n.call(e,o)&&a.call(e,o)}return e}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;-1!==(r=e.call(this,t,r));)++n,++r;return n}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof e)throw new Error("Array.prototype.countWith predicate parameter must be a function");var r=this.length>>>0;if(0===r)return 0;for(var n=0,a=0;a<r;++a)e.call(t,this[a],a,this)&&++n;return n}}),Object.defineProperty(Array.prototype,"deleteAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAll called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.concat.apply([],arguments),r=t.length,n=[],a=0;a<e;++a)for(var i=this[a],o=0;o<r;++o){var s=t[o];if(i===s||i!=i&&s!=s){n.push(a);break}}for(var u=[],c=0,l=n.length;c<l;++c)u[c]=this[n[c]];for(var d=Array.prototype.splice,p=n.length-1;p>=0;--p)d.call(this,n[p],1);return u}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=Array.from(new Set(Array.from(arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values()),n=Array.from(r).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"deleteFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteFirst called on null or undefined");if(0!==arguments.length){var e=this.length>>>0;if(0!==e){for(var t=Array.prototype.splice,r=Array.prototype.concat.apply([],arguments),n=[],a=0;a<e&&r.length>0;++a)for(var i=this[a],o=0;o<r.length;++o){var s=r[o];if(i===s||i!=i&&s!=s){n.push(i),t.call(this,a--,1),r.splice(o--,1);break}}return n}}}}),Object.defineProperty(Array.prototype,"deleteLast",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteLast called on null or undefined");if(0!==arguments.length){var e=this.length>>>0;if(0!==e){for(var t=Array.prototype.splice,r=Array.prototype.concat.apply([],arguments),n=[],a=e-1;a>=0&&r.length>0;--a)for(var i=this[a],o=0;o<r.length;++o){var s=r[o];if(i===s||i!=i&&s!=s){n.push(i),t.call(this,a++,1),r.splice(o--,1);break}}return n}}}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof e)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var r=this.length>>>0;if(0===r)return[];for(var n=Array.prototype.splice,a=[],i=[],o=0;o<r;++o)e.call(t,this[o],o,this)&&(i.push(this[o]),a.push(o));for(var s=a.length-1;s>=0;--s)n.call(this,a[s],1);return i}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!=this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!=e&&this.val!=this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!=e&&this.val!=this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var e=this.length>>>0;if(0!==e)return this[e-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var e=this.length>>>0;if(0!==e){var t=0===arguments.length?i(0,e-1):o(e,Array.from(arguments));return Array.prototype.splice.call(this,t,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=Array.prototype.splice,a=[],o=t-1;do{a.push(n.call(this,i(0,o--),1)[0])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var e=this.length>>>0;if(0!==e)return this[0===arguments.length?i(0,e-1):o(e,Array.from(arguments))]}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=new Map,a=[],o=t-1;do{var s=void 0;do{s=i(0,o)}while(n.has(s));n.set(s,!0),a.push(this[s])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0===e)return this;for(var t=e-1;t>0;--t){var r=Math.floor(a()*(t+1));if(t!==r){var n=this[t];this[t]=this[r],this[r]=n}}return this}}),Object.defineProperty(Array.prototype,"toShuffled",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toShuffled called on null or undefined");return Array.from(this).shuffle()}}),Object.defineProperty(Array.prototype,"toUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toUnique called on null or undefined");return Array.from(new Set(this))}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.unshift,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(e,t,r){if(3!==arguments.length)throw new Error("Math.clamp called with an incorrect number of parameters (want: 3, received: ".concat(arguments.length,")"));var n=Number(e),a=Number(t),i=Number(r);if(a>i){var o=[i,a];a=o[0],i=o[1]}return Math.min(Math.max(n,a),i)}}),RegExp.escape||(e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})),r=/{(\d+)(?:,([+-]?\d+))?}/g,n=new RegExp(r.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(e){if(arguments.length<2)return 0===arguments.length?"":e;var t=2===arguments.length&&Array.isArray(arguments[1])?Array.from(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===t.length?e:n.test(e)?(r.lastIndex=0,e.replace(r,function(e,r,n){var a=t[r];if(null==a)return"";for(;"function"==typeof a;)a=a();switch(_typeof(a)){case"string":break;case"object":a=JSON.stringify(a);break;default:a=String(a)}return function(e,t){if(!t)return e;var r=Math.abs(t)-e.length;if(r<1)return e;var n=String(" ").repeat(r);return t<0?e+n:n+e}(a,n?Number.parseInt(n,10):0)})):e}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;-1!==(n=t.call(this,e,n));)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return s(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var e=String(this);return s(e,e.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n)<0&&(a=0):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return void 0!==r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=s(e,0),r=t.char,n=t.end;return-1===n?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=s(e,0),r=t.char,n=t.end;return-1===n?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Array>.delete() is deprecated."),null==this)throw new TypeError("Array.prototype.delete called on null or undefined");return Array.prototype.deleteAll.apply(this,arguments)}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if(console.warn("[DEPRECATED] JSON.reviveWrapper() is deprecated."),"string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return Serial.createReviver(e,t)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return console.warn("[DEPRECATED] Math.easeInOut() is deprecated."),1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Number>.clamp() is deprecated."),null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters (want: 2, received: ".concat(arguments.length,")"));return Math.clamp(this,arguments[0],arguments[1])}})}(),function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),triggerEvent("click",getActiveElement()||this))}function t(e){return function(){var t=jQuery(this);t.ariaIsDisabled()||(t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments))}}function r(e){if(!e.hasAttribute("data-last-tabindex")){var t=e.getAttribute("tabindex");e.setAttribute("data-last-tabindex",null!==t?t.trim():"")}e.setAttribute("tabindex",-1)}function n(e){var t=e.getAttribute("data-last-tabindex");null!==t&&(e.removeAttribute("data-last-tabindex"),""===t?e.removeAttribute("tabindex"):e.setAttribute("tabindex",t))}jQuery.fn.extend({ariaClick:function(r,n){if(0===this.length||0===arguments.length)return this;var a=r,i=n;return null==i&&(i=a,a=undefined),"string"!=typeof(a=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,tabindex:0,controls:undefined,pressed:undefined,label:undefined},a)).namespace?a.namespace="":"."!==a.namespace[0]&&(a.namespace=".".concat(a.namespace)),"boolean"==typeof a.pressed&&(a.pressed=a.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=a.role?this.attr("role",a.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",a.tabindex),null!=a.controls&&this.attr("aria-controls",a.controls),null!=a.pressed&&this.attr("aria-pressed",a.pressed),null!=a.label&&this.attr({"aria-label":a.label,title:a.label}),this.not("button").on("keypress.aria-clickable".concat(a.namespace),a.selector,e),this.on("click.aria-clickable".concat(a.namespace),a.selector,a.data,a.one?function(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),e.apply(this,arguments)})}(i):t(i)),this},ariaDisabled:function(e){if(0===this.length||0===arguments.length)return this;var t=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),a=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return e?(t.each(function(){this.setAttribute("disabled","disabled"),this.setAttribute("aria-disabled","true"),r(this)}),a.each(function(){this.disabled=!0,this.setAttribute("aria-disabled","true"),r(this)})):(t.each(function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"),n(this)}),a.each(function(){this.disabled=!1,this.removeAttribute("aria-disabled"),n(this)})),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.fn.extend({getForbiddenInteractiveContentTagNames:function(){if(0===this.length)return[];var e=new Set;return this.find("a,button,fieldset,form,input,menuitem,optgroup,option,select,textarea").each(function(t,r){return e.add(r.nodeName.toLowerCase())}),Array.from(e)}}),jQuery.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var a=document.createDocumentFragment();r.forEach(function(t){return new Wikifier(a,t,e)});var i=Array.from(a.querySelectorAll(".error")).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(i.length>0)throw new Error(i.join("; "))}},wiki:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.wikiWithOptions.apply(this,[undefined].concat(t))},wikiPassage:function(e){this.wikiWithOptions(undefined,Story.get(e).processText())}}),jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))},wikiPassage:function(e){return this.wikiWithOptions(undefined,Story.get(e).processText())}});var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var e=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return e?Number(e[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze(Object.assign(Object.create(null),{userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi}))),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(e){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(e){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(e){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(e){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(e){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(e){}return!1}(),hasTransitionEndEvent=function(){try{for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=Array.from(e.keys()),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n])}catch(e){}return!1}(),Object.freeze(Object.assign(Object.create(null),{audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent}))),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Fullscreen=function(){var e,t=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find(function(e){return e.isEnabled in document}))}catch(e){}return undefined}(),r=(e=null,function(){if(null!==e)return e;if(e=!1,t)try{var r=document.exitFullscreen();r.catch(function(){}),e=r instanceof Promise}catch(e){}return e});function n(e){var r=e||document.documentElement;return r===document.documentElement&&("msRequestFullscreen"===t.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(r=document.body),r}function a(){return Boolean(t&&document[t.element])}function i(e,i){if(!t)return Promise.reject(new Error("fullscreen not supported"));var o=n(i);if("function"!=typeof o[t.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(a())return Promise.resolve();if(r())return o[t.requestFn](e);var s=".Fullscreen_requestFullscreen";return new Promise(function(r,n){var a=jQuery(o);a.off(s).one("".concat(t.errorEvent).concat(s," ").concat(t.changeEvent).concat(s),function(e){a.off(s),e.type===t.errorEvent?n(new Error("unknown fullscreen request error")):r()}),o[t.requestFn](e)})}function o(){if(!t||"function"!=typeof document[t.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!a())return Promise.reject(new TypeError("fullscreen mode not active"));if(r())return document[t.exitFn]();var e=".Fullscreen_exitFullscreen";return new Promise(function(r,n){var a=jQuery(document);a.off(e).one("".concat(t.errorEvent).concat(e," ").concat(t.changeEvent).concat(e),function(i){a.off(e),i.type===t.errorEvent?n(new Error("unknown fullscreen exit error")):r()}),document[t.exitFn]()})}return Object.preventExtensions(Object.create(null,{vendor:{get:function(){return t}},element:{get:function(){return t?document[t.element]:null}},isEnabled:{value:function(){return Boolean(t&&document[t.isEnabled])}},isFullscreen:{value:a},request:{value:i},exit:{value:o},toggle:{value:function(e,t){return a()?o():i(e,t)}},onChange:{value:function(e,r){if(t){var a=n(r);jQuery(a).on(t.changeEvent,e)}}},offChange:{value:function(e,r){if(t){var a=n(r);e?jQuery(a).off(t.changeEvent,e):jQuery(a).off(t.changeEvent)}}},onError:{value:function(e,r){if(t){var a=n(r);jQuery(a).on(t.errorEvent,e)}}},offError:{value:function(e,r){if(t){var a=n(r);e?jQuery(a).off(t.errorEvent,e):jQuery(a).off(t.errorEvent)}}}}))}(),Outliner=function(){var e,t=null;function r(){document.documentElement.removeAttribute("data-outlines"),t.styleSheet?t.styleSheet.cssText="*:focus{outline:none;}":t.textContent="*:focus{outline:none;}"}function n(){document.documentElement.setAttribute("data-outlines",""),t.styleSheet?t.styleSheet.cssText="":t.textContent=""}return Object.preventExtensions(Object.create(null,{init:{value:function(){t||(t=document.createElement("style"),jQuery(t).attr({id:"style-outliner",type:"text/css"}).appendTo(document.head),jQuery(document).on("mousedown.style-outliner keydown.style-outliner",function(t){t.type!==e&&(e=t.type,"keydown"===t.type?n():r())}),e="mousedown",r())}},hide:{value:r},show:{value:n}}))}(),Serial=function(){var supportedTypes=Object.freeze([{id:"Date",get reference(){return Date.prototype},method:function(){return["(revive:date)",this.toISOString()]}},{id:"Function",get reference(){return Function.prototype},method:function(){return["(revive:)",["(".concat(this.toString(),")")]]}},{id:"Map",get reference(){return Map.prototype},method:function(){return["(revive:map)",Array.from(this)]}},{id:"RegExp",get reference(){return RegExp.prototype},method:function(){return["(revive:)",[this.toString()]]}},{id:"Set",get reference(){return Set.prototype},method:function(){return["(revive:set)",Array.from(this)]}}]);function createReviver(e,t){if("string"!=typeof e)throw new TypeError("Serial.createReviver code parameter must be a string");return["(revive:)",[e,t]]}function parse(text,reviver){return JSON.parse(text,function(key,val){var value=val;if(value instanceof Array&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":case"(revive:)":try{var $ReviveData$=value[1][1];value=eval(value[1][0])}catch(e){}}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}function stringify(e,t,r){var n=new Map;supportedTypes.forEach(function(e){var t=e.id,r=e.reference,a=e.method;Object.hasOwn(r,"toJSON")&&n.set(t,r.toJSON),Object.defineProperty(r,"toJSON",{configurable:!0,writable:!0,value:a})});var a=JSON.stringify(e,function(e,r){var n=r;if("function"==typeof t)try{n=t(e,n)}catch(e){}switch(n){case undefined:n=["(revive:)",["undefined"]];break;case 1/0:n=["(revive:)",["Infinity"]]}return n},r);return supportedTypes.forEach(function(e){var t=e.id,r=e.reference;n.has(t)?(Object.defineProperty(r,"toJSON",{configurable:!0,writable:!0,value:n.get(t)}),n.delete(t)):delete r.toJSON}),a}return Object.preventExtensions(Object.create(null,{createReviver:{value:createReviver},parse:{value:parse},stringify:{value:stringify}}))}(),Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find(function(e){return e.hiddenProperty in document}))}catch(e){}return undefined}(),Object.preventExtensions(Object.create(null,{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor;function appendError(e,t,r){var n=jQuery(document.createElement("div")),a=jQuery(document.createElement("button")),i=jQuery(document.createElement("pre")),o="".concat(L10n.get("errorViewTitle"),": ").concat(t||"unknown error");return a.addClass("error-toggle").ariaClick({label:L10n.get("errorViewLabelToggle")},function(){a.hasClass("enabled")?(a.removeClass("enabled"),i.attr({"aria-hidden":!0,hidden:"hidden"})):(a.addClass("enabled"),i.removeAttr("aria-hidden hidden"))}).appendTo(n),jQuery(document.createElement("span")).addClass("error").text(o).appendTo(n),jQuery(document.createElement("code")).text(r).appendTo(i),i.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo(n),n.addClass("error-view").appendTo(e),console.warn("".concat(o,"\n\t").concat(r.replace(/\n/g,"\n\t"))),!1}var throwError=appendError;function charAndPosAt(e,t){var r=String(e),n=Math.trunc(t),a=r.charCodeAt(n);if(Number.isNaN(a))return{char:"",start:-1,end:-1};var i={char:r.charAt(n),start:n,end:n};if(a<55296||a>57343)return i;if(a>=55296&&a<=56319){var o=n+1;if(o>=r.length)return i;var s=r.charCodeAt(o);return s<56320||s>57343||(i.char=i.char+r.charAt(o),i.end=o),i}if(0===n)return i;var u=n-1,c=r.charCodeAt(u);return c<55296||c>56319||(i.char=r.charAt(u)+i.char,i.start=u),i}function clone(e){if("object"!==_typeof(e)||null===e)return e;if("function"==typeof e.clone)return e.clone(!0);var t;if(e instanceof Array)t=new Array(e.length);else if(e instanceof Date)t=new Date(e.getTime());else if(e instanceof Map)t=new Map,e.forEach(function(e,r){return t.set(clone(r),clone(e))});else if(e instanceof RegExp)t=new RegExp(e);else if(e instanceof Set)t=new Set,e.forEach(function(e){return t.add(clone(e))});else{var r=getTypeOf(e);if("Object"!==r)throw new TypeError("attempted to clone unsupported type: ".concat(r));t=Object.create(Object.getPrototypeOf(e))}return Object.keys(e).forEach(function(r){return t[r]=clone(e[r])}),t}var convertBreaks=function(){var e=new RegExp(Patterns.notSpace);function t(t){if(!t.hasChildNodes())return!0;for(var r=t.childNodes,n=r.length,a=0;a<n;++a){var i=r[a];switch(i.nodeType){case Node.TEXT_NODE:if(e.test(i.nodeValue))return!1;break;case Node.COMMENT_NODE:break;default:return!1}}return!0}return function(e){for(var r,n=document.createDocumentFragment(),a=document.createElement("p");null!==(r=e.firstChild);){if(r.nodeType===Node.ELEMENT_NODE)switch(r.nodeName.toUpperCase()){case"BR":if(null!==r.nextSibling&&r.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===r.nextSibling.nodeName.toUpperCase()){e.removeChild(r.nextSibling),e.removeChild(r),t(a)||n.appendChild(a),a=document.createElement("p");continue}if(t(a)){e.removeChild(r);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":t(a)||(n.appendChild(a),a=document.createElement("p")),n.appendChild(r);continue}a.appendChild(r)}t(a)||n.appendChild(a),e.appendChild(n)}}(),createFilename=(illegalCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g,function(e){return String(e).trim().replace(illegalCharsRE,"")}),illegalCharsRE,createSlug=function(){var e=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,t=/^-*$/,r=/^\$/,n=/^_/;return function(a){var i=String(a).trim(),o=i.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return t.test(o)?i.replace(r,"").replace(n,"-").replace(e,""):o}}();function cssPropToDOMProp(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}return("-ms-"===e.slice(0,4)?e.slice(1):e).split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}var cssTimeToMS=(cssTimeRE=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,function(e){var t=cssTimeRE.exec(String(e));if(null===t)throw new SyntaxError('invalid time value syntax: "'.concat(e,'"'));var r=Number(t[1]);if(1===t[2].length&&(r*=1e3),Number.isNaN(r)||!Number.isFinite(r))throw new RangeError('invalid time value: "'.concat(e,'"'));return r}),cssTimeRE,decodeEntities=(escapedHtmlRE=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,hasEscapedHtmlRE=new RegExp(escapedHtmlRE.source,"i"),escapedHtmlTable=enumFrom({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),function(e){if(null==e)return"";var t=String(e);return t&&hasEscapedHtmlRE.test(t)?t.replace(escapedHtmlRE,function(e){return escapedHtmlTable[e.toLowerCase()]}):t}),escapedHtmlRE,hasEscapedHtmlRE,escapedHtmlTable,encodeEntities=(htmlCharsRE=/[&<>"'`]/g,hasHtmlCharsRE=new RegExp(htmlCharsRE.source),htmlCharsTable=enumFrom({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),function(e){if(null==e)return"";var t=String(e);return t&&hasHtmlCharsRE.test(t)?t.replace(htmlCharsRE,function(e){return htmlCharsTable[e]}):t}),htmlCharsRE,hasHtmlCharsRE,htmlCharsTable,encodeMarkup=(markupCharsRE=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,hasMarkupCharsRE=new RegExp(markupCharsRE.source),markupCharsTable=enumFrom({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"}),function(e){if(null==e)return"";var t=String(e);return t&&hasMarkupCharsRE.test(t)?t.replace(markupCharsRE,function(e){return markupCharsTable[e]}):t}),markupCharsRE,hasMarkupCharsRE,markupCharsTable,enquote=(unescapedDQuoteRE=/(^|[^\\])(")/g,unescapedSQuoteRE=/(^|[^\\])(')/g,function(e){for(var t=0,r=0,n=0;n<e.length;++n)switch(e[n]){case"\\":++n;break;case'"':++t;break;case"'":++r}if(0===t)return'"'.concat(e,'"');if(0===r)return"'".concat(e,"'");var a=t<=r?'"':"'";return"".concat(a).concat(e.replace('"'===a?unescapedDQuoteRE:unescapedSQuoteRE,"$1\\$2")).concat(a)}),unescapedDQuoteRE,unescapedSQuoteRE;function enumFrom(e){var t=Object.create(null);if(e instanceof Array)e.forEach(function(e,r){return t[String(e)]=r});else if(e instanceof Set)Array.from(e).forEach(function(e,r){return t[String(e)]=r});else if(e instanceof Map)e.forEach(function(e,r){return t[String(r)]=e});else{if(null===e||"object"!==_typeof(e)||Object.getPrototypeOf(e)!==Object.prototype)throw new TypeError("enumFrom object parameter must be an Array, Map, Set, or generic object");Object.assign(t,e)}return Object.freeze(Object.defineProperties(t,{nameFrom:{value:function(e){var t=Object.entries(this).find(function(t){return t[1]===e});return t?t[0]:undefined}}}))}var exceptionFrom=(extraProps=Object.freeze(["code","data","result","stack","columnNumber","fileName","lineNumber","description","number"]),function(e,t,r){if(null===e||"object"!==_typeof(e))throw new Error("exceptionFrom original parameter must be an object");if("function"!=typeof t)throw new Error("exceptionFrom exceptionType parameter must be an error type constructor");var n=_typeof(r);if("undefined"!==n&&"string"!==n&&"object"!==n)throw new Error("exceptionFrom override parameter must be an object or string");var a=new Map;extraProps.forEach(function(t){void 0!==e[t]&&a.set(t,e[t])}),"string"===n?a.set("message",r):"object"===n&&null!==r&&Object.getOwnPropertyNames(r).forEach(function(e){void 0!==r[e]&&a.set(e,r[e])});var i=new t(a.get("message"));return a.delete("message"),a.forEach(function(e,t){void 0===i[t]?Object.defineProperty(i,t,{value:e,configurable:!0,writable:!0}):i[t]=e}),i}),extraProps;function getActiveElement(){try{return document.activeElement||null}catch(e){return null}}function getErrorMessage(e){return null==e?"unknown error":"object"===_typeof(e)&&"message"in e?e.message:String(e)}var getToStringTag=(toString=Object.prototype.toString,slice=String.prototype.slice,"[object Object]"===toString.call(new Map)?function(e){return e instanceof Map?"Map":e instanceof Set?"Set":slice.call(toString.call(e),8,-1)}:function(e){return slice.call(toString.call(e),8,-1)}),toString,slice,getTypeOf=function(){var e=Object.prototype.toString,t=String.prototype.slice;return function(r){if(null===r)return"null";var n=_typeof(r);return"object"===n?t.call(e.call(r),8,-1):n}}(),hasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(e){return window.matchMedia(e).matches},isExternalLink=(externalUrlRE=new RegExp("^".concat(Patterns.externalUrl),"gim"),fingerprintRE=/[/\\?]/,function(e){return!Story.has(e)&&(externalUrlRE.test(e)||fingerprintRE.test(e))}),externalUrlRE,fingerprintRE;function msToCSSTime(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var t;switch(_typeof(e)){case"string":t='"'.concat(e,'"');break;case"number":t=String(e);break;default:t=getTypeOf(e)}throw new TypeError("invalid milliseconds value: ".concat(t))}return"".concat(e,"ms")}var now=(clock=Has.performance?performance:Date,function(){return clock.now()}),clock,onUserActivation=(uaEvents=Object.freeze(["keydown","mousedown","pointerdown","pointerup","touchend"]),function(e,t){jQuery(document).off(e).on(uaEvents.map(function(t){return"".concat(t).concat(e)}).join(" "),function(r){t(r).then(function(){return jQuery(document).off(e)},function(t){if("NotAllowedError"!==t.name)throw jQuery(document).off(e),t})})}),uaEvents;function parseURL(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=_slicedToArray(e.split("="),2),n=t[0],a=t[1];Object.hasOwn(r,n)?r[n].push(a):r[n]=[a]});var n=t.host&&"/"!==t.pathname[0]?"/".concat(t.pathname):t.pathname;return Object.freeze(Object.assign(Object.create(null),{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:"".concat(n).concat(t.search),pathname:n,search:t.search,searchParams:Object.freeze(r),hash:t.hash}))}function sameValueZero(e,t){return e===t||e!=e&&t!=t}var scrubEventKey=function(){var e,t;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var r=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)\d$/);r&&(e=r[1],t=r[2])}return e||t||(e=",",t="."),function(r){switch(r){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return t;case"Separator":return e}return r}}(),setDisplayTitle=function(e,t){if("string"!=typeof e)throw new TypeError("title parameter must be a string (received: ".concat(getTypeOf(e),")"));var r,n;t?n=r=e.trim():(r=document.createDocumentFragment(),new Wikifier(r,e,{noCleanup:!0}),n=function(e){for(var t,r=e.cloneNode(!0),n=document.createDocumentFragment();null!==(t=r.firstChild);){if(t.nodeType===Node.ELEMENT_NODE)switch(t.nodeName.toUpperCase()){case"BR":case"DIV":case"P":n.appendChild(document.createTextNode(" "))}n.appendChild(t)}return n.textContent}(r).trim()),document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(n):n,jQuery("#story-title").empty().append(r)};function setPageElement(e,t,r){var n="object"===_typeof(e)?e:document.getElementById(e);if(null==n)return null;var a=t instanceof Array?t:[t];jQuery(n).empty();for(var i=0;i<a.length;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var o=String(r).trim();""!==o&&new Wikifier(n,o)}return n}function stringFrom(e){switch(_typeof(e)){case"function":return"[function]";case"number":if(Number.isNaN(e))return"[number NaN]";break;case"object":if(null===e)return"[null]";if(e instanceof Array)return e.map(function(e){return stringFrom(e)}).join(", ");if(e instanceof Set)return Array.from(e).map(function(e){return stringFrom(e)}).join(", ");if(e instanceof Map){var t=Array.from(e).map(function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];return"".concat(stringFrom(r)," → ").concat(stringFrom(n))});return"{ ".concat(t.join(", ")," }")}if(e instanceof Date)return e.toLocaleString();if(e instanceof Element){if(e===document.documentElement||e===document.head||e===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return e.outerHTML}if(e instanceof Node)return e.textContent;break;case"symbol":var r=void 0!==e.description?' "'.concat(e.description,'"'):"";return"[symbol".concat(r,"]");case"undefined":return"[undefined]"}return String(e)}var triggerEvent=(createEvent=function(){try{return new CustomEvent("click",{bubbles:!0}),function(e,t){for(var r=Object.assign({bubbles:!0,cancelable:!0,composed:!1},t),n=r.bubbles,a=r.cancelable,i=r.composed,o=r.detail,s=_objectWithoutProperties(r,_excluded),u=new CustomEvent(e,{bubbles:n,cancelable:a,composed:i,detail:o}),c=0,l=Object.keys(s);c<l.length;++c){var d=l[c];void 0!==s[d]&&(u[d]=t[d])}return u}}catch(e){return function(e,t){for(var r=Object.assign({bubbles:!0,cancelable:!0},t),n=r.bubbles,a=r.cancelable,i=_objectWithoutProperties(r,_excluded2),o=document.createEvent("Event"),s=0,u=Object.keys(i);s<u.length;++s){var c=u[s];void 0!==i[c]&&(o[c]=t[c])}return o.initEvent(e,n,a),o}}}(),function(e,t,r){var n=createEvent(e,r),a=[];if(t)if(t instanceof jQuery||t instanceof NodeList||t instanceof Array)for(var i=0;i<t.length;++i)a.push(t[i]);else a.push(t);else a.push(document);for(var o=0;o<a.length;++o)a[o].dispatchEvent(n)}),createEvent,SimpleStore=(_adapters=[],_initialized=null,Object.preventExtensions(Object.create(null,{adapters:{value:_adapters},create:{value:function(e,t){if(_initialized)return _initialized.create(e,t);for(var r=0;r<_adapters.length;++r)if(_adapters[r].init(e,t))return(_initialized=_adapters[r]).create(e,t);throw new Error("No valid storage adapters found")}}}))),_adapters,_initialized,_MAX_EXPIRY,_MIN_EXPIRY,_ok,CookieAdapter;SimpleStore.adapters.push(function(){var e=!1,t=function(){function e(t,r){_classCallCheck(this,e);var n="".concat(t,"."),a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(n)))},name:{value:i},id:{value:t},persistent:{value:Boolean(r)}})}return _createClass(e,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&Object.hasOwn(this._engine,this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){if(n(e))throw exceptionFrom(e,Error,{cause:{origin:e},message:"".concat(this.name," quota exceeded")});throw e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e||(this._engine.removeItem(this._prefix+e),0))}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(Serial.stringify(e))}},{key:"_deserialize",value:function(e){return Serial.parse(LZString.decompressFromUTF16(e))}}])}(),r=/quota.?(?:exceeded|reached)/i;function n(e){return e instanceof DOMException&&(22===e.code||1014===e.code||r.test(e.name)||r.test(e.message))}return Object.preventExtensions(Object.create(null,{init:{value:function(){function t(e){var t;try{t=window[e];var r="_sc_".concat(String(Date.now()));t.setItem(r,r);var a=t.getItem(r)===r;return t.removeItem(r),a}catch(e){return t&&0!==t.length&&n(e)}}return e=t("localStorage")&&t("sessionStorage")}},create:{value:function(r,n){if(!e)throw new Error("adapter not initialized");return new t(r,n)}}}))}()),SimpleStore.adapters.push((_MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,CookieAdapter=function(){function e(t,r){_classCallCheck(this,e);var n="".concat(t).concat(r?"!":"*",".");Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(n)))},name:{value:"cookie"},id:{value:t},persistent:{value:Boolean(r)}})}return _createClass(e,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var e=document.cookie.split(/;\s*/),t=[],r=0;r<e.length;++r){var n=e[r].split("="),a=decodeURIComponent(n[0]);this._prefixRe.test(a)&&""!==decodeURIComponent(n[1])&&t.push(a.replace(this._prefixRe,""))}return t}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?_MAX_EXPIRY:undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw exceptionFrom(e,Error,{cause:{origin:e},message:"cookie error: ".concat(e.message)})}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,_MIN_EXPIRY),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw exceptionFrom(e,Error,{cause:{origin:e},message:"cookie error: ".concat(e.message)})}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("=");if(e===decodeURIComponent(n[0]))return decodeURIComponent(n[1])||null}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n="".concat(encodeURIComponent(e),"=");null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; expires=".concat(r)),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(Serial.stringify(e))}},{key:"_deserialize",value:function(e){return Serial.parse(LZString.decompressFromBase64(e))}}])}(),Object.preventExtensions(Object.create(null,{init:{value:function(e){try{var t="_sc_".concat(String(Date.now()));CookieAdapter._setCookie(t,CookieAdapter._serialize(t),undefined),_ok=CookieAdapter._deserialize(CookieAdapter._getCookie(t))===t,CookieAdapter._setCookie(t,undefined,_MIN_EXPIRY)}catch(e){_ok=!1}return _ok&&function(e){if(""!==document.cookie)for(var t="".concat(e,"."),r=new RegExp("^".concat(RegExp.escape(t))),n="".concat(e,"!."),a="".concat(e,"*."),i=/\.(?:state|rcWarn)$/,o=document.cookie.split(/;\s*/),s=function(){var e=o[u].split("="),t=decodeURIComponent(e[0]);if(r.test(t)){var s=decodeURIComponent(e[1]);if(""!==s){var c=!i.test(t);CookieAdapter._setCookie(t,undefined,_MIN_EXPIRY),CookieAdapter._setCookie(t.replace(r,function(){return c?n:a}),s,c?_MAX_EXPIRY:undefined)}}},u=0;u<o.length;++u)s()}(e),_ok}},create:{value:function(e,t){if(!_ok)throw new Error("adapter not initialized");return new CookieAdapter(e,t)}}}))));var DebugView=function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}},{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){if(null==e){var t={};return this.view.className.splitOrEmpty(/\s+/).forEach(function(e){"debug"!==e&&(t[e]=!0)}),t}if("object"===_typeof(e))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),triggerEvent(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),triggerEvent(":debugviewupdate")}},{key:"toggle",value:function(){e.isEnabled()?e.disable():e.enable()}}])}(),NodeTyper=_createClass(function e(t){if(_classCallCheck(this,e),"object"!==_typeof(t)||null===t)throw new Error("config parameter must be an object (received: ".concat(getTypeOf(t),")"));if(!(Object.hasOwn(t,"targetNode")&&t.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:t.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:t.parentNode||null},classNames:{writable:!0,value:t.classNames||null},finished:{writable:!0,value:!1}});var r,n=this.node;for(n.nodeValue&&(this.nodeValue=n.nodeValue,n.nodeValue="");null!==(r=n.firstChild);)this.childNodes.push(new e({targetNode:r,parentNode:n,classNames:this.classNames})),n.removeChild(r)},[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(e){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(e)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var t=charAndPosAt(this.nodeValue,0),r=t.char,n=t.start,a=t.end;this.node.nodeValue+=r,this.nodeValue=this.nodeValue.slice(1+a-n)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var i=this.childNodes;i.length>0;){if(i[0].type())return!0;i.shift()}return this.finished=!0,!1}}]),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),_createClass(function e(t){if(_classCallCheck(this,e),null==t)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:t}})},[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(e){var t=e;_hasImageMarkupRe.test(t)&&(_imageMarkupRe.lastIndex=0,t=t.replace(_imageMarkupRe,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(Object.hasOwn(t,"error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text.trim())}return'url("'.concat(r.replace(/"/g,"%22"),'")')})),this.style.styleSheet?this.style.styleSheet.cssText+=t:this.style.appendChild(document.createTextNode(t))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}])),_imageMarkupRe,_hasImageMarkupRe,Diff=function(){var e=enumFrom({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});function t(e){var t;switch(_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}return Object.preventExtensions(Object.create(null,{Op:{value:e},diff:{value:function r(n,a){for(var i,o=Object.prototype.toString,s=n instanceof Array,u=Object.create(null),c=[].concat(_toConsumableArray(Object.keys(n)),_toConsumableArray(Object.keys(a))).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),l=function(e){return e===i},d=0,p=c.length;d<p;++d){var f=c[d],h=n[f],g=a[f];if(Object.hasOwn(n,f))if(Object.hasOwn(a,f)){if(h===g)continue;if(_typeof(h)===_typeof(g))if("function"==typeof h)h.toString()!==g.toString()&&(u[f]=[e.Copy,g]);else if("object"!==_typeof(h)||null===h)u[f]=[e.Copy,g];else{var m=o.call(h);if(m===o.call(g))if(h instanceof Date)h.getTime()!==g.getTime()&&(u[f]=[e.Copy,clone(g)]);else if(h instanceof Map)u[f]=[e.Copy,clone(g)];else if(h instanceof RegExp)h.toString()!==g.toString()&&(u[f]=[e.Copy,clone(g)]);else if(h instanceof Set)u[f]=[e.Copy,clone(g)];else if(h instanceof Array||"[object Object]"===m){var v=r(h,g);null!==v&&(u[f]=v)}else u[f]=[e.Copy,clone(g)];else u[f]=[e.Copy,clone(g)]}else u[f]=[e.Copy,"object"!==_typeof(g)||null===g?g:clone(g)]}else if(s&&t(f)){var y=Number(f);if(!i){i="";do{i+="~"}while(c.some(l));u[i]=[e.SpliceArray,y,y]}y<u[i][1]&&(u[i][1]=y),y>u[i][2]&&(u[i][2]=y)}else u[f]=e.Delete;else u[f]=[e.Copy,"object"!==_typeof(g)||null===g?g:clone(g)]}return Object.keys(u).length>0?u:null}},patch:{value:function t(r,n){for(var a=n?Object.keys(n):[],i=clone(r),o=0,s=a.length;o<s;++o){var u=a[o],c=n[u];if(c===e.Delete)delete i[u];else if(c instanceof Array)switch(c[0]){case e.SpliceArray:i.splice(c[1],c[2]-c[1]+1);break;case e.Copy:i[u]=clone(c[1]);break;case e.CopyDate:i[u]=new Date(c[1])}else i[u]=t(i[u],c)}return i}}}))}(),L10n=(replaceRE=/\{\w+\}/g,hasReplaceRE=new RegExp(replaceRE.source),Object.preventExtensions(Object.create(null,{init:{value:function(){}},get:{value:function(e,t){if(!e)return"";var r=(Array.isArray(e)?e:[e]).find(function(e){return Object.hasOwn(l10nStrings,e)});if(!r)return"";for(var n=l10nStrings[r],a=0;hasReplaceRE.test(n);){if(++a>50)throw new Error("L10n.get exceeded maximum replacement depth, probable infinite loop");replaceRE.lastIndex=0,n=n.replace(replaceRE,function(e){var r=e.slice(1,-1);return t&&Object.hasOwn(t,r)?t[r]:Object.hasOwn(l10nStrings,r)?l10nStrings[r]:void 0})}return n}}}))),replaceRE,hasReplaceRE,l10nStrings={textAbort:"Abort",textAborting:"Aborting",textCancel:"Cancel",textClear:"Clear",textClose:"Close",textDelete:"Delete",textExport:"Export",textIdentity:"game",textImport:"Import",textLoad:"Load",textOff:"Off",textOk:"OK",textOn:"On",textSave:"Save",textTurn:"Turn",errorNonexistentPassage:'the passage "{passage}" does not exist',warningNoStorage:"All usable storage APIs are missing. Possible causes are a disabled third-party cookie setting, which also affects Web Storage, or a private browsing mode.",warningNoWebStorage:"The Web Storage API is missing, so this {textIdentity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningDegraded:"Some capabilities required to support this {textIdentity} are missing, so it is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoSaves:"Some capabilities required to support saves are missing, so saves have been disabled for this session.",saveErrorDisallowed:"Saving is currently disallowed.",saveErrorDecodeFail:"unable to decode save, likely due to corruption",saveErrorDiskLoadFail:"failed to load save file from disk",saveErrorIdMismatch:"save is from the wrong {textIdentity}",saveErrorInvalidData:"save is missing required data, likely due to corruption",saveErrorLoadTooEarly:"cannot load save this early",saveErrorNonexistent:"save does not exist",uiBarLabelToggle:"Toggle the UI bar",uiBarLabelBackward:"Go backward within the {textIdentity} history",uiBarLabelForward:"Go forward within the {textIdentity} history",uiBarLabelJumpto:"Jump to a specific point within the {textIdentity} history",alertTitle:"Alert",restartTitle:"Restart",restartMesgPrompt:"All unsaved progress will be lost. Are you sure that you want to restart?",continueTitle:"Continue",savesTitle:"Saves",savesHeaderBrowser:"In Browser",savesHeaderDisk:"On Disk",savesLabelBrowserClear:"Clear all browser saves",savesLabelBrowserExport:"Export browser saves to bundle",savesLabelBrowserImport:"Import browser saves from bundle",savesLabelDiskLoad:"Load from disk",savesLabelDiskSave:"Save to disk",savesTextBrowserAuto:"Auto",savesTextBrowserSlot:"Slot",savesTextNoDate:"unknown date",settingsTitle:"Settings",settingsTextReset:"Reset to Defaults",errorViewTitle:"Error",errorViewLabelToggle:"Toggle the error view",debugBarLabelToggle:"Toggle the debug bar",debugBarLabelViewsToggle:"Toggle the debug views",debugBarLabelWatchAdd:"Add a new watch",debugBarLabelWatchAll:"Watch all",debugBarLabelWatchClear:"Clear all watches",debugBarLabelWatchDelete:"Delete this watch",debugBarLabelWatchPlaceholder:"variable name",debugBarLabelPassagePlaceholder:"passage name",debugBarLabelPassagePlay:"Play passage",debugBarLabelWatchToggle:"Toggle the watch panel",debugBarMesgNoWatches:"No watches set",debugBarTextAdd:"Add",debugBarTextPassage:"Passage",debugBarTextViews:"Views",debugBarTextWatch:"Watch",macroBackText:"Back",macroReturnText:"Return",autoloadTitle:"Autoload",autoloadMesgPrompt:"An autosave exists. Load it now or go to the start?",autoloadTextCancel:"Go to start",autoloadTextOk:"Load autosave",jumptoTitle:"Jump To",jumptoMesgUnavailable:"No jump points currently available…",shareTitle:"Share"},Config=(_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_debug=!1,_enableOptionalDebugging=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesMaxAuto=0,_savesMaxSlot=8,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,errPassagesDescriptionsDeprecated="[DEPRECATED] Config.passages.descriptions has been deprecated, see Config.saves.descriptions instead",errSavesAutoloadDeprecated="[DEPRECATED] Config.saves.autoload has been deprecated, see the Save.browser.continue API instead",_baseSavesAutosaveDeprecated="[DEPRECATED] Config.saves.autosave has been deprecated",errSavesOnLoadDeprecated="[DEPRECATED] Config.saves.onLoad has been deprecated, see the Save.onLoad API instead",errSavesOnSaveDeprecated="[DEPRECATED] Config.saves.onSave has been deprecated, see the Save.onSave API instead",errSavesSlotsDeprecated="[DEPRECATED] Config.saves.slots has been deprecated, see Config.saves.maxSlotSaves instead",Object.freeze({get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(e){_addVisitedLinkClass=Boolean(e)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(e){_cleanupWikifierOutput=Boolean(e)},get debug(){return _debug},set debug(e){_debug=Boolean(e)},get enableOptionalDebugging(){return _enableOptionalDebugging},set enableOptionalDebugging(e){_enableOptionalDebugging=Boolean(e)},get loadDelay(){return _loadDelay},set loadDelay(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=e},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(e){_audioPauseOnFadeToZero=Boolean(e)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(e){_audioPreloadMetadata=Boolean(e)}}),history:Object.freeze({get controls(){return _historyControls},set controls(e){var t=Boolean(e);if(1===_historyMaxStates&&t)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=t},get maxStates(){return _historyMaxStates},set maxStates(e){if(!Number.isSafeInteger(e)||e<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=e,_historyControls&&1===e&&(_historyControls=!1)}}),macros:Object.freeze({get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(e){if(!Number.isSafeInteger(e)||e<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=e},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(e){_macrosTypeSkipKey=String(e)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(e){_macrosTypeVisitedPassages=Boolean(e)},get ifAssignmentError(){throw new Error("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead")},set ifAssignmentError(e){console.warn("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead"),Config.enableOptionalDebugging=e}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(getTypeOf(e),")"));_navigationOverride=e}}),passages:Object.freeze({get displayTitles(){return _passagesDisplayTitles},set displayTitles(e){_passagesDisplayTitles=Boolean(e)},get nobr(){return _passagesNobr},set nobr(e){_passagesNobr=Boolean(e)},get onProcess(){return _passagesOnProcess},set onProcess(e){if(null!=e){var t=getTypeOf(e);if("function"!==t)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(t,")"))}_passagesOnProcess=e},get start(){return _passagesStart},set start(e){if(null!=e){var t=getTypeOf(e);if("string"!==t)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(t,")"))}_passagesStart=e},get transitionOut(){return _passagesTransitionOut},set transitionOut(e){if(null!=e){var t=getTypeOf(e);if("string"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(t,")"))}_passagesTransitionOut=e},get descriptions(){throw new Error(errPassagesDescriptionsDeprecated)},set descriptions(e){switch(console.warn(errPassagesDescriptionsDeprecated),_typeof(e)){case"boolean":e&&!Config.saves.descriptions&&(Config.saves.descriptions=function(){return State.passage});break;case"function":Config.saves.descriptions||(Config.saves.descriptions=e);break;case"undefined":case"object":if(e&&!Config.saves.descriptions){var t=e;Config.saves.descriptions=function(){return Object.hasOwn(t,State.passage)&&t[State.passage]}}break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(getTypeOf(e),")"))}}}),saves:Object.freeze({get descriptions(){return _savesDescriptions},set descriptions(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.descriptions must be a function or null/undefined (received: ".concat(getTypeOf(e),")"));_savesDescriptions=e},get id(){return _savesId},set id(e){if("string"!=typeof e||""===e)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(getTypeOf(e),")"));_savesId=e},get isAllowed(){return _savesIsAllowed},set isAllowed(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(getTypeOf(e),")"));_savesIsAllowed=e},get maxAutoSaves(){return _savesMaxAuto},set maxAutoSaves(e){if(!Number.isInteger(e))throw new TypeError("Config.saves.maxAutoSaves must be an integer");if(e<0||e>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxAutoSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(e,")"));_savesMaxAuto=e},get maxSlotSaves(){return _savesMaxSlot},set maxSlotSaves(e){if(!Number.isInteger(e))throw new TypeError("Config.saves.maxSlotSaves must be an integer");if(e<0||e>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxSlotSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(e,")"));_savesMaxSlot=e},get metadata(){return _savesMetadata},set metadata(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.metadata must be a function or null/undefined (received: ".concat(getTypeOf(e),")"));_savesMetadata=e},get version(){return _savesVersion},set version(e){_savesVersion=e},get _internal_autoload_(){return _savesAutoload},get autoload(){return console.warn(errSavesAutoloadDeprecated),_savesAutoload},set autoload(e){if(console.warn(errSavesAutoloadDeprecated),null!=e){var t=getTypeOf(e);if("boolean"!==t&&("string"!==t||"prompt"!==e)&&"function"!==t)throw new TypeError("Config.saves.autoload must be a boolean, string ('prompt'), function, or null/undefined (received: ".concat(t,")"))}_savesAutoload=e},get autosave(){throw new Error("".concat(_baseSavesAutosaveDeprecated,", see Config.saves.maxAutoSaves and Config.saves.isAllowed instead"))},set autosave(e){switch(_typeof(e)){case"boolean":console.warn("".concat(_baseSavesAutosaveDeprecated,", for boolean usage see Config.saves.maxAutoSaves instead"));break;case"function":if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for function usage see Config.saves.isAllowed instead")),!Config.saves.isAllowed){var t=e;Config.saves.isAllowed=function(e){return e!==Save.Type.Auto||t(e)}}break;default:if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for tag usage see Config.saves.isAllowed instead")),!(e instanceof Array)||0===e.length||e.some(function(e){return"string"!=typeof e})){var r=getTypeOf(e);throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(r).concat("Array"===r?"<any>":"",")"))}if(!Config.saves.isAllowed){var n=e;Config.saves.isAllowed=function(e){return e!==Save.Type.Auto||n.includesAny(Story.get(State.passage).tags)}}}0===Config.saves.maxAutoSaves&&(Config.saves.maxAutoSaves=1)},get onLoad(){throw new Error(errSavesOnLoadDeprecated)},set onLoad(e){console.warn(errSavesOnLoadDeprecated),Save.onLoad.add(e)},get onSave(){throw new Error(errSavesOnSaveDeprecated)},set onSave(e){console.warn(errSavesOnSaveDeprecated),Save.onSave.add(e)},get slots(){throw new Error(errSavesSlotsDeprecated)},set slots(e){console.warn(errSavesSlotsDeprecated),Config.saves.maxSlotSaves=e},get tryDiskOnMobile(){return console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated"),!0},set tryDiskOnMobile(e){console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated")}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(e){var t=getTypeOf(e);if("boolean"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(t,")"));_uiStowBarInitially=e},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(e){_uiUpdateStoryElements=Boolean(e)}})})),_navigationOverride,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesDescriptions,_savesId,_savesIsAllowed,_savesMetadata,_savesVersion,_savesAutoload,_addVisitedLinkClass,_cleanupWikifierOutput,_debug,_enableOptionalDebugging,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesMaxAuto,_savesMaxSlot,_uiStowBarInitially,_uiUpdateStoryElements,errPassagesDescriptionsDeprecated,errSavesAutoloadDeprecated,_baseSavesAutosaveDeprecated,errSavesOnLoadDeprecated,errSavesOnSaveDeprecated,errSavesSlotsDeprecated,SimpleAudio=function(){var e,t=Object.freeze([":not",":all",":looped",":muted",":paused",":playing",":stopped"]),r=/^([\w-]+)\s*\|\s*(\S.*)$/,n=/[:\s]/,a=new Map,i=new Map,o=new Map,s=new Map,u=1,c=1,l=!1,d=!1,p=(e=null,function(){if(null!==e)return e;if(e=!1,Has.audio)try{var t=document.createElement("audio");t.muted=!0;var r=t.play();r.catch(function(){}),e=r instanceof Promise}catch(e){}return e}),f=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){var r=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,n=/\.([^./\\]+)$/,a=e.formats,i=[],o=document.createElement("audio");o.preload="none",t.forEach(function(e){var t=null;switch(_typeof(e)){case"string":var s;if("data:"===e.slice(0,5)){if(null===(s=r.exec(e)))throw new Error("source data URI missing media type")}else if(null===(s=n.exec(parseURL(e).pathname)))throw new Error("source URL missing file extension");a[s[1]]&&(t=e);break;case"object":if(null===e)throw new Error("source object cannot be null");if(!Object.hasOwn(e,"src"))throw new Error('source object missing required "src" property');if(!Object.hasOwn(e,"format"))throw new Error('source object missing required "format" property');a[e.format]&&(t=e.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(e),")"))}if(null!==t){var u=document.createElement("source");u.src=t,o.appendChild(u),i.push(t)}}),o.hasChildNodes()&&Config.audio.preloadMetadata&&(o.preload="metadata"),this._finalize(o,i,clone(t))}},{key:"_copy",value:function(e){this._finalize(e.audio.cloneNode(!0),clone(e.sources),clone(e.originals))}},{key:"_finalize",value:function(e,t,r){var n,a,i=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{value:Object.freeze(t)},originals:{value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",function(){return i._error=!1}).on("error.AudioTrack",function(){return i._error=!0}).find("source:last-of-type").on("error.AudioTrack",function(){return i._trigger("error")}),n=this,a=function(e){if(i.audio)switch(e){case"loadwithscreen":if(i.hasSource()){var t=LoadScreen.lock();i.off(".AudioTrack_loadwithscreen").one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(t)}).load()}break;case"load":i.load();break;case"mute":i._updateAudioMute();break;case"rate":i._updateAudioRate();break;case"stop":i.stop();break;case"volume":i._updateAudioVolume();break;case"unload":i.unload()}else y(i)},s.set(n,a),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(e){triggerEvent(e,this.audio,{bubbles:!1})}},{key:"_destroy",value:function(){y(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new e(this)}},{key:"load",value:function(){var e=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach(function(t){var r=document.createElement("source");r.src=t,e.audio.appendChild(r)})}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var e=this.audio;for(e.preload="none";e.hasChildNodes();)e.removeChild(e.firstChild);e.load()}},{key:"play",value:function(){var e=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var t=".AudioTrack_play";return p()?this.audio.play():new Promise(function(r,n){e.isPlaying()?r():(jQuery(e.audio).off(t).one("error".concat(t," playing").concat(t," timeupdate").concat(t),function(a){jQuery(e.audio).off(t),"error"===a.type?n(new Error("unknown audio play error")):r()}),e.audio.play())})}},{key:"playWhenAllowed",value:function(){var e=this;return this.play().catch(function(t){if("NotAllowedError"!==t.name)throw t;onUserActivation(".AudioTrack_playWhenAllowed",function(){return e.audio.play()})})}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(e,t,r){var n=this;if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var a=Math.clamp(null==r?this.volume():r,0,1),i=Math.clamp(t,0,1);return a!==i?(this.volume(a),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",function(){var t,r;a<i?(t=a,r=i):(t=i,r=a);var o=Math.max(e,1),s=(i-a)/(o/.025);n._trigger(":fading"),n._faderId=setInterval(function(){n.isPlaying()?(n.volume(Math.clamp(n.volume()+s,t,r)),Config.audio.pauseOnFadeToZero&&0===n.volume()&&n.pause(),n.volume()===i&&(n.fadeStop(),n._trigger(":faded"))):n.fadeStop()},25)}),this.play()):void 0}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(e){return null==e?this.audio.loop:(this.audio.loop=!!e,this)}},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||l}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*u,.2,5)}},{key:"time",value:function(e){var t=this;if(null==e)return this.audio.currentTime;if("number"!=typeof e)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=e:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",function(){return t.audio.currentTime=e}),this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*c,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.on.apply(jQuery(this.audio),t),this}},{key:"one",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.one.apply(jQuery(this.audio),t),this}},{key:"off",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.off.apply(jQuery(this.audio),t),this}}])}();Object.defineProperties(f,{formats:{value:function(){var e=document.createElement("audio"),t=new Map;function r(r){return t.has(r)||t.set(r,""!==e.canPlayType(r).replace(/^no$/i,"")),t.get(r)}return Object.assign(Object.create(null),{aac:r("audio/aac"),caf:r("audio/x-caf")||r("audio/caf"),flac:r("audio/x-flac")||r("audio/flac"),mp3:r('audio/mpeg; codecs="mp3"')||r("audio/mpeg")||r("audio/mp3")||r("audio/mpa"),mpeg:r("audio/mpeg"),m4a:r("audio/x-m4a")||r("audio/m4a")||r("audio/aac"),mp4:r("audio/x-mp4")||r("audio/mp4")||r("audio/aac"),ogg:r("audio/ogg"),oga:r("audio/ogg"),opus:r('audio/ogg; codecs="opus"')||r("audio/opus"),wav:r('audio/wave; codecs="1"')||r('audio/wav; codecs="1"')||r("audio/wave")||r("audio/wav"),wave:r('audio/wave; codecs="1"')||r('audio/wav; codecs="1"')||r("audio/wave")||r("audio/wav"),weba:r("audio/webm"),webm:r("audio/webm")})}()}});var h=_createClass(function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(t)}},[{key:"_create",value:function(e){var t=this;this._finalize(e.map(function(e){if("object"!==_typeof(e))throw new Error("tracks parameter array members must be objects");var r,n,a,i;if(e instanceof f)r=!0,n=e.rate(),a=e.clone(),i=e.volume();else{if(!Object.hasOwn(e,"track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof f))throw new Error('track object\'s "track" property must be an AudioTrack object');r=Object.hasOwn(e,"own")&&e.own,n=Object.hasOwn(e,"rate")?e.rate:e.track.rate(),a=e.track,i=Object.hasOwn(e,"volume")?e.volume:e.track.volume()}return a.stop(),a.loop(!1),a.mute(!1),a.rate(n),a.volume(i),a.on("ended.AudioList",function(){return t._onEnd()}),{own:r,track:a,volume:i,rate:n}}))}},{key:"_copy",value:function(e){this._finalize(clone(e.tracks))}},{key:"_finalize",value:function(e){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(e)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.own}).forEach(function(e){return e.track._destroy()}),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach(function(e){return e.track.load()})}},{key:"unload",value:function(){this.stop(),this.tracks.forEach(function(e){return e.track.unload()})}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var e=this;return this.play().catch(function(t){if("NotAllowedError"!==t.name)throw t;onUserActivation(".AudioList_playWhenAllowed",function(){return e.play()})})}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(e,t,r){if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var n,a=Math.clamp(t,0,1)*this.current.volume;return null!=r&&(n=Math.clamp(r,0,1)*this.current.volume),this._volume=t,this.current.track.fade(e,a,n)}}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(e){return null==e?this._loop:(this._loop=!!e,this)}},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(e){var t=this;if(null==e)return this._shuffle;if(this._shuffle=!!e,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var r,n=this.queue.findIndex(function(e){return e===t.current});-1!==n&&(r=this.queue).push.apply(r,_toConsumableArray(this.queue.splice(0,n+1)))}return this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var e=this.queue.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining()),e}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var e;for(null!==this.current&&(this.current.track.stop(),this.current=null);e=this.queue.shift();)if(!e.track.isUnavailable()){this.current=e;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var e;this._drainQueue(),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks.filter(function(e){return!e.track.isUnavailable()}))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),g=function(){function e(t){if(_classCallCheck(this,e),!(t instanceof Set||t instanceof e))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(t instanceof e?t.trackIds:t)}})}return _createClass(e,[{key:"load",value:function(){e._run(this.trackIds,f.prototype.load)}},{key:"unload",value:function(){e._run(this.trackIds,f.prototype.unload)}},{key:"play",value:function(){e._run(this.trackIds,f.prototype.play)}},{key:"playWhenAllowed",value:function(){e._run(this.trackIds,f.prototype.playWhenAllowed)}},{key:"pause",value:function(){e._run(this.trackIds,f.prototype.pause)}},{key:"stop",value:function(){e._run(this.trackIds,f.prototype.stop)}},{key:"fade",value:function(t,r,n){if(null==t||null==r)throw new Error("fade requires parameters");e._run(this.trackIds,f.prototype.fade,t,r,n)}},{key:"fadeIn",value:function(t,r){if(null==t)throw new Error("fadeIn requires a parameter");e._run(this.trackIds,f.prototype.fadeIn,t,r)}},{key:"fadeOut",value:function(t,r){if(null==t)throw new Error("fadeOut requires a parameter");e._run(this.trackIds,f.prototype.fadeOut,t,r)}},{key:"fadeStop",value:function(){e._run(this.trackIds,f.prototype.fadeStop)}},{key:"loop",value:function(t){if(null==t)throw new Error("loop requires a parameter");return e._run(this.trackIds,f.prototype.loop,t),this}},{key:"mute",value:function(t){if(null==t)throw new Error("mute requires a parameter");return e._run(this.trackIds,f.prototype.mute,t),this}},{key:"rate",value:function(t){if(null==t)throw new Error("rate requires a parameter");return e._run(this.trackIds,f.prototype.rate,t),this}},{key:"time",value:function(t){if(null==t)throw new Error("time requires a parameter");return e._run(this.trackIds,f.prototype.time,t),this}},{key:"volume",value:function(t){if(null==t)throw new Error("volume requires a parameter");return e._run(this.trackIds,f.prototype.volume,t),this}},{key:"on",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,f.prototype.on].concat(r)),this}},{key:"one",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,f.prototype.one].concat(r)),this}},{key:"off",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,f.prototype.off].concat(r)),this}}],[{key:"_run",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];e.forEach(function(e){var r=a.get(e);r&&t.apply(r,n)})}}])}(),m=function(){var e=/\S/g,t=/[()]/g;function r(r,n){var a;if(e.lastIndex=n,null===(a=e.exec(r))||"("!==a[0])throw new Error('invalid ":not()" syntax: missing parenthesis');t.lastIndex=e.lastIndex;for(var i=e.lastIndex,o={str:"",nextMatch:-1},s=1;null!==(a=t.exec(r));)if("("===a[0]?++s:--s,s<1){o.nextMatch=t.lastIndex,o.str=r.slice(i,o.nextMatch-1);break}return o}return function e(t){for(var n,a=[],i=/:?[^\s:()]+/g;null!==(n=i.exec(t));){var o=n[0];if(":not"===o){if(0===a.length)throw new Error('invalid negation: no group ID preceded ":not()"');var s=a[a.length-1];if(!s.id.startsWith(":"))throw new Error('invalid negation of track "'.concat(s.id,'": only groups may be negated with ":not()"'));var u=r(t,i.lastIndex);if(-1===u.nextMatch)throw new Error('unknown error parsing ":not()"');i.lastIndex=u.nextMatch,s.not=e(u.str)}else a.push({id:o})}return a}}();function v(e){if(null==e)return l;b("mute",l=!!e)}function y(e){s.delete(e)}function b(e,t){s.forEach(function(r){return r(e,t)})}function w(e){return new f(e.map(function(e){if("data:"!==e.slice(0,5)&&Story.has(e)){var t=Story.get(e);if(t.tags.includes("Twine.audio"))return t.text.trim()}var n=r.exec(e);return null===n?e:{format:n[1],src:n[2]}}))}return Object.preventExtensions(Object.create(null,{tracks:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("track ID"),arguments.length<2&&e.push("sources"),new Error("no ".concat(e.join(" or ")," specified"))}var t=String(arguments[0]).trim(),r='track ID "'.concat(t,'"');if(n.test(t))throw new Error("invalid ".concat(r,": track IDs must not contain colons or whitespace"));var i,o=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{i=w(o)}catch(e){throw new Error("".concat(r,": error during track initialization: ").concat(e.message))}if(Config.debug&&!i.hasSource())throw new Error("".concat(r,": no supported audio sources found"));a.has(t)&&a.get(t)._destroy(),a.set(t,i)}},delete:{value:function(e){return a.has(e)&&a.get(e)._destroy(),a.delete(e)}},clear:{value:function(){a.forEach(function(e){return e._destroy()}),a.clear()}},has:{value:function(e){return a.has(e)}},get:{value:function(e){return a.get(e)||null}}}))},groups:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("group ID"),arguments.length<2&&e.push("track IDs"),new Error("no ".concat(e.join(" or ")," specified"))}var r=String(arguments[0]).trim(),o='group ID "'.concat(r,'"');if(!r.startsWith(":")||n.test(r.slice(1)))throw new Error("invalid ".concat(o,": group IDs must start with a colon and must not contain colons or whitespace"));if(t.includes(r))throw new Error("cannot clobber special ".concat(o));var s,u=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{s=new Set(u.map(function(e){if(!a.has(e))throw new Error('track "'.concat(e,'" does not exist'));return e}))}catch(e){throw new Error("".concat(o,": error during group initialization: ").concat(e.message))}i.set(r,Object.freeze(Array.from(s)))}},delete:{value:function(e){return i.delete(e)}},clear:{value:function(){i.clear()}},has:{value:function(e){return i.has(e)}},get:{value:function(e){return i.get(e)||null}}}))},lists:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("list ID"),arguments.length<2&&e.push("track IDs"),new Error("no ".concat(e.join(" or ")," specified"))}var t=String(arguments[0]).trim(),r='list ID "'.concat(t,'"');if(n.test(t))return this.error("invalid ".concat(r,": list IDs must not contain colons or whitespace"));var i,s=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{i=new h(s.map(function(e){if(null===e)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(e)){case"string":e={id:e};break;case"object":if(!Object.hasOwn(e,"id")&&!Object.hasOwn(e,"sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(Object.hasOwn(e,"id")&&Object.hasOwn(e,"sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(e),")"))}var t,r,n;if(Object.hasOwn(e,"id")){if("string"!=typeof e.id)throw new Error('"id" property must be a string');if(!a.has(e.id))throw new Error('track "'.concat(e.id,'" does not exist'));r=a.get(e.id)}else if(Object.hasOwn(e,"sources")){if(!Array.isArray(e.sources)||0===e.sources.length)throw new Error('"sources" property must be a non-empty array');if(Object.hasOwn(e,"own"))throw new Error('"own" property is not allowed with the "sources" property');try{r=w(e.sources),t=!0}catch(e){throw new Error("error during track initialization: ".concat(e.message))}if(Config.debug&&!r.hasSource())throw new Error("no supported audio sources found")}if(Object.hasOwn(e,"own")){if("boolean"!=typeof e.own)throw new Error('"own" property must be a boolean');(t=e.own)&&(r=r.clone())}if(Object.hasOwn(e,"volume")){if("number"!=typeof e.volume||Number.isNaN(e.volume)||!Number.isFinite(e.volume)||e.volume<0)throw new Error('"volume" property must be a non-negative finite number');n=e.volume}return{own:null!=t&&t,track:r,volume:null!=n?n:r.volume()}}))}catch(e){throw new Error("".concat(r,": error during playlist initialization: ").concat(e.message))}o.has(t)&&o.get(t)._destroy(),o.set(t,i)}},delete:{value:function(e){return o.has(e)&&o.get(e)._destroy(),o.delete(e)}},clear:{value:function(){o.forEach(function(e){return e._destroy()}),o.clear()}},has:{value:function(e){return o.has(e)}},get:{value:function(e){return o.get(e)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var e=String(arguments[0]).trim(),t=new Set;try{var r=function e(t){var r,o=t.id;switch(o){case":all":r=n;break;case":looped":r=n.filter(function(e){return a.get(e).loop()});break;case":muted":r=n.filter(function(e){return a.get(e).mute()});break;case":paused":r=n.filter(function(e){return a.get(e).isPaused()});break;case":playing":r=n.filter(function(e){return a.get(e).isPlaying()});break;case":stopped":r=n.filter(function(e){return a.get(e).isStopped()});break;default:if(o.startsWith(":")){var s=i.get(o);if(!s)throw new Error('group "'.concat(o,'" does not exist'));r=s}else r=[o]}if(Object.hasOwn(t,"not")){var u=t.not.map(function(t){return e(t)}).flat(1/0);r=r.filter(function(e){return!u.includes(e)})}return r},n=Array.from(a.keys());m(e).forEach(function(e){return r(e).forEach(function(e){if(!a.has(e))throw new Error('track "'.concat(e,'" does not exist'));t.add(e)})})}catch(e){throw new Error("error during runner initialization: ".concat(e.message))}return new g(t)}},load:{value:function(){b("load")}},loadWithScreen:{value:function(){b("loadwithscreen")}},mute:{value:v},muteOnHidden:{value:function(e){if(!Visibility.isEnabled())return!1;if(null==e)return d;var t=".SimpleAudio_masterMuteOnHidden";if(d=!!e){var r="".concat(Visibility.changeEvent).concat(t);jQuery(document).off(t).on(r,function(){return v(Visibility.isHidden())}),Visibility.isHidden()&&v(!0)}else jQuery(document).off(t)}},rate:{value:function(e){if(null==e)return u;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("rate must be a finite number");b("rate",u=Math.clamp(e,.2,5))}},stop:{value:function(){b("stop")}},unload:{value:function(){b("unload")}},volume:{value:function(e){if(null==e)return c;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("volume must be a finite number");b("volume",c=Math.clamp(e,0,1))}}}))}(),State=function(){var e=[],t=u(),r=-1,n=[],a=null,i=Object.create(null);function o(t){var i={index:r};return t?i.history=clone(e):i.delta=g(e),n.length>0&&(i.expired=Array.from(n)),null!==a&&(i.seed=a.seed),i}function s(t,i){if(null==t)throw new Error("state object is null or undefined");if(!Object.hasOwn(t,i?"history":"delta")||0===t[i?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!Object.hasOwn(t,"index"))throw new Error("state object has no index");if(null!==a&&!Object.hasOwn(t,"seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===a&&Object.hasOwn(t,"seed"))throw new Error("state object has seed, but PRNG is disabled");e=i?clone(t.history):m(t.delta),r=t.index,n=Object.hasOwn(t,"expired")?Array.from(t.expired):[],Object.hasOwn(t,"seed")&&(a.seed=t.seed),c(r)}function u(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function c(r){if(null==r)throw new Error("moment activation attempted with null or undefined");switch(_typeof(r)){case"object":t=clone(r);break;case"number":if(p())throw new Error("moment activation attempted with index on empty history");if(r<0||r>=d())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(d()-1,"], got ").concat(r));t=clone(e[r]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(r),'"; must be an object or valid history stack index'))}return null!==a&&(a=function(e){for(var t=v(e.seed),r=e.pull;r>0;--r)t.random();return t}({seed:a.seed,pull:t.pull})),session.set("state",o()),triggerEvent(":historyupdate"),t}function l(){return r+1}function d(){return e.length}function p(){return 0===e.length}function f(){return e.length>0?e[e.length-1]:null}function h(e){return!(null==e||e<0||e>=d()||e===r||(c(r=e),0))}function g(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[e[0]],r=1,n=e.length;r<n;++r)t.push(Diff.diff(e[r-1],e[r]));return t}function m(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.patch(t[r-1],e[r]));return t}function v(e,t){return new Math.seedrandom(e,{entropy:Boolean(t),pass:function(e,t){return Object.create(null,{prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this.prng()}}})}})}function y(){i=Object.create(null)}var b="metadata";function w(e){if("string"!=typeof e)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(e),")"));var t=storage.get(b);t&&Object.hasOwn(t,e)&&(1===Object.keys(t).length?storage.delete(b):(delete t[e],storage.set(b,t)))}return Object.preventExtensions(Object.create(null,{reset:{value:function(){session.delete("state"),e=[],t=u(),r=-1,n=[],a=null===a?null:v(a.seed),y()}},restore:{value:function(){var e=session.get("state");return null!=e&&(s(e),!0)}},marshalForSave:{value:function(){return o(!0)}},unmarshalForSave:{value:function(e){return s(e,!0)}},expired:{get:function(){return n}},turns:{get:function(){return n.length+l()}},passages:{get:function(){return n.concat(e.slice(0,l()).map(function(e){return e.title}))}},hasPlayed:{value:function(t){return!(null==t||""===t||!n.includes(t)&&!e.slice(0,l()).some(function(e){return e.title===t}))}},active:{get:function(){return t}},activeIndex:{get:function(){return r}},passage:{get:function(){return t.title}},variables:{get:function(){return t.variables}},history:{get:function(){return e}},length:{get:l},size:{get:d},isEmpty:{value:p},current:{get:function(){return e.length>0?e[r]:null}},top:{get:f},bottom:{get:function(){return e.length>0?e[0]:null}},index:{value:function(t){return p()||t<0||t>r?null:e[t]}},peek:{value:function(t){if(p())return null;var r=1+(t?Math.abs(t):0);return r>l()?null:e[l()-r]}},has:{value:function(t){if(p()||null==t||""===t)return!1;for(var n=r;n>=0;--n)if(e[n].title===t)return!0;return!1}},create:{value:function(i){for(l()<d()&&e.splice(l(),d()-l()),e.push(u(i,t.variables)),a&&(f().pull=a.pull);d()>Config.history.maxStates;)n.push(e.shift().title);return c(r=d()-1),l()}},goTo:{value:h},go:{value:function(e){return null!=e&&0!==e&&h(r+e)}},deltaEncode:{value:g},deltaDecode:{value:m},prng:{value:Object.preventExtensions(Object.create(null,{init:{value:function(e,r){if(!p())throw new Error("State.prng.init must be called during initialization, within either ".concat("the story JavaScript section"," or the StoryInit special passage"));a=v(e,Boolean(r)),t.pull=a.pull}},isEnabled:{value:function(){return null!==a}},pull:{get:function(){return null!==a?a.pull:NaN}},seed:{get:function(){return null!==a?a.seed:null}}}))},random:{value:function(){return null!==a?a.random():Math.random()}},clearTemporary:{value:y},temporary:{get:function(){return i}},getVar:{value:function(e){try{return Scripting.evalTwineScript(e)}catch(e){}}},setVar:{value:function(e,t){try{return Scripting.evalTwineScript("".concat(e," = SCRIPT$DATA$"),null,t),!0}catch(e){}return!1}},metadata:{value:Object.preventExtensions(Object.create(null,{clear:{value:function(){storage.delete(b)}},delete:{value:w},entries:{value:function(){var e=storage.get(b);return e&&Object.entries(e)}},get:{value:function(e){if("string"!=typeof e)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(e),")"));var t=storage.get(b);return t&&Object.hasOwn(t,e)?t[e]:undefined}},has:{value:function(e){if("string"!=typeof e)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(e),")"));var t=storage.get(b);return t&&Object.hasOwn(t,e)}},keys:{value:function(){var e=storage.get(b);return e&&Object.keys(e)}},set:{value:function(e,t){if("string"!=typeof e)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(e),")"));if(void 0===t)w(e);else{var r=storage.get(b)||{};r[e]=t,storage.set(b,r)}}},size:{get:function(){var e=storage.get(b);return e?Object.keys(e).length:0}}}))}}))}(),Scripting=function(){function toStringOrDefault(e){return console.warn("[DEPRECATED] toStringOrDefault() is deprecated."),stringFrom(e)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(e){if("string"!=typeof e)throw new TypeError("forget key parameter must be a string (received: ".concat(getTypeOf(e),")"));State.metadata.delete(e)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0;r<e.length;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0;a<e.length&&n>-1;++a){var i=t.lastIndexOf(e[a]);n=Math.min(n,-1===i?-1:r-i)}return n}function memorize(e,t){if("string"!=typeof e)throw new TypeError("memorize key parameter must be a string (received: ".concat(getTypeOf(e),")"));State.metadata.set(e,t)}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){var e,t;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:e=0,t=Math.trunc(arguments[0]);break;default:e=Math.trunc(arguments[0]),t=Math.trunc(arguments[1])}if(!Number.isInteger(e))throw new TypeError("random min parameter must be an integer");if(!Number.isInteger(t))throw new TypeError("random max parameter must be an integer");if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){var e,t;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:e=0,t=Number(arguments[0]);break;default:e=Number(arguments[0]),t=Number(arguments[1])}if(Number.isNaN(e)||!Number.isFinite(e))throw new TypeError("randomFloat min parameter must be a number");if(Number.isNaN(t)||!Number.isFinite(t))throw new TypeError("randomFloat max parameter must be a number");if(e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function recall(e,t){if("string"!=typeof e)throw new TypeError("recall key parameter must be a string (received: ".concat(getTypeOf(e),")"));return State.metadata.has(e)?State.metadata.get(e):t}function tags(){if(0===arguments.length)return Story.get(State.passage).tags;for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0;r<e.length;++r)t=t.concat(Story.get(e[r]).tags);return t}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0;n<e.length&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0;i<r.length;++i){var o=r[i];if(n.has(o))n.get(o)&&++a;else{var s=Story.get(o).tags;if(s.length>0){for(var u=0,c=0;c<t;++c)s.includes(e[c])&&++u;u===t?(++a,n.set(o,!0)):n.set(o,!1)}}}return a}var _ref9=function(){function e(e){return parseURL(e).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function t(t){return new Promise(function(r,n){var a,i;if("string"==typeof t)a=t.trim().toLowerCase().endsWith(".mjs")?"module":"text/javascript",i=t;else{if("object"!==_typeof(t))throw new Error("importScripts url parameter must be a string or object");a=t.type,i=t.src}jQuery(document.createElement("script")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importScripts failed to load the script "'.concat(i,'"')))}).appendTo(document.head).attr({id:"script-imported-".concat(e(i)),type:a,src:i})})}function r(t){return new Promise(function(r,n){if("string"!=typeof t)throw new Error("importStyles url parameter must be a string");jQuery(document.createElement("link")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importStyles failed to load the stylesheet "'.concat(t,'"')))}).appendTo(document.head).attr({id:"style-imported-".concat(e(t)),rel:"stylesheet",href:t})})}function n(e){return e.reduce(function(e,t){return e.then(t)},Promise.resolve())}return{importScripts:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return Promise.all(r.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return t(e)}})):t(e)}))},importStyles:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.all(t.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return r(e)}})):r(e)}))}}}(),importScripts=_ref9.importScripts,importStyles=_ref9.importStyles,desugar=function(){var e=enumFrom({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),t=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","(?:\\.{3})","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),r=new RegExp("^".concat(Patterns.variable));function n(n){t.lastIndex=0;for(var a,i=n;null!==(a=t.exec(i));)if(a[1]){var s=a[1],u=o(s);u!==s&&(i=i.splice(a.index,s.length,u),t.lastIndex+=u.length-s.length)}else if(a[2]){var c=a[2];if("$"===c||"_"===c)continue;r.test(c)&&(c=c[0]),e[c]&&(i=i.splice(a.index,c.length,e[c]),t.lastIndex+=e[c].length-c.length)}return i}var a=/\$\{/g,i=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function o(e){a.lastIndex=0;for(var r,o=e;null!==(r=a.exec(o));){var s=r.index+2,u=s,c=1,l=void 0;for(i.lastIndex=s;null!==(l=i.exec(o));)if(l[1]?++c:l[2]&&--c,0===c){u=l.index;break}if(u>s){var d=t.lastIndex,p=o.slice(s,u),f=n(p);t.lastIndex=d,o=o.splice(s,p.length,f),a.lastIndex+=f.length-p.length}}return o}return n}();function evalJavaScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,desugar(String(code)),output,data)}return Object.preventExtensions(Object.create(null,{desugar:{value:desugar},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript},parse:{value:desugar}}))}(),_ref10=function(){var e=_createClass(function e(t,r){if(_classCallCheck(this,e),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:t},initial:{value:r},state:{writable:!0,value:r},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})},[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(e){this.pos-=e||1}},{key:"forward",value:function(e){this.pos+=e||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(e){var t=this.next();return!(-1===t||!e.includes(t)&&(this.backup(),1))}},{key:"acceptRe",value:function(e){var t=this.next();return!(-1===t||!e.test(t)&&(this.backup(),1))}},{key:"acceptRun",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.includes(t))break}this.backup()}},{key:"acceptRunRe",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.test(t))break}this.backup()}},{key:"emit",value:function(e){this.items.push({type:e,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(e,t){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:e,message:t,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(e){var t=e.reduce(function(e,t,r){return e[t]=r,e},{});return Object.freeze(Object.assign(Object.create(null),t))}}]);return{EOF:-1,Lexer:e}}(),EOF=_ref10.EOF,Lexer=_ref10.Lexer,Wikifier=function(){var e,t,r,n,a=0,i=function(){function e(t,r,n){_classCallCheck(this,e),e.Parser.Profile.isEmpty()&&e.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(r)},options:{writable:!0,value:Object.assign({profile:"all"},n)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),this.output=null==t?document.createDocumentFragment():t instanceof jQuery?t[0]:t;try{++a,this.subWikify(this.output),1===a&&(Object.hasOwn(this.options,"cleanup")&&null!=this.options.cleanup?this.options.cleanup:Config.cleanupWikifierOutput)&&convertBreaks(this.output)}finally{--a}}return _createClass(e,[{key:"subWikify",value:function(t,r,n){var a,i,o=this.output;this.output=t,e.Option.length>0&&(a=Object.assign(a||{},e.Option.options)),null!==n&&"object"===_typeof(n)&&(a=Object.assign(a||{},n)),a&&(i=this.options,this.options=Object.assign({},this.options,a));var s,u,c=e.Parser.Profile.get(this.options.profile),l=r?new RegExp("(?:".concat(r,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(c.parserRegExp.lastIndex=this.nextMatch,l&&(l.lastIndex=this.nextMatch),u=c.parserRegExp.exec(this.source),(s=l?l.exec(this.source):null)&&(!u||s.index<=u.index))return s.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,s.index),this.matchStart=s.index,this.matchLength=s[0].length,this.matchText=s[0],this.nextMatch=l.lastIndex,this.output=o,void(i&&(this.options=i));if(u){u.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,u.index),this.matchStart=u.index,this.matchLength=u[0].length,this.matchText=u[0],this.nextMatch=c.parserRegExp.lastIndex;for(var d=void 0,p=1,f=u.length;p<f;++p)if(u[p]){d=p-1;break}if(c.parsers[d].handler(this),null!=TempState.break)break}}while(s||u);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=o,i&&(this.options=i)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.rawArgs() is deprecated."),this._rawArgs}},{key:"fullArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.fullArgs() is deprecated."),Scripting.desugar(this._rawArgs)}}],[{key:"wikifyEval",value:function(t){var r=document.createDocumentFragment();new e(r,t);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(errorPrologRegExp,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}}])}();return Object.defineProperty(i,"Option",{value:(e=[],Object.preventExtensions(Object.create(null,{length:{get:function(){return e.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(e)))}},clear:{value:function(){e=[]}},get:{value:function(t){return e[t]}},pop:{value:function(){return e.pop()}},push:{value:function(t){if("object"!==_typeof(t)||null===t)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(getTypeOf(t),")"));return e.push(t)}}})))}),Object.defineProperty(i,"Parser",{value:function(){var e,t=[];function r(e){return!!t.find(function(t){return t.name===e})}return Object.preventExtensions(Object.create(null,{parsers:{get:function(){return t}},add:{value:function(e){if("object"!==_typeof(e))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!Object.hasOwn(e,"name"))throw new Error('parser object missing required "name" property');if("string"!=typeof e.name)throw new Error('parser object "name" property must be a string');if(!Object.hasOwn(e,"match"))throw new Error('parser object missing required "match" property');if("string"!=typeof e.match)throw new Error('parser object "match" property must be a string');if(!Object.hasOwn(e,"handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof e.handler)throw new Error('parser object "handler" property must be a function');if(Object.hasOwn(e,"profiles")&&!Array.isArray(e.profiles))throw new Error('parser object "profiles" property must be an array');if(r(e.name))throw new Error('cannot clobber existing parser "'.concat(e.name,'"'));t.push(e)}},delete:{value:function(e){var r=t.find(function(t){return t.name===e});r&&t.delete(r)}},isEmpty:{value:function(){return 0===t.length}},has:{value:r},get:{value:function(e){return t.find(function(t){return t.name===e})||null}},Profile:{value:Object.preventExtensions(Object.create(null,{profiles:{get:function(){return e}},compile:{value:function(){var r=t,n=r.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return e=Object.freeze({all:{parsers:r,parserRegExp:new RegExp(r.map(function(e){return"(".concat(e.match,")")}).join("|"),"gm")},core:{parsers:n,parserRegExp:new RegExp(n.map(function(e){return"(".concat(e.match,")")}).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(e)||0===Object.keys(e).length}},has:{value:function(t){return"object"===_typeof(e)&&Object.hasOwn(e,t)}},get:{value:function(t){if("object"!==_typeof(e)||!Object.hasOwn(e,t))throw new Error('nonexistent parser profile "'.concat(t,'"'));return e[t]}}}))}}))}()}),Object.defineProperties(i,{helpers:{value:{}},isExternalLink:{value:isExternalLink},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.desugar},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(i.helpers,{inlineCss:{value:(r=new RegExp(Patterns.inlineCss,"gm"),n=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(e){var t,a={classes:[],id:"",styles:{}};do{r.lastIndex=e.nextMatch;var i=r.exec(e.source);if(t=i&&i.index===e.nextMatch){if(i[1])a.styles[cssPropToDOMProp(i[1])]=i[2].trim();else if(i[3])a.styles[cssPropToDOMProp(i[3])]=i[4].trim();else if(i[5]){var o=void 0;for(n.lastIndex=0;null!==(o=n.exec(i[5]));)"."===o[1]?a.classes.push(o[2]):a.id=o[2]}e.nextMatch=r.lastIndex}}while(t);return a})},evalText:{value:function(e){var t;try{switch(_typeof(t=Scripting.evalTwineScript(e))){case"string":""===t.trim()&&(t=e);break;case"number":t=String(t);break;default:t=e}}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:i.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},shadowHandler:{value:(t=null,function(e){var r=Object.create(null);return t||function(){if(!t&&!(t=i.Parser.get("macro")))throw new Error('cannot find "macro" parser')}(),t.context&&t.context.shadowView.forEach(function(e){var t=e.slice(1),n="$"===e[0]?State.variables:State.temporary;r[e]=n[t]}),function(){var t=Object.keys(r),n=t.length>0?{}:null;try{return t.forEach(function(e){var t=e.slice(1),a="$"===e[0]?State.variables:State.temporary;Object.hasOwn(a,t)&&(n[t]=a[t]),a[t]=r[e]}),Scripting.evalJavaScript(e)}finally{t.forEach(function(e){var t=e.slice(1),a="$"===e[0]?State.variables:State.temporary;r[e]=a[t],Object.hasOwn(n,t)?a[t]=n[t]:delete a[t]})}}})},parseSquareBracketedMarkup:{value:function(){var e=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),t=Lexer.enumFromNames(["None","LTR","RTL"]);function r(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function n(t){if(!t.accept("["))return t.error(e.Error,"malformed square-bracketed markup");if(t.accept("["))t.data.isLink=!0,t.emit(e.LinkMeta);else{if(t.accept("<>"),!(t.accept("Ii")&&t.accept("Mm")&&t.accept("Gg")&&t.accept("[")))return t.error(e.Error,"malformed square-bracketed markup");t.data.isLink=!1,t.emit(e.ImageMeta)}return t.depth=2,a}function a(n){for(var a=n.data.isLink?"link":"image",s=t.None;;)switch(n.next()){case EOF:case"\n":return n.error(e.Error,"unterminated ".concat(a," markup"));case'"':if(r(n,'"')===EOF)return n.error(e.Error,"unterminated double quoted string in ".concat(a," markup"));break;case"|":s===t.None&&(s=t.LTR,n.backup(),n.emit(e.Text),n.forward(),n.emit(e.DelimLTR));break;case"-":s===t.None&&">"===n.peek()&&(s=t.LTR,n.backup(),n.emit(e.Text),n.forward(2),n.emit(e.DelimLTR));break;case"<":s===t.None&&"-"===n.peek()&&(s=t.RTL,n.backup(),n.emit(n.data.isLink?e.Link:e.Source),n.forward(2),n.emit(e.DelimRTL));break;case"[":++n.depth;break;case"]":if(--n.depth,1===n.depth)switch(n.peek()){case"[":return++n.depth,n.backup(),s===t.RTL?n.emit(e.Text):n.emit(n.data.isLink?e.Link:e.Source),n.forward(2),n.emit(e.InnerMeta),n.data.isLink?o:i;case"]":return--n.depth,n.backup(),s===t.RTL?n.emit(e.Text):n.emit(n.data.isLink?e.Link:e.Source),n.forward(2),n.emit(e.RightMeta),null;default:return n.error(e.Error,"malformed ".concat(a," markup"))}}}function i(t){for(var n=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(e.Error,"unterminated ".concat(n," markup"));case'"':if(r(t,'"')===EOF)return t.error(e.Error,"unterminated double quoted string in ".concat(n," markup link component"));break;case"[":++t.depth;break;case"]":if(--t.depth,1===t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),t.emit(e.Link),t.forward(2),t.emit(e.InnerMeta),o;case"]":return--t.depth,t.backup(),t.emit(e.Link),t.forward(2),t.emit(e.RightMeta),null;default:return t.error(e.Error,"malformed ".concat(n," markup"))}}}function o(t){for(var n=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(e.Error,"unterminated ".concat(n," markup"));case'"':if(r(t,'"')===EOF)return t.error(e.Error,"unterminated double quoted string in ".concat(n," markup setter component"));break;case"'":if(r(t,"'")===EOF)return t.error(e.Error,"unterminated single quoted string in ".concat(n," markup setter component"));break;case"[":++t.depth;break;case"]":if(--t.depth,1===t.depth)return"]"!==t.peek()?t.error(e.Error,"malformed ".concat(n," markup")):(--t.depth,t.backup(),t.emit(e.Setter),t.forward(2),t.emit(e.RightMeta),null)}}return function(t){var r=new Lexer(t.source,n);r.start=r.pos=t.matchStart;var a={},i=r.run(),o=i.last();return o&&o.type===e.Error?a.error=o.message:i.forEach(function(t){var r=t.text.trim();switch(t.type){case e.ImageMeta:a.isImage=!0,"<"===r[1]?a.align="left":">"===r[1]&&(a.align="right");break;case e.LinkMeta:a.isLink=!0;break;case e.Link:"~"===r[0]?(a.forceInternal=!0,a.link=r.slice(1)):a.link=r;break;case e.Setter:a.setter=r;break;case e.Source:a.source=r;break;case e.Text:a.text=r}}),a.pos=r.pos,a}}()}}),i}();!function(){function e(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){Wikifier.helpers.hasBlockContext(e.output.childNodes)?e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator):jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(Wikifier.helpers.hasBlockContext(e.output.childNodes)){var t,r,n=[e.output],a=0,i=e.matchLength;do{if(i>a)for(r=a;r<i;++r)n.push(jQuery(document.createElement("blockquote")).appendTo(n[n.length-1]).get(0));else if(i<a)for(r=a;r>i;--r)n.pop();a=i,e.subWikify(n[n.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(n[n.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);(t=o&&o.index===e.nextMatch)&&(i=o[0].length,e.nextMatch+=o[0].length)}while(t)}else jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r,n=e.nextMatch,a=this.working.name,i=this.working.arguments;try{if(!(r=Macro.get(a))){if(Macro.tags.has(a)){var o=Macro.tags.get(a);return appendError(e.output,"child tag <<".concat(a,">> was found outside of a call to its parent macro").concat(1===o.length?"":"s"," <<").concat(o.join(">>, <<"),">>"),e.source.slice(t,e.nextMatch))}return appendError(e.output,"macro <<".concat(a,">> does not exist"),e.source.slice(t,e.nextMatch))}var s=null;if(void 0!==r.tags&&!(s=this.parseBody(e,r)))return e.nextMatch=n,appendError(e.output,"cannot find a closing tag for macro <<".concat(a,">>"),"".concat(e.source.slice(t,e.nextMatch),"…"));if("function"!=typeof r.handler)return appendError(e.output,"macro <<".concat(a,">> handler function ").concat(void 0===r.handler?"does not exist":"is not a function"),e.source.slice(t,e.nextMatch));var u=s?s[0].args:this.createArgs(i,this.skipArgs(r,r.name));if(void 0!==r._MACRO_API){this.context=new MacroContext({macro:r,name:a,args:u,payload:s,source:e.source.slice(t,e.nextMatch),parent:this.context,parser:e});try{r.handler.call(this.context)}finally{this.context=this.context.parent}}else{console.warn("[DEPRECATED] The legacy macro API, used by <<".concat(a,">>, is deprecated."));var c=e._rawArgs;e._rawArgs=i;try{r.handler(e.output,a,u,e,s)}finally{e._rawArgs=c}}}catch(n){return appendError(e.output,"cannot execute ".concat(r&&r.isWidget?"widget":"macro"," <<").concat(a,">>: ").concat(n.message),e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1]||(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,0))},parseBody:function(e,t){for(var r=this.working.name,n="/".concat(r),a="end".concat(r),i=!!Array.isArray(t.tags)&&t.tags,o=[],s=-1,u=1,c=this.working.source,l=this.working.name,d=this.working.arguments,p=e.nextMatch;-1!==(e.matchStart=e.source.indexOf(this.match,e.nextMatch));)if(this.parseTag(e)){var f=this.working.source,h=this.working.name,g=this.working.arguments,m=this.working.index,v=e.nextMatch,y=""!==g.trim();switch(h){case r:++u;break;case a:case n:if(y)throw e.nextMatch=m+2+h.length,new Error('malformed closing tag: "'.concat(f,'"'));--u;break;default:if(y&&(h.startsWith("/")||h.startsWith("end"))){this.lookahead.lastIndex=e.nextMatch=m+2+h.length;continue}if(1===u&&i)for(var b=0,w=i.length;b<w;++b)h===i[b]&&(o.push({source:c,name:l,arguments:d,args:this.createArgs(d,this.skipArgs(t,l)),contents:e.source.slice(p,m)}),c=f,l=h,d=g,p=v)}if(0===u){o.push({source:c,name:l,arguments:d,args:this.createArgs(d,this.skipArgs(t,l)),contents:e.source.slice(p,m)}),s=v;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return-1!==s?(e.nextMatch=s,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.desugar(e)}}),r},skipArgs:function(e,t){if(void 0!==e.skipArgs){var r=e.skipArgs;return"boolean"==typeof r&&r||Array.isArray(r)&&r.includes(t)}return void 0!==e.skipArg0&&e.skipArg0&&e.name===t},parseArgs:function(){var e=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),t=new RegExp(Patterns.space),r=new RegExp(Patterns.notSpace),n=new RegExp("^".concat(Patterns.variable));function a(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function i(e){var t=e.source.slice(e.pos).search(r);if(t===EOF)return null;switch(0!==t&&(e.pos+=t,e.ignore()),e.next()){case"`":return o;case'"':return s;case"'":return u;case"[":return c;default:return l}}function o(t){return a(t,"`")===EOF?t.error(e.Error,"unterminated backquote expression"):(t.emit(e.Expression),i)}function s(t){return a(t,'"')===EOF?t.error(e.Error,"unterminated double quoted string"):(t.emit(e.String),i)}function u(t){return a(t,"'")===EOF?t.error(e.Error,"unterminated single quoted string"):(t.emit(e.String),i)}function c(t){var r;if(t.accept("<>IiMmGg")?(r="image",t.acceptRun("<>IiMmGg")):r="link",!t.accept("["))return t.error(e.Error,"malformed ".concat(r," markup"));t.depth=2;e:for(;;)switch(t.next()){case"\\":var n=t.next();if(n!==EOF&&"\n"!==n)break;case EOF:case"\n":return t.error(e.Error,"unterminated ".concat(r," markup"));case"[":++t.depth;break;case"]":if(--t.depth,t.depth<0)return t.error(e.Error,"unexpected right square bracket ']'");if(1===t.depth){if("]"===t.next()){--t.depth;break e}t.backup()}}return t.emit(e.SquareBracket),i}function l(r){var n=r.source.slice(r.pos).search(t);return r.pos=n===EOF?r.source.length:r.pos+n,r.emit(e.Bareword),n===EOF?null:i}return function(t){var r=new Lexer(t,i),a=[];return r.run().forEach(function(t){var r=t.text;switch(t.type){case e.Error:throw new Error('unable to parse macro argument "'.concat(r,'": ').concat(t.message));case e.Bareword:if(n.test(r))r=State.getVar(r);else if(/^(?:settings|setup)[.[]/.test(r))try{r=Scripting.evalTwineScript(r)}catch(e){throw new Error('unable to parse macro argument "'.concat(r,'": ').concat(e.message))}else if("null"===r)r=null;else if("undefined"===r)r=undefined;else if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else{var i=Number(r);Number.isNaN(i)||(r=i)}break;case e.Expression:if(""===(r=r.slice(1,-1).trim()))r=undefined;else try{r=Scripting.evalTwineScript("(".concat(r,")"))}catch(e){throw new Error('unable to parse macro argument expression "'.concat(r,'": ').concat(e.message))}break;case e.String:try{r=Scripting.evalJavaScript(r)}catch(e){throw new Error('unable to parse macro argument string "'.concat(r,'": ').concat(e.message))}break;case e.SquareBracket:var o=Wikifier.helpers.parseSquareBracketedMarkup({source:r,matchStart:0});if(Object.hasOwn(o,"error"))throw new Error('unable to parse macro argument "'.concat(r,'": ').concat(o.error));if(o.pos<r.length)throw new Error('unable to parse macro argument "'.concat(r,'": unexpected character(s) "').concat(r.slice(o.pos),'" (pos: ').concat(o.pos,")"));o.isLink?((r={isLink:!0}).count=Object.hasOwn(o,"text")?2:1,r.link=Wikifier.helpers.evalPassageId(o.link),r.text=Object.hasOwn(o,"text")?Wikifier.helpers.evalText(o.text):r.link,r.external=!o.forceInternal&&Wikifier.isExternalLink(r.link),r.setFn=Object.hasOwn(o,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(o.setter)):null):o.isImage&&(r=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.name)}return t}(Wikifier.helpers.evalPassageId(o.source)),Object.hasOwn(o,"align")&&(r.align=o.align),Object.hasOwn(o,"text")&&(r.title=Wikifier.helpers.evalText(o.text)),Object.hasOwn(o,"link")&&(r.link=Wikifier.helpers.evalPassageId(o.link),r.external=!o.forceInternal&&Wikifier.isExternalLink(r.link)),r.setFn=Object.hasOwn(o,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(o.setter)):null)}a.push(r)}),a}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(Object.hasOwn(t,"error"))e.outputText(e.output,e.matchStart,e.nextMatch);else{e.nextMatch=t.pos;var r=Wikifier.helpers.evalPassageId(t.link),n=Object.hasOwn(t,"text")?Wikifier.helpers.evalText(t.text):r,a=Object.hasOwn(t,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(t.setter)):null,i=(Config.debug?new DebugView(e.output,"link-markup","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!Wikifier.isExternalLink(r)?Wikifier.createInternalLink(i,r,n,a):Wikifier.createExternalLink(i,r,n)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){e.outputText(Wikifier.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(Object.hasOwn(t,"error"))e.outputText(e.output,e.matchStart,e.nextMatch);else{var r;e.nextMatch=t.pos,Config.debug&&(r=new DebugView(e.output,"image-markup",Object.hasOwn(t,"link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch))).modes({block:!0});var n,a=Object.hasOwn(t,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(t.setter)):null,i=(Config.debug?r:e).output;if(Object.hasOwn(t,"link")){var o=Wikifier.helpers.evalPassageId(t.link);(i=t.forceInternal||!Wikifier.isExternalLink(o)?Wikifier.createInternalLink(i,o,null,a):Wikifier.createExternalLink(i,o)).classList.add("link-image")}if(i=jQuery(document.createElement("img")).appendTo(i).get(0),"data:"!==(n=Wikifier.helpers.evalPassageId(t.source)).slice(0,5)&&Story.has(n)){var s=Story.get(n);s.tags.includes("Twine.image")&&(i.setAttribute("data-passage",s.name),n=s.text.trim())}i.src=n,Object.hasOwn(t,"text")&&(i.title=Wikifier.helpers.evalText(t.text)),Object.hasOwn(t,"align")&&(i.align=t.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){var r=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(t[1]).appendTo(r),r.appendTo(e.output),e.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(e){var t=Wikifier.helpers.inlineCss(e);this.blockRe.lastIndex=e.nextMatch;var r=this.blockRe.exec(e.source),n=r&&r.index===e.nextMatch,a=jQuery(document.createElement(n?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?a.addClass("marked"):(t.classes.forEach(function(e){return a.addClass(e)}),""!==t.id&&a.attr("id",t.id),a.css(t.styles)),n?(e.nextMatch+=r[0].length,e.subWikify(a[0],"\\n?".concat(this.terminator))):e.subWikify(a[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+\\s*$",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(e){var t=State.getVar(e.matchText);null==t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,stringFrom(t))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(e){var t=e.matchText.slice(1),r=Template.get(t),n=null;switch(r instanceof Array&&(r=r.random()),_typeof(r)){case"function":try{n=stringFrom(r.call({name:t}))}catch(r){return appendError(e.output,"cannot execute function template ?".concat(t,": ").concat(r.message),e.source.slice(e.matchStart,e.nextMatch))}break;case"string":n=r}null===n?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"template",e.matchText,e.matchText):e).output,n)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){Wikifier.helpers.hasBlockContext(e.output.childNodes)?e.subWikify(jQuery(document.createElement("h".concat(e.matchLength))).appendTo(e.output).get(0),this.terminator):jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(Wikifier.helpers.hasBlockContext(e.output.childNodes)){var t,r=jQuery(document.createElement("table")).appendTo(e.output).get(0),n=[],a=null,i=null,o=0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(t=s&&s.index===e.nextMatch){var u=s[2];"k"===u?(r.className=s[1],e.nextMatch+=s[0].length+1):(u!==a&&(a=u,i=jQuery(document.createElement(this.rowTypes[u])).appendTo(r)),"c"===a?(i.css("caption-side",0===o?"top":"bottom"),e.nextMatch+=1,e.subWikify(i[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(i).get(0),n),++o)}}while(t)}else jQuery(e.output).append(document.createTextNode(e.matchText))},rowHandler:function(e,t,r){var n,a=this,i=new RegExp(this.cellPattern,"gm"),o=0,s=1,u=function(){i.lastIndex=e.nextMatch;var u=i.exec(e.source);if(n=u&&u.index===e.nextMatch){if("~"===u[1]){var c=r[o];c&&(++c.rowCount,c.$element.attr("rowspan",c.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++s,e.nextMatch=u.index+u[0].length-1;else{if(u[2])return e.nextMatch=u.index+u[0].length,1;++e.nextMatch;for(var l,d=Wikifier.helpers.inlineCss(e),p=!1,f=!1;" "===e.source.substr(e.nextMatch,1);)p=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(l=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):l=jQuery(document.createElement("td")).appendTo(t),r[o]={rowCount:1,$element:l},s>1&&(l.attr("colspan",s),s=1),e.subWikify(l[0],a.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(f=!0),d.classes.forEach(function(e){return l.addClass(e)}),""!==d.id&&l.attr("id",d.id),p&&f?d.styles["text-align"]="center":p?d.styles["text-align"]="right":f&&(d.styles["text-align"]="left"),l.css(d.styles),e.nextMatch=e.nextMatch-1}++o}};do{if(u())break}while(n)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(Wikifier.helpers.hasBlockContext(e.output.childNodes)){e.nextMatch=e.matchStart;var t,r,n=[e.output],a=null,i=0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(t=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",u=o[0].length;if(e.nextMatch+=o[0].length,u>i)for(r=i;r<u;++r)n.push(jQuery(document.createElement(s)).appendTo(n[n.length-1]).get(0));else if(u<i)for(r=i;r>u;--r)n.pop();else u===i&&s!==a&&(n.pop(),n.push(jQuery(document.createElement(s)).appendTo(n[n.length-1]).get(0)));i=u,a=s,e.subWikify(jQuery(document.createElement("li")).appendTo(n[n.length-1]).get(0),this.terminator)}}while(t)}else jQuery(e.output).append(document.createTextNode(e.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:e}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:e}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee][^>]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){e.nextMatch=this.lookahead.lastIndex;var r=t[2];this.hasImageMarkup.test(r)&&(this.imageMarkup.lastIndex=0,r=r.replace(this.imageMarkup,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(Object.hasOwn(t,"error")||t.pos<e.length)return e;var r=Wikifier.helpers.evalPassageId(t.source);if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'.concat(r.replace(/"/g,"%22"),'")')})),jQuery(document.createDocumentFragment()).append(t[1]+r+t[3]).appendTo(e.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(e){var t=this;this.lookahead.lastIndex=e.nextMatch;for(var r,n=1;n>0&&null!==(r=this.lookahead.exec(e.source));)n+="/"===r[1]?-1:1;if(0===n){e.nextMatch=this.lookahead.lastIndex;var a=e.source.slice(e.matchStart,this.lookahead.lastIndex),i=jQuery(document.createDocumentFragment()).append(a);i.find("a[data-passage],image[data-passage]").each(function(r,n){var a=n.tagName.toLowerCase();try{t.processAttributeDirectives(n)}catch(t){return appendError(e.output,"svg|<".concat(a,">: ").concat(t.message),"".concat(e.matchText,"…"))}n.hasAttribute("data-passage")&&t.processDataAttributes(n,a)}),i.appendTo(e.output)}},processAttributeDirectives:function(e){Array.from(e.attributes).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i,o=r.slice(a?1:8);if("data-setter"===o)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(r,'"'));try{i=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'.concat(r,'": ').concat(e.message))}try{e.setAttribute(o,i),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'.concat(r,'" into attribute "').concat(o,'"'))}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if("image"===t)"data:"!==r.slice(0,5)&&Story.has(r)&&(r=Story.get(r)).tags.includes("Twine.image")&&e.setAttribute("href",r.text.trim());else{var a,i=e.getAttribute("data-setter");null!=i&&""!==(i=String(i).trim())&&(a=Wikifier.helpers.shadowHandler(Scripting.desugar(i))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof a&&a.call(this),Engine.play(r)})}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(e){var t=this.tagRe.exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a,i,o=this.voidTags.includes(n)||e.matchText.endsWith("/>"),s=this.nobrTags.includes(n);if(!o){a="<\\/".concat(n,"\\s*>");var u=new RegExp(a,"gim");u.lastIndex=e.matchStart,i=u.exec(e.source)}if(!o&&!i)return appendError(e.output,"cannot find a closing tag for HTML <".concat(r,">"),"".concat(e.matchText,"…"));var c,l=e.output,d=document.createElement(e.output.tagName);for(d.innerHTML=e.matchText;d.firstChild;)d=d.firstChild;try{this.processAttributeDirectives(d)}catch(t){return appendError(e.output,"<".concat(n,">: ").concat(t.message),"".concat(e.matchText,"…"))}if(d.hasAttribute("data-passage")){if(d.hasAttribute("href"))return appendError(e.output,"<".concat(n,'>: elements may not include both "data-passage" and "href" atttributes'),"".concat(e.matchText,"…"));this.processDataAttributes(d,n),Config.debug&&((c=new DebugView(e.output,"html-".concat(n),n,e.matchText)).modes({block:"img"===n,nonvoid:i}),l=c.output)}else d.hasAttribute("href")&&Wikifier.isExternalLink(d.getAttribute("href"))&&d.classList.add("link-external");if(i){try{Wikifier.Option.push({nobr:s}),e.subWikify(d,a,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}c&&jQuery(d).find(".debug.block").length>0&&c.modes({block:!0})}l.appendChild("track"===n?d.cloneNode(!0):d)}},processAttributeDirectives:function(e){Array.from(e.attributes).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i,o=r.slice(a?1:8);if("data-setter"===o)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(r,'"'));try{i=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'.concat(r,'": ').concat(e.message))}try{e.setAttribute(o,i),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'.concat(r,'" into attribute "').concat(o,'"'))}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if(this.mediaTags.includes(t)){if("data:"!==r.slice(0,5)&&Story.has(r)){var a,i;switch(r=Story.get(r),t){case"audio":case"video":i="Twine.".concat(t);break;case"img":i="Twine.image";break;case"track":i="Twine.vtt";break;case"source":var o=$(e).closest("audio,picture,video");o.length>0&&(a=o.get(0).tagName.toLowerCase(),i="Twine.".concat("picture"===a?"image":a))}r.tags.includes(i)&&(e["picture"===a?"srcset":"src"]=r.text.trim())}}else{var s,u=e.getAttribute("data-setter");null!=u&&""!==(u=String(u).trim())&&(s=Wikifier.helpers.shadowHandler(Scripting.desugar(u))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof s&&s.call(this),Engine.play(r)})}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(e){var t=_typeof(e);return"function"===t||"string"===t},Object.preventExtensions(Object.create(null,{add:{value:function(e,t){if(!(_validType(t)||t instanceof Array&&t.length>0&&t.every(_validType)))throw new TypeError("invalid template type (".concat(e,"); templates must be: functions, strings, or an array of either"));(e instanceof Array?e:[e]).forEach(function(e){if(!_validNameRe.test(e))throw new Error('invalid template name "'.concat(e,'"'));if(_templates.has(e))throw new Error("cannot clobber existing template ?".concat(e));_templates.set(e,t)})}},delete:{value:function(e){(e instanceof Array?e:[e]).forEach(function(e){return _templates.delete(e)})}},get:{value:function(e){return _templates.has(e)?_templates.get(e):null}},has:{value:function(e){return _templates.has(e)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var e={},t={},r=new RegExp("^(?:".concat(Patterns.macroName,")$"));function n(t){return Object.hasOwn(e,t)}function a(e,r){if(!e)throw new Error("no parent specified");for(var a=["/".concat(e),"end".concat(e)],i=[].concat(a,Array.isArray(r)?r:[]),s=0;s<i.length;++s){var u=i[s];if(n(u))throw new Error("cannot register tag for an existing macro");o(u)?t[u].includes(e)||(t[u].push(e),t[u].sort()):t[u]=[e]}}function i(e){if(!e)throw new Error("no parent specified");Object.keys(t).forEach(function(r){var n=t[r].indexOf(e);-1!==n&&(1===t[r].length?delete t[r]:t[r].splice(n,1))})}function o(e){return Object.hasOwn(t,e)}return Object.preventExtensions(Object.create(null,{add:{value:function i(s,u){if(Array.isArray(s))s.forEach(function(e){return i(e,u)});else{if(!r.test(s))throw new Error('invalid macro name "'.concat(s,'"'));if(n(s))throw new Error("cannot clobber existing macro <<".concat(s,">>"));if(o(s))throw new Error("cannot clobber child tag <<".concat(s,">> of parent macro").concat(1===t[s].length?"":"s"," <<").concat(t[s].join(">>, <<"),">>"));try{if("object"===_typeof(u))e[s]=Object.assign(Object.create(null),u,{_MACRO_API:!0});else{if(!n(u))throw new Error("cannot create alias of nonexistent macro <<".concat(u,">>"));e[s]=Object.create(e[u],{_ALIAS_OF:{enumerable:!0,value:u}})}Object.defineProperty(e,s,{writable:!1})}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<".concat(s,">>")):new Error("unknown error when attempting to add macro <<".concat(s,">>: [").concat(e.name,"] ").concat(e.message))}if(void 0!==e[s].tags)if(null==e[s].tags)a(s);else{if(!Array.isArray(e[s].tags))throw new Error('bad value for "tags" property of macro <<'.concat(s,">>"));a(s,e[s].tags)}}}},delete:{value:function r(a){if(Array.isArray(a))a.forEach(function(e){return r(e)});else if(n(a)){void 0!==e[a].tags&&i(a);try{Object.defineProperty(e,a,{writable:!0}),delete e[a]}catch(e){throw new Error("unknown error removing macro <<".concat(a,">>: ").concat(e.message))}}else if(o(a))throw new Error("cannot remove child tag <<".concat(a,">> of parent macro <<").concat(t[a],">>"))}},isEmpty:{value:function(){return 0===Object.keys(e).length}},has:{value:n},get:{value:function(t){var r=null;return n(t)&&"function"==typeof e[t].handler?r=e[t]:Object.hasOwn(macros,t)&&"function"==typeof macros[t].handler&&(r=macros[t]),r}},init:{value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(e).forEach(function(r){"function"==typeof e[r][t]&&e[r][t](r)}),Object.keys(macros).forEach(function(e){"function"==typeof macros[e][t]&&macros[e][t](e)})}},tags:{value:Object.preventExtensions(Object.create(null,{register:{value:a},unregister:{value:i},has:{value:o},get:{value:function(e){return o(e)?t[e]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var e=_createClass(function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:r.macro},name:{value:void 0===r.macro._ALIAS_OF?r.name:r.macro._ALIAS_OF},displayName:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parent:{value:r.parent},parser:{value:r.parser},_output:{value:r.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})},[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return Array.from(this._shadows)}},{key:"shadowView",get:function(){for(var e=new Set,t=this;null!==t;t=t.parent)t._shadows&&t._shadows.forEach(function(t){return e.add(t)});return Array.from(e)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextFilter",value:function(e,t){if("function"!=typeof e)throw new TypeError("<MacroContext>.contextFilter() predicate parameter must be a function");for(var r=[],n=this.parent;null!==n;n=n.parent)e.call(void 0===t?this:t,n)&&r.push(n);return r}},{key:"contextFind",value:function(e,t){if("function"!=typeof e)throw new TypeError("<MacroContext>.contextFind() predicate parameter must be a function");for(var r=this.parent;null!==r;r=r.parent)if(e.call(void 0===t?this:t,r))return r}},{key:"contextSome",value:function(e,t){if("function"!=typeof e)throw new TypeError("<MacroContext>.contextSome() predicate parameter must be a function");for(var r=this.parent;null!==r;r=r.parent)if(e.call(void 0===t?this:t,r))return!0;return!1}},{key:"addShadow",value:function(){var e=this;this._shadows||(this._shadows=new Set);for(var t=new RegExp("^".concat(Patterns.variable,"$")),r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];n.flat(1/0).forEach(function(r){if("string"!=typeof r)throw new TypeError("variable name must be a string; type: ".concat(_typeof(r)));if(!t.test(r))throw new Error('invalid variable name "'.concat(r,'"'));e._shadows.add(r)})}},{key:"shadowHandler",value:function(e,t,r){var n,a=this;return"function"==typeof e&&(n=Object.create(null),this.shadowView.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;n[e]=r[t]})),function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if("function"==typeof r&&r.apply(this,o),"function"==typeof e){var u,c=Object.keys(n),l=c.length>0?{}:null,d=Wikifier.Parser.get("macro");try{c.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;Object.hasOwn(r,t)&&(l[t]=r[t]),r[t]=n[e]}),u=d.context,d.context=a,e.apply(this,o)}finally{u!==undefined&&(d.context=u),c.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;n[e]=r[t],Object.hasOwn(l,t)?r[t]=l[t]:delete r[t]})}}"function"==typeof t&&t.apply(this,o)}}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e||this.displayName,t||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return appendError(this._output,"<<".concat(this.displayName,">>: ").concat(e),t||this.source)}}]);return Object.defineProperties(e.prototype,{contextHas:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextHas() is deprecated.");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.prototype.contextSome.apply(this,r)}},contextSelect:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelect() is deprecated.");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.prototype.contextFind.apply(this,r)}},contextSelectAll:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelectAll() is deprecated.");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.prototype.contextFilter.apply(this,r)}},createShadowWrapper:{value:function(){console.warn("[DEPRECATED] <MacroContext>.createShadowWrapper() is deprecated.");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.prototype.shadowHandler.apply(this,r)}}}),e}();Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no ".concat(e.join(" or ")," specified"))}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var e=this;if(0===this.args.length)return this.error("no selector specified");var t,r=jQuery(this.args[0]);if(0===r.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?((t=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout(function(){return t.removeClass("macro-".concat(e.name,"-in"))},Engine.DOM_DELAY)):t=jQuery(document.createDocumentFragment()),t.wiki(this.payload[0].contents),this.name){case"replace":r.empty();case"append":r.append(t);break;case"prepend":r.prepend(t)}else"replace"===this.name&&r.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),function(){if(Has.audio){var e=function(e,t){return'only one playback action allowed per invocation, "'.concat(e,'" cannot be combined with "').concat(t,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track and/or group IDs"),this.args.length<2&&t.push("actions"),this.error("no ".concat(t.join(" or ")," specified"))}var r;try{r=SimpleAudio.select(this.args[0])}catch(e){return this.error(e.message)}for(var n,a,i,o,s,u,c,l=this.args.slice(1),d=5;l.length>0;){var p=l.shift(),f=void 0;switch(p){case"load":case"pause":case"play":case"stop":case"unload":if(n)return this.error(e(p,n));n=p;break;case"fadein":if(n)return this.error(e(p,n));n="fade",a=1;break;case"fadeout":if(n)return this.error(e(p,n));n="fade",a=0;break;case"fadeto":if(n)return this.error(e(p,n));if(0===l.length)return this.error("fadeto missing required level value");if(n="fade",f=l.shift(),a=Number.parseFloat(f),Number.isNaN(a)||!Number.isFinite(a))return this.error("cannot parse fadeto: ".concat(f));break;case"fadeoverto":if(n)return this.error(e(p,n));if(l.length<2){var h=[];return l.length<1&&h.push("seconds"),l.length<2&&h.push("level"),this.error("fadeoverto missing required ".concat(h.join(" and ")," value").concat(h.length>1?"s":""))}if(n="fade",f=l.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: ".concat(f));if(f=l.shift(),a=Number.parseFloat(f),Number.isNaN(a)||!Number.isFinite(a))return this.error("cannot parse fadeoverto: ".concat(f));break;case"volume":if(0===l.length)return this.error("volume missing required level value");if(f=l.shift(),c=Number.parseFloat(f),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse volume: ".concat(f));break;case"mute":case"unmute":o="mute"===p;break;case"time":if(0===l.length)return this.error("time missing required seconds value");if(f=l.shift(),u=Number.parseFloat(f),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse time: ".concat(f));break;case"loop":case"unloop":i="loop"===p;break;case"goto":if(0===l.length)return this.error("goto missing required passage title");if(f=l.shift(),s="object"===_typeof(f)?f.link:f,!Story.has(s))return this.error('passage "'.concat(s,'" does not exist'));break;default:return this.error("unknown action: ".concat(p))}}try{if(null!=c&&r.volume(c),null!=u&&r.time(u),null!=o&&r.mute(o),null!=i&&r.loop(i),null!=s){var g="ended.macros.macro-".concat(this.name,"_goto");r.off(g).one(g,function(){r.off(g),Engine.play(s)})}switch(n){case"fade":r.fade(d,a);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.playWhenAllowed();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: ".concat(e.message))}}}),Macro.add("cacheaudio",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("sources"),this.error("no ".concat(e.join(" or ")," specified"))}var t=String(this.args[0]).trim();try{SimpleAudio.tracks.add(t,this.args.slice(1))}catch(e){return this.error(e.message)}if(Config.debug&&!SimpleAudio.tracks.get(t).hasSource())return this.error('track ID "'.concat(t,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var e=String(this.args[0]).trim(),t=[],r=1,n=this.payload.length;r<n;++r){if(this.payload[r].args.length<1)return this.error("no track ID specified");t.push(String(this.payload[r].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[r].name,this.payload[r].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(e,t)}catch(e){return this.error(e.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var e=String(this.args[0]).trim(),t=[],r=1,n=this.payload.length;r<n;++r){if(0===this.payload[r].args.length)return this.error("no track ID specified");for(var a={id:String(this.payload[r].args[0]).trim()},i=this.payload[r].args.slice(1);i.length>0;){var o=i.shift(),s=void 0,u=void 0;switch(o){case"own":a.own=!0;break;case"rate":i.length>0&&i.shift();break;case"volume":if(0===i.length)return this.error("volume missing required level value");if(s=i.shift(),u=Number.parseFloat(s),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse volume: ".concat(s));a.volume=u;break;default:return this.error("unknown action: ".concat(o))}}t.push(a),Config.debug&&this.createDebugView(this.payload[r].name,this.payload[r].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(e,t)}catch(e){return this.error(e.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var t,r,n,a,i=this.args.slice(0);i.length>0;){var o=i.shift(),s=void 0;switch(o){case"load":case"stop":case"unload":if(t)return this.error(e(o,t));t=o;break;case"mute":case"unmute":r="mute"===o;break;case"muteonhide":case"nomuteonhide":n="muteonhide"===o;break;case"volume":if(0===i.length)return this.error("volume missing required level value");if(s=i.shift(),a=Number.parseFloat(s),Number.isNaN(a)||!Number.isFinite(a))return this.error("cannot parse volume: ".concat(s));break;default:return this.error("unknown action: ".concat(o))}}try{switch(null!=r&&SimpleAudio.mute(r),null!=n&&SimpleAudio.muteOnHidden(n),null!=a&&SimpleAudio.volume(a),t){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: ".concat(e.message))}}}),Macro.add("playlist",{handler:function(){if(this.args.length<2){var t=[];return this.args.length<1&&t.push("list ID"),this.args.length<2&&t.push("actions"),this.error("no ".concat(t.join(" or ")," specified"))}var r=String(this.args[0]).trim();if(!SimpleAudio.lists.has(r))return this.error('playlist "'.concat(r,'" does not exist'));for(var n,a,i,o,s,u,c=SimpleAudio.lists.get(r),l=this.args.slice(1),d=5;l.length>0;){var p=l.shift(),f=void 0;switch(p){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(n)return this.error(e(p,n));n=p;break;case"fadein":if(n)return this.error(e(p,n));n="fade",a=1;break;case"fadeout":if(n)return this.error(e(p,n));n="fade",a=0;break;case"fadeto":if(n)return this.error(e(p,n));if(0===l.length)return this.error("fadeto missing required level value");if(n="fade",f=l.shift(),a=Number.parseFloat(f),Number.isNaN(a)||!Number.isFinite(a))return this.error("cannot parse fadeto: ".concat(f));break;case"fadeoverto":if(n)return this.error(e(p,n));if(l.length<2){var h=[];return l.length<1&&h.push("seconds"),l.length<2&&h.push("level"),this.error("fadeoverto missing required ".concat(h.join(" and ")," value").concat(h.length>1?"s":""))}if(n="fade",f=l.shift(),d=Number.parseFloat(f),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse fadeoverto: ".concat(f));if(f=l.shift(),a=Number.parseFloat(f),Number.isNaN(a)||!Number.isFinite(a))return this.error("cannot parse fadeoverto: ".concat(f));break;case"volume":if(0===l.length)return this.error("volume missing required level value");if(f=l.shift(),u=Number.parseFloat(f),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse volume: ".concat(f));break;case"mute":case"unmute":o="mute"===p;break;case"loop":case"unloop":i="loop"===p;break;case"shuffle":case"unshuffle":s="shuffle"===p;break;default:return this.error("unknown action: ".concat(p))}}try{switch(null!=u&&c.volume(u),null!=o&&c.mute(o),null!=i&&c.loop(i),null!=s&&c.shuffle(s),n){case"fade":c.fade(d,a);break;case"load":c.load();break;case"pause":c.pause();break;case"play":c.playWhenAllowed();break;case"skip":c.skip();break;case"stop":c.stop();break;case"unload":c.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: ".concat(e.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.groups.has(e))return this.error('group "'.concat(e,'" does not exist'));SimpleAudio.groups.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.lists.has(e))return this.error('playlist "'.concat(e,'" does not exist'));SimpleAudio.lists.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}})}(),Macro.add(["back","return"],{handler:function(){var e,t,r,n=-1;if(this.args.length>0)if("object"===_typeof(this.args[0]))if(this.args[0].isImage){t=document.createElement("img");var a=jQuery(t).attr("src",this.args[0].source);Object.hasOwn(this.args[0],"passage")&&a.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&a.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&a.attr("align",this.args[0].align),Object.hasOwn(this.args[0],"link")&&(e=this.args[0].link)}else t=document.createTextNode(this.args[0].text),e=this.args[0].link;else{t=document.createDocumentFragment();var i=jQuery(t).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).getForbiddenInteractiveContentTagNames();if(i.length>0)throw new Error("text content contains restricted elements: <".concat(i.join(">, <"),">"));e=this.args.length>1?this.args[1]:undefined}if(null==e){for(var o=State.length-2;o>=0;--o)if(State.history[o].title!==State.passage){n=o,e=State.history[o].title;break}if(null==e&&"return"===this.name)for(var s=State.expired.length-1;s>=0;--s)if(State.expired[s]!==State.passage){e=State.expired[s];break}}else{if(!Story.has(e))return this.error('passage "'.concat(e,'" does not exist'));if("back"===this.name){for(var u=State.length-2;u>=0;--u)if(State.history[u].title===e){n=u;break}if(-1===n)return this.error('cannot find passage "'.concat(e,'" in the current story history'))}}if(null==e)return this.error("cannot find passage");"back"!==this.name||-1!==n?(r=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(e)}:function(){return Engine.goTo(n)}),t instanceof HTMLImageElement&&r.addClass("link-image")):r=jQuery(document.createElement("span")).addClass("link-disabled"),r.addClass("macro-".concat(this.name)).append(t||document.createTextNode(L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var t,r=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var n=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(r);r.addClass("link-image"),Object.hasOwn(this.args[0],"passage")&&n.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&n.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&n.attr("align",this.args[0].align),t=this.args[0].link}else r.append(document.createTextNode(this.args[0].text)),t=this.args[0].link;else{var a=jQuery(document.createDocumentFragment()).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]),i=a.getForbiddenInteractiveContentTagNames();if(i.length>0)throw new Error("text content contains restricted elements: <".concat(i.join(">, <"),">"));r.append(a),t=this.args.length>1?this.args[1]:undefined}null!=t?(r.attr("data-passage",t),Story.has(t)?(r.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&r.addClass("link-visited")):r.addClass("link-broken")):r.addClass("link-internal"),r.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=t?"link":"button",one:null!=t},this.shadowHandler(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(e.payload[0].contents.trim())}:null,null!=t?function(){return Engine.play(t)}:null)).appendTo(this.output)}}),Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var e={};try{for(var t,r=this.self.tsVarRe;null!==(t=r.exec(this.args.raw));){var n=t[1],a=n.slice(1),i="$"===n[0]?State.variables:State.temporary;Object.hasOwn(i,a)&&(e[a]=i[a]),this.addShadow(n)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach(function(t){var r=t.slice(1),n="$"===t[0]?State.variables:State.temporary;Object.hasOwn(e,r)?n[r]=e[r]:delete n[r]})}}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no ".concat(e.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var r=createSlug(t),n=this.args[1],a=this.args[2],i=document.createElement("input");switch(jQuery(i).attr({id:"".concat(this.name,"-").concat(r),name:"".concat(this.name,"-").concat(r),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler(function(){State.setVar(t,this.checked?a:n)})).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(t)===a?i.checked=!0:State.setVar(t,n);break;case"checked":i.checked=!0,State.setVar(t,a);break;default:State.setVar(t,n)}}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append(e.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var e=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var r=createSlug(t),n=this.payload.length;if(1===n)return this.error("no options specified");for(var a={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var o=this.args[i];switch(o){case"once":a.once=!0;break;case"autoselect":a.autoselect=!0;break;default:return this.error("unknown argument: ".concat(o))}}for(var s,u=[],c={option:0,optionsfrom:0},l=-1,d=function(){var t=e.payload[p];if("option"===t.name){if(++c.option,0===t.args.length)return{v:e.error("no arguments specified for <<".concat(t.name,">> (#").concat(c.option,")"))};var r={label:String(t.args[0])},n=!1;switch(t.args.length){case 1:r.value=t.args[0];break;case 2:"selected"===t.args[1]?(r.value=t.args[0],n=!0):r.value=t.args[1];break;default:r.value=t.args[1],"selected"===t.args[2]&&(n=!0)}if(u.push(r),n){if(a.autoselect)return{v:e.error("cannot specify both the autoselect and selected keywords")};if(-1!==l)return{v:e.error("multiple selected keywords specified for <<".concat(t.name,">> (#").concat(l+1," & #").concat(c.option,")"))};l=u.length-1}}else{if(++c.optionsfrom,0===t.args.full.length)return{v:e.error("no expression specified for <<".concat(t.name,">> (#").concat(c.optionsfrom,")"))};var i;try{var o=t.args.full;i=Scripting.evalJavaScript("{"===o[0]?"(".concat(o,")"):o)}catch(t){return{v:e.error("bad evaluation: ".concat(getErrorMessage(t)))}}if("object"!==_typeof(i)||null===i)return{v:e.error("expression must yield a supported collection or generic object (type: ".concat(null===i?"null":_typeof(i),")"))};if(i instanceof Array||i instanceof Set)i.forEach(function(e){return u.push({label:String(e),value:e})});else if(i instanceof Map)i.forEach(function(e,t){return u.push({label:String(t),value:e})});else{var s=getToStringTag(i);if("Object"!==s)return{v:e.error("expression must yield a supported collection or generic object (object type: ".concat(s,")"))};Object.keys(i).forEach(function(e){return u.push({label:e,value:i[e]})})}}},p=1;p<n;++p)if(s=d())return s.v;if(-1===l)if(a.autoselect){var f=State.getVar(t),h=u.findIndex(function(e){return sameValueZero(e.value,f)});l=-1===h?0:h}else l=0;if("cycle"===this.name){var g=u.length-1;if(a.once&&l===g)jQuery(this.output).wikiWithOptions({cleanup:!1,profile:"core"},u[l].label);else{var m=l;jQuery(document.createElement("a")).wikiWithOptions({cleanup:!1,profile:"core"},u[l].label).attr("id","".concat(this.name,"-").concat(r)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.shadowHandler(function(){var e=$(this);m=(m+1)%u.length,State.setVar(t,u[m].value),e.empty().wikiWithOptions({cleanup:!1,profile:"core"},u[m].label),a.once&&m===g&&e.off().contents().unwrap()})).appendTo(this.output)}}else{var v=jQuery(document.createElement("select"));u.forEach(function(e,t){jQuery(document.createElement("option")).val(t).text(e.label).appendTo(v)}),v.attr({id:"".concat(this.name,"-").concat(r),name:"".concat(this.name,"-").concat(r),tabindex:0}).addClass("macro-".concat(this.name)).val(l).on("change.macros",this.shadowHandler(function(){State.setVar(t,u[Number(this.value)].value)})).appendTo(this.output)}State.setVar(t,u[l].value)}}),jQuery(document).on(":redo",function(e){var t=e.detail&&e.detail.tags||[],r=0===t.length?".".concat("redo-target"):t.map(function(e){return".".concat("redo-target",'[data-do-tags~="').concat(e,'"]')}).join(", ");triggerEvent(":redo-internal",jQuery(r),{bubbles:!1,detail:e.detail})}),Macro.add("do",{tags:null,handler:function(){for(var e="span",t=[],r=this.args.slice();r.length>0;){var n=r.shift();switch(n){case"tag":if(0===r.length)return this.error("tag option missing required tag name(s)");var a=String(r.shift()).trim();if(""===a)throw new Error("tag option tag name(s) must be non-empty");t=String(a).trim().splitOrEmpty(/\s+/);break;case"element":if(0===r.length)return this.error("element option missing required element tag name");if(""===(e=String(r.shift()).trim()))throw new Error("element option tag name must be non-empty");break;default:return this.error("unknown option: ".concat(n))}}var i=this.payload[0].contents;if(""!==i.trim()){Config.debug&&this.debugView.modes({block:"span"!==e});var o=jQuery(document.createElement(e)).addClass("macro-".concat(this.name," ").concat("redo-target")).attr("data-do-tags",t.join(" ")).wiki(i).on(":redo-internal",jQuery.throttle(Engine.DOM_DELAY,this.shadowHandler(function(){var e=document.createDocumentFragment();new Wikifier(e,i),o.empty().append(e)}))).appendTo(this.output)}}}),Macro.add("redo",{handler:function(){var e=/^(?:do|for)$/,t=/^(?:button|link(?:append|prepend|replace)?)$/,r=this.contextFind(function(r){return e.test(r.name)||t.test(r.name)});if(r&&e.test(r.name))return this.error("must not be used directly within macro <<".concat(r.name,">>"));var n=this.args.length>0?String(this.args[0]).trim().splitOrEmpty(/\s+/):[];triggerEvent(":redo",document,{detail:{tags:n}})}}),Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var e=this.payload[0].contents.trim();""!==e&&setTimeout(this.shadowHandler(function(){return $.wiki(e)}),Engine.DOM_DELAY)}}),Macro.add("for",{skipArgs:!0,tags:null,isRangeRe:new RegExp("^(?:\\S".concat(Patterns.anyChar,"*?\\s+)?range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+)?range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var e=this.args.full.trim(),t=this.payload[0].contents.replace(/\n$/,"");if(0===e.length)this.self.handleFor.call(this,t,null,!0,null);else if(this.self.isRangeRe.test(e)){var r=e.match(this.self.rangeRe);if(null===r)return this.error("invalid range form syntax, format: [[index ,] value] range collection");this.self.handleForRange.call(this,t,{type:r[1],name:r[2]},{type:r[3],name:r[4]},r[5])}else{var n,a,i;if(-1===e.indexOf(";")){if(this.self.forInRe.test(e))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(e))return this.error("invalid syntax, for…of is not supported; see: for…range");a=e}else{var o=e.match(this.self.threePartRe);if(null===o)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");n=o[1],a=o[2].trim(),i=o[3],0===a.length&&(a=!0)}this.self.handleFor.call(this,t,n,a,i)}},handleFor:function(e,t,r,n){var a=Scripting.evalJavaScript,i=!0,o=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,t)try{a(t)}catch(e){return this.error("bad init expression: ".concat(getErrorMessage(e)))}for(;a(r);){if(--o<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,i?e.replace(/^\n/,""):e),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(n)try{a(n)}catch(e){return this.error("bad post expression: ".concat(getErrorMessage(e)))}}}catch(e){return this.error("bad conditional expression: ".concat(getErrorMessage(e)))}finally{TempState.break=null}},handleForRange:function(e,t,r,n){var a,i=!0;try{a=this.self.toRangeable(n)}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});try{for(TempState.break=null;;){var o=a.next();if(o.done)break;if(t.name&&(State[t.type][t.name]=o.key),r.name&&(State[r.type][r.name]=o.value),new Wikifier(this.output,i?e.replace(/^\n/,""):e),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}}catch(e){return this.error(getErrorMessage(e))}finally{TempState.break=null}},toRangeable:function(e){var t;try{t=Scripting.evalJavaScript("{"===e[0]?"(".concat(e,")"):e)}catch(e){if("object"!==_typeof(e))throw new Error("bad range expression: ".concat(e));throw e.message="bad range expression: ".concat(e.message),e}switch(_typeof(t)){case"number":if(Number.isNaN(t)||!Number.isFinite(t))throw new Error("unsupported range expression type: ".concat(stringFrom(t)));if(!Number.isInteger(t))throw new Error("unsupported range expression type: floating-point number");if(!Number.isSafeInteger(t))throw new Error("unsupported range expression type: unsafe integer");return t<=0?{next:function(){return{done:!0}}}:{end:t,pos:0,next:function(){if(this.pos<this.end){var e=this.pos++;return{key:e,value:e,done:!1}}return{done:!0}}};case"string":return{list:t,end:t.length,pos:0,next:function(){if(this.pos<this.end){var e=charAndPosAt(this.list,this.pos),t=this.pos;return this.pos=e.end+1,{key:t,value:e.char,done:!1}}return{done:!0}}};case"object":if(t instanceof Array)return{list:t,end:t.length,pos:0,next:function(){if(this.pos<this.end){var e=this.pos++;return{key:e,value:this.list[e],done:!1}}return{done:!0}}};if(t instanceof Set)return{list:t=Array.from(t),end:t.length,pos:0,next:function(){if(this.pos<this.end){var e=this.pos++;return{key:e,value:this.list[e],done:!1}}return{done:!0}}};if(t instanceof Map){var r=Array.from(t.keys());return{keys:r,list:t,end:r.length,pos:0,next:function(){if(this.pos<this.end){var e=this.keys[this.pos++];return{key:e,value:this.list.get(e),done:!1}}return{done:!0}}}}if("Object"===getToStringTag(t)){var n=Object.keys(t);return{keys:n,list:t,end:n.length,pos:0,next:function(){if(this.pos<this.end){var e=this.keys[this.pos++];return{key:e,value:this.list[e],done:!1}}return{done:!0}}}}throw new Error("unsupported range expression type: ".concat(getToStringTag(t)));default:throw new Error("unsupported range expression type: ".concat(_typeof(t)))}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextSome(function(e){return"for"===e.name}))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(e)?void setTimeout(function(){return Engine.play(e)},Engine.DOM_DELAY):this.error('passage "'.concat(e,'" does not exist')));var e}}),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],isElseifWsRE:/^\s*if\b/i,isAssignRE:/[^!%&*+\-/<=>?^|]=[^=>]/,isLiteralRE:new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(?:`(?:\\\\.|[^`\\\\])+`)"].join("|"),"g"),handler:function(){var e;try{var t=this.payload.length,r=this.self.isElseifWsRE,n=this.self.isAssignRE,a=this.self.isLiteralRE;for(e=0;e<t;++e)if("else"===this.payload[e].name){if(this.payload[e].args.raw.length>0)return r.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(e>0?" (#".concat(e,")"):"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[e].args.raw));if(e+1!==t)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[e].name,">> clause").concat(e>0?" (#".concat(e,")"):""));if((Config.debug||Config.enableOptionalDebugging)&&n.test(this.payload[e].args.full.replace(a,"")))return this.error("assignment operator found within <<".concat(this.payload[e].name,">> clause").concat(e>0?" (#".concat(e,")"):""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[e].args.raw))}var i=Scripting.evalJavaScript,o=!1;for(e=0;e<t;++e){if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||i(this.payload[e].args.full)){o=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<t;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!o,invalid:!o})}}catch(t){return this.error("bad conditional expression in <<".concat(0===e?"if":"elseif",">> clause").concat(e>0?" (#".concat(e,")"):"",": ").concat(getErrorMessage(t)))}}}),Macro.add("include",{handler:function(){return"display"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length?this.error("no passage specified"):(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(e)?(Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(e.id," macro-").concat(this.name)).attr("data-passage",e.name).appendTo(this.output):jQuery(this.output)).wiki(e.processText())):this.error('passage "'.concat(e,'" does not exist')));var e}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var e=this;if(0===this.args.length)return this.error("no link text specified");var t=jQuery(document.createElement("a")),r=jQuery(document.createElement("span")),n=this.args.length>1&&this.self.t8nRe.test(this.args[1]);t.wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.shadowHandler(function(){if("linkreplace"===e.name?t.remove():t.wrap('<span class="macro-'.concat(e.name,'"></span>')).replaceWith(function(){return t.html()}),""!==e.payload[0].contents){var a=document.createDocumentFragment();new Wikifier(a,e.payload[0].contents,{cleanup:!1}),r.append(a)}n&&setTimeout(function(){return r.removeClass("macro-".concat(e.name,"-in"))},Engine.DOM_DELAY)})).appendTo(this.output),r.addClass("macro-".concat(this.name,"-insert")),n&&r.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?r.insertBefore(t):r.insertAfter(t)}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no ".concat(e.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var r="numberbox"===this.name,n=r?Number(this.args[1]):this.args[1];if(r&&Number.isNaN(n))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var a,i=createSlug(t),o=document.createElement("input"),s=!1;this.args.length>3?(a=this.args[2],s="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?s=!0:a=this.args[2]),"object"===_typeof(a)&&(a=a.link),jQuery(o).attr({id:"".concat(this.name,"-").concat(i),name:"".concat(this.name,"-").concat(i),type:r?"number":"text",inputmode:r?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler(function(){State.setVar(t,r?Number(this.value):this.value)})).on("keypress.macros",this.shadowHandler(function(e){13===e.which&&(e.preventDefault(),State.setVar(t,r?Number(this.value):this.value),null!=a&&Engine.play(a))})).appendTo(this.output),r&&(o.step="any"),State.setVar(t,n),o.value=n,s&&(o.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",function(){setTimeout(function(){return o.focus()},Engine.DOM_DELAY)}):setTimeout(function(){return o.focus()},Engine.DOM_DELAY))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=stringFrom(Scripting.evalJavaScript(this.args.full));null!==e&&new Wikifier(this.output,"-"===this.name?encodeEntities(e):e)}catch(e){return this.error("bad evaluation: ".concat(getErrorMessage(e)))}}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no ".concat(e.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var r=createSlug(t),n=this.args[1],a=document.createElement("input");switch(Object.hasOwn(TempState,this.name)||(TempState[this.name]={}),Object.hasOwn(TempState[this.name],r)||(TempState[this.name][r]=0),jQuery(a).attr({id:"".concat(this.name,"-").concat(r,"-").concat(TempState[this.name][r]++),name:"".concat(this.name,"-").concat(r),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler(function(){this.checked&&State.setVar(t,n)})).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(t)===n&&(a.checked=!0);break;case"checked":a.checked=!0,State.setVar(t,n)}}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));e.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var e,t=this;if(0===this.args.length)return this.error("no time value specified");try{e=Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});var r=this.args.length>1&&this.self.t8nRe.test(this.args[1]),n=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.shadowHandler(function(){var e=document.createDocumentFragment();new Wikifier(e,t.payload[0].contents,{cleanup:!1});var a=n;r&&(a=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(a)),a.append(e),r&&setTimeout(function(){return a.removeClass("macro-repeat-in")},Engine.DOM_DELAY)}),e)},registerInterval:function(e,t){var r=this;if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var n=State.passage,a=State.turns,i=this.timers,o=null;o=setInterval(function(){if(State.passage!==n||State.turns!==a)return clearInterval(o),void i.delete(o);var t;try{TempState.break=null,Object.hasOwn(TempState,"repeatTimerId")&&(t=TempState.repeatTimerId),TempState.repeatTimerId=o,e.call(r)}finally{void 0!==t?TempState.repeatTimerId=t:delete TempState.repeatTimerId,TempState.break=null}},t),i.add(o),1===i.size&&jQuery(document).one(":passageinit",function(){i.forEach(function(e){return clearInterval(e)}),i.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!Object.hasOwn(TempState,"repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("script",{tags:null,handler:function(){var e;switch(this.args.length>0?String(this.args[0]).toLowerCase():"javascript"){case"javascript":e=Scripting.evalJavaScript;break;case"twinescript":e=Scripting.evalTwineScript;break;default:return this.error('unknown language "'.concat(this.args[0],'"'))}var t=document.createDocumentFragment();try{e(this.payload[0].contents,t)}catch(e){return this.error("bad evaluation: ".concat(getErrorMessage(e)))}Config.debug&&this.createDebugView(),t.hasChildNodes()&&this.output.appendChild(t)}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: ".concat(getErrorMessage(e)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("silent",{skipArgs:!0,tags:null,handler:function(){"silently"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(e);else{var t=Array.from(e.querySelectorAll(".error")).map(function(e){return e.textContent});if(t.length>0)return this.error("error".concat(1===t.length?"":"s"," within contents (").concat(t.join("; "),")"))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e,t,r=this.payload.length;if(1===r)return this.error("no cases specified");for(e=1;e<r;++e)if("default"===this.payload[e].name){if(this.payload[e].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[e].args.raw));if(e+1!==r)return this.error("<<default>> must be the final case")}else if(0===this.payload[e].args.length)return this.error("no value(s) specified for <<".concat(this.payload[e].name,">> (#").concat(e,")"));try{t=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: ".concat(getErrorMessage(e)))}var n=this.debugView,a=!1;for(Config.debug&&n.modes({nonvoid:!1,hidden:!0}),e=1;e<r;++e){if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"default"===this.payload[e].name||this.payload[e].args.some(function(e){return e===t})){a=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<r;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});n.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no ".concat(e.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var r=createSlug(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:"".concat(this.name,"-").concat(r),name:"".concat(this.name,"-").concat(r),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler(function(){State.setVar(t,this.value)})).appendTo(this.output),State.setVar(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",function(){setTimeout(function(){return i.focus()},Engine.DOM_DELAY)}):setTimeout(function(){return i.focus()},Engine.DOM_DELAY))}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e,t=[];try{t.push({name:this.name,source:this.source,delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error("".concat(e.message," in <<timed>>"))}if(this.payload.length>1)try{var r;for(e=1,r=this.payload.length;e<r;++e)t.push({name:this.payload[e].name,source:this.payload[e].source,delay:0===this.payload[e].args.length?t[t.length-1].delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.payload[e].args[0])),content:this.payload[e].contents})}catch(t){return this.error("".concat(t.message," in <<next>> (#").concat(e,")"))}Config.debug&&this.debugView.modes({block:!0});var n=this.args.length>1&&this.self.t8nRe.test(this.args[1]),a=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.shadowHandler(function(e){var t=document.createDocumentFragment();new Wikifier(t,e.content,{cleanup:!1});var r=a;Config.debug&&"next"===e.name&&(r=jQuery(new DebugView(r[0],"macro",e.name,e.source).output)),n&&(r=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(r)),r.append(t),n&&setTimeout(function(){return r.removeClass("macro-timed-in")},Engine.DOM_DELAY)}),t)},registerTimeout:function(e,t){if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var r=State.passage,n=State.turns,a=this.timers,i=null,o=t.shift();i=setTimeout(function s(){if(a.delete(i),State.passage===r&&State.turns===n){var u=o;null!=(o=t.shift())&&(i=setTimeout(s,o.delay),a.add(i)),e.call(this,u)}},o.delay),a.add(i),1===a.size&&jQuery(document).one(":passageinit",function(){a.forEach(function(e){return clearTimeout(e)}),a.clear()})}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var e,t=cssTimeToMS(this.args[0]);if(t<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var r="",n="",a="div",i=Config.macros.typeSkipKey,o=400,s=this.args.slice(1);s.length>0;){var u=s.shift();switch(u){case"class":if(0===s.length)return this.error("class option missing required class name(s)");if(""===(r=s.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===s.length)return this.error("element option missing required element tag name");if(""===(a=s.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===s.length)return this.error("id option missing required ID");if(""===(n=s.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":e="keep";break;case"none":e="none";break;case"skipkey":if(0===s.length)return this.error("skipkey option missing required key value");if(""===(i=s.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===s.length)return this.error("start option missing required time value");var c=s.shift();if((o=cssTimeToMS(c))<0)throw new Error("start option time value must be non-negative (received: ".concat(c,")"));break;default:return this.error("unknown option: ".concat(u))}}var l=this.payload[0].contents;if(""!==l.trim()){Config.debug&&this.debugView.modes({block:!0});var d="macro-".concat(this.name),p=".".concat(d),f=jQuery(document.createElement(a)).addClass("".concat(d," ").concat(d,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(p).one(":passageinit".concat(p),function(){return $(document).off(p)}));var h=0===TempState.macroTypeQueue.length,g=++this.self.typeId,m=this.self.allowCleanup;TempState.macroTypeQueue.push({id:g,handler:this.shadowHandler(function(){var s=jQuery(document.createElement(a)).addClass(d);n&&s.attr("id",n),r&&s.addClass(r),new Wikifier(s,l,m(a)?undefined:{cleanup:!1});var u=State.passage,c=State.turns;if(0===t||!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some(function(e){return e===u})||s.find(".error").length>0)return f.replaceWith(s),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var h=new NodeTyper({targetNode:s.get(0),classNames:"none"===e?null:"".concat(d,"-cursor")});f.replaceWith(s);var v="keydown".concat(p),y="".concat(":typingstop").concat(p);$(document).off(v).on(v,function(e){scrubEventKey(e.key)!==i||e.target!==document.body&&e.target!==document.documentElement||(e.preventDefault(),$(document).off(v),h.finish())}).one(y,function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?triggerEvent(":typingcomplete"):TempState.macroTypeQueue.first().handler())});var b=function(){var r=function(t){State.passage===u&&State.turns===c&&h.type()||(t&&clearInterval(t),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===g&&TempState.macroTypeQueue.shift(),triggerEvent(":typingstop",s),s.addClass("".concat(d,"-done")),"keep"===e&&s.addClass("".concat(d,"-cursor")))};triggerEvent(":typingstart",s),r();var n=setInterval(function(){return r(n)},t)};o?setTimeout(b,o):b()})}),h&&(Engine.isPlaying()?$(document).one(":passageend".concat(p),function(){return TempState.macroTypeQueue.first().handler()}):TempState.macroTypeQueue.first().handler())}},allowCleanup:function(e){switch(e.toUpperCase()){case"ARTICLE":case"DIV":case"FOOTER":case"FORM":case"HEADER":case"MAIN":case"SECTION":return!0}return!1}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");try{var e=this.args.full.replace(/[,;\s]*((?:State\.(?:variables|temporary)|setup)\.)/g,function(e,t){return"; delete ".concat(t)}).replace(/^; /,"");Scripting.evalJavaScript(e)}catch(e){return this.error("bad evaluation: ".concat(getErrorMessage(e)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e,t=this.args[0],r=this.args.length>1&&"container"===this.args[1];if(Macro.has(t))return this.error("cannot clobber existing ".concat(Macro.get(t).isWidget?"widget":"macro",' "').concat(t,'"'));try{var n={isWidget:!0,handler:(e=this.payload[0].contents,function(){var t={};Object.hasOwn(State.temporary,"args")&&(t._args=State.temporary.args),State.temporary.args=Array.from(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,State.temporary.args.name=this.name,this.addShadow("_args"),r&&(Object.hasOwn(State.temporary,"contents")&&(t._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),Object.hasOwn(State.variables,"args")&&(t.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var n=document.createDocumentFragment(),a=[];if(new Wikifier(n,e),Array.from(n.querySelectorAll(".error")).forEach(function(e){a.push(e.textContent)}),0!==a.length)return this.error("error".concat(a.length>1?"s":""," within widget code (").concat(a.join("; "),")"));this.output.appendChild(n)}catch(e){return this.error("cannot execute widget: ".concat(e.message))}finally{Object.hasOwn(t,"_args")?State.temporary.args=t._args:delete State.temporary.args,r&&(Object.hasOwn(t,"_contents")?State.temporary.contents=t._contents:delete State.temporary.contents),Object.hasOwn(t,"$args")?State.variables.args=t.$args:delete State.variables.args}})};r&&(n.tags=[]),Macro.add(t,n),Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error('cannot create widget macro "'.concat(t,'": ').concat(e.message))}}}),Macro.add("silently","silent"),Macro.add("actions",{handler:function(){console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));for(var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;if("object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),Object.hasOwn(this.args[t],"passage")&&a.attr("data-passage",this.args[t].passage),Object.hasOwn(this.args[t],"title")&&a.attr("title",this.args[t].title),Object.hasOwn(this.args[t],"align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],!(Object.hasOwn(State.variables,"#actions")&&Object.hasOwn(State.variables["#actions"],r)&&State.variables["#actions"][r])){var o=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){Object.hasOwn(State.variables,"#actions")||(State.variables["#actions"]={}),State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-".concat(this.name)).append(a||document.createTextNode(n));a&&o.addClass("link-image")}}}}),Macro.add("choice",{handler:function(){if(console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length)return this.error("no passage specified");var e,t,r,n,a,i=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(r=jQuery(document.createElement("img")).attr("src",this.args[0].source),Object.hasOwn(this.args[0],"passage")&&r.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&r.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&r.attr("align",this.args[0].align),e=this.args[0].link,n=this.args[0].setFn):(t=this.args[0].text,e=this.args[0].link,n=this.args[0].setFn):t=e=this.args[0]:(e=this.args[0],t=this.args[1]),Object.hasOwn(State.variables,"#choice")&&Object.hasOwn(State.variables["#choice"],i)&&State.variables["#choice"][i])return a=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append(r||document.createTextNode(t)).appendTo(this.output),void(r&&a.addClass("link-image"));a=jQuery(Wikifier.createInternalLink(this.output,e,null,function(){Object.hasOwn(State.variables,"#choice")||(State.variables["#choice"]={}),State.variables["#choice"][i]=!0,"function"==typeof n&&n()})).addClass("macro-".concat(this.name)).append(r||document.createTextNode(t)),r&&a.addClass("link-image")}});var Dialog=function(){var e=null,t=null,r=null,n=null,a=null,i=null,o=null,s=0;function u(e){var r=jQuery(window),n={left:"",right:"",top:"",bottom:""};t.css(n);var a=r.width()-t.outerWidth(!0)-1,i=r.height()-t.outerHeight(!0)-1;if(a<=20+s&&(i-=s),i<=20+s&&(a-=s),n.left=n.right=a<=20?"10px":(a/2|0)+"px",i<=20)n.top=n.bottom="10px";else{var o=i/2|0;n.top=o>e?e+"px":n.bottom=o+"px"}return n}function c(e){"block"===t.css("display")&&t.css(u(null!=e?e:50))}function l(s){if(triggerEvent(":dialogclosing",n),jQuery(document).off(".dialog-close"),i?(i.disconnect(),i=null):n.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),t.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),e.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),r.empty(),n.empty().removeClass(),a&&(a.focus(),a=null),o)try{o(s)}finally{o=null}return triggerEvent(":dialogclose",n),triggerEvent(":dialogclosed",n),Dialog}function d(e,t){return r.empty().append((null!=e?String(e):"")||" "),n.empty().removeClass(),null!=t&&n.addClass(t),Dialog}function p(){return n.get(0)}function f(e){return t.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return n.hasClass(e)}))}function h(){var e;return(e=n).wiki.apply(e,arguments),Dialog}return Object.preventExtensions(Object.create(null,{append:{value:function(){var e;return(e=n).append.apply(e,arguments),Dialog}},body:{value:p},close:{value:l},create:{value:d},empty:{value:function(){return n.empty(),Dialog}},init:{value:function(){if(!document.getElementById("ui-dialog")){s=function(){var e;try{var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var r=document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var a=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title" aria-modal="true"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("textClose"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');e=jQuery(a.find("#ui-overlay").get(0)),t=jQuery(a.find("#ui-dialog").get(0)),r=jQuery(a.find("#ui-dialog-title").get(0)),n=jQuery(a.find("#ui-dialog-body").get(0)),a.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:f},open:{value:function(r,s){var d=Object.assign({top:50},r).top;if(null!=s){var h=getTypeOf(s);if("function"!==h)throw new TypeError("Dialog.open onClose parameter must be a function (received: ".concat(h,")"));o=s}else o=null;triggerEvent(":dialogopening",n),f()||(a=getActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),e.addClass("open"),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var g=jQuery.throttle(40,function(){return c(d)});return n.imagesLoaded().always(g),t.css(u(d)).addClass("open").focus(),jQuery(window).off(".dialog-resize").on("resize.dialog-resize",g),Has.mutationObserver?(i=new MutationObserver(function(e){for(var t=0;t<e.length;++t)if("childList"===e[t].type){n.imagesLoaded().always(g),g();break}})).observe(p(),{childList:!0,subtree:!0}):n.off(".dialog-resize").on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",function(){n.imagesLoaded().always(g),g()}),jQuery(document).off(".dialog-close").one("click.dialog-close",".ui-close",function(e){l(e)}).one("keypress.dialog-close",".ui-close",function(e){13!==e.which&&32!==e.which||triggerEvent("click",this)}),triggerEvent(":dialogopen",n),triggerEvent(":dialogopened",n),Dialog}},resize:{value:function(e){return c("object"===_typeof(e)?e.top:undefined)}},wiki:{value:h},wikiPassage:{value:function(e){return h(Story.get(e).processText())}},setup:{value:function(e,t){return console.warn("[DEPRECATED] Dialog.setup() is deprecated."),d(e,t),p()}}}))}(),Engine=function(){var e=enumFrom({Init:"init",Idle:"idle",Playing:"playing",Rendering:"rendering"}),t=[],r=e.Init,n=null;function a(e){var t=State.go(e);return t&&i(),t}function i(){return o(State.passage,!0)}function o(a,i){if(r===e.Init)return!1;var o,s,u=a;if(r=e.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var c=Config.navigation.override(u);c&&(u=c)}catch(e){}var l=Story.get(u);if(jQuery.event.trigger({passage:l,type:":passageinit",detail:{passage:l}}),Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(l,e)}),i||State.create(l.name),document.body.className&&(document.body.className=""),n=now(),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(l,e)}),Story.has("PassageReady"))try{o=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){console.error(e),Alert.error("PassageReady",e.message)}r=e.Rendering;var d=l.tags.length>0?l.tags.join(" "):null,p=document.createElement("div");jQuery(p).attr({id:l.id,"data-passage":l.name,"data-tags":d}).addClass("passage passage-in ".concat(l.className)),jQuery(document.body).attr("data-tags",d).addClass(l.className),jQuery(document.documentElement).attr("data-tags",d),jQuery.event.trigger({content:p,passage:l,type:":passagestart",detail:{content:p,passage:l}}),Object.keys(prerender).forEach(function(e){"function"==typeof prerender[e]&&prerender[e].call(l,p,e)}),Story.has("PassageHeader")&&new Wikifier(p,Story.get("PassageHeader").processText()),p.appendChild(l.render()),Story.has("PassageFooter")&&new Wikifier(p,Story.get("PassageFooter").processText()),jQuery.event.trigger({content:p,passage:l,type:":passagerender",detail:{content:p,passage:l}}),Object.keys(postrender).forEach(function(e){"function"==typeof postrender[e]&&postrender[e].call(l,p,e)});var f,h=document.getElementById("passages");if(h.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?Array.from(h.childNodes).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr({id:"out-".concat(t.attr("id")),"aria-hidden":"true","aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Has.transitionEndEvent,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(40,Config.passages.transitionOut))}else t.remove()}):jQuery(h).empty()),jQuery(p).appendTo(h),setTimeout(function(){return jQuery(p).removeClass("passage-in")},20),window.scroll(0,0),r=e.Playing,Story.has("PassageDone"))try{s=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){console.error(e),Alert.error("PassageDone",e.message)}return jQuery.event.trigger({content:p,passage:l,type:":passagedisplay",detail:{content:p,passage:l}}),Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(l,e)}),UI.update(),Config.debug&&(null!=o&&((f=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),f.append(o),jQuery(p).prepend(f.output)),null!=s&&((f=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),f.append(s),jQuery(p).append(f.output)),1===State.turns&&t.length>0&&jQuery(p).prepend(t)),jQuery("#story").find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),State.turns>1&&Save.browser.auto.isEnabled()&&Save.browser.auto.save(),jQuery.event.trigger({content:p,passage:l,type:":passageend",detail:{content:p,passage:l}}),r=e.Idle,n=now(),p}return Object.preventExtensions(Object.create(null,{States:{value:e},DOM_DELAY:{get:function(){return 40}},init:{value:function(){if(r===e.Init){jQuery("#init-no-js,#init-lacking").remove();var t=jQuery('<div id="story" role="main"></div>'),n=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(n){if(Config.ui.updateStoryElements=!1,UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),t.append(n),t.find("#story").length>0)throw new Error('element with ID "story" found within "StoryInterface" special passage');var a=t.find("#passages");if(0===a.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');a.empty().not("[aria-live]").attr("aria-live","polite").end();var i=t.find("[data-init-passage]"),o=t.find("[data-passage]");i.each(function(e,t){if("passages"===t.id)throw new Error('"StoryInterface" element <'.concat(t.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var r=t.getAttribute("data-init-passage").trim();if(t.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(t.nodeName.toLowerCase(),' data-init-passage="').concat(r,'"> must not contain a "data-passage" content attribute'));if(null!==t.firstElementChild)throw new Error('"StoryInterface" element <'.concat(t.nodeName.toLowerCase(),' data-init-passage="').concat(r,'"> contains child elements'));Story.has(r)&&jQuery(document).one(":uiupdate".concat(".engine"),function(){var e=document.createDocumentFragment();new Wikifier(e,Story.get(r).processText().trim()),jQuery(t).empty().append(e)})}),o.each(function(e,t){if("passages"===t.id)throw new Error('"StoryInterface" element <'.concat(t.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var r=t.getAttribute("data-passage").trim();if(null!==t.firstElementChild)throw new Error('"StoryInterface" element <'.concat(t.nodeName.toLowerCase(),' data-passage="').concat(r,'"> contains child elements'));Story.has(r)&&jQuery(document).on(":uiupdate".concat(".engine"),function(){var e=document.createDocumentFragment();new Wikifier(e,Story.get(r).processText().trim()),jQuery(t).empty().append(e)})})}else t.append('<div id="passages" aria-live="polite"></div>');t.insertBefore("body>script#script-sugarcube")}}},runUserScripts:{value:function(){var t;r===e.Init&&(t=document.createElement("style"),new StyleWrapper(t).add(Story.getStyles().map(function(e){return e.text.trim()}).join("\n")),jQuery(t).appendTo(document.head).attr({id:"style-story",type:"text/css"}),Story.getScripts().forEach(function(e){try{Scripting.evalJavaScript(e.text)}catch(t){console.error(t),Alert.error(e.name,getErrorMessage(t))}}),Story.getWidgets().forEach(function(e){try{Wikifier.wikifyEval(e.processText())}catch(t){console.error(t),Alert.error(e.name,getErrorMessage(t))}}))}},runUserInit:{value:function(){if(r===e.Init&&(Story.getInits().forEach(function(e){try{var r=Wikifier.wikifyEval(e.text);if(Config.debug){var n=new DebugView(document.createDocumentFragment(),"special","".concat(e.name," [init-tagged]"),"".concat(e.name," [init-tagged]"));n.modes({hidden:!0}),n.append(r),t.push(n.output)}}catch(t){console.error(t),Alert.error("".concat(e.name," [init-tagged]"),getErrorMessage(t))}}),Story.has("StoryInit")))try{var n=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var a=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");a.modes({hidden:!0}),a.append(n),t.push(a.output)}}catch(e){console.error(e),Alert.error("StoryInit",getErrorMessage(e))}}},start:{value:function(){if(r===e.Init){if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(r=e.Idle,document.documentElement.focus(),State.restore())i();else{var t=_typeof(Config.saves._internal_autoload_);"string"===t?"prompt"===Config.saves._internal_autoload_&&(UI.buildAutoload(),Dialog.open()):new Promise(function(e,r){if(Save.browser.size>0&&("boolean"===t&&Config.saves._internal_autoload_||"function"===t&&Config.saves._internal_autoload_()))return e();r()}).then(function(){Save.browser.continue(),i()}).catch(function(){o(Config.passages.start)})}}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),triggerEvent(":enginerestart"),window.location.reload()}},state:{get:function(){return r}},isIdle:{value:function(){return r===e.Idle}},isPlaying:{value:function(){return r!==e.Idle}},isRendering:{value:function(){return r===e.Rendering}},lastPlay:{get:function(){return n}},goTo:{value:function(e){var t=State.goTo(e);return t&&i(),t}},go:{value:a},backward:{value:function(){return a(-1)}},forward:{value:function(){return a(1)}},show:{value:i},play:{value:o},display:{value:function(e,t,r){console.warn("[DEPRECATED] Engine.display() is deprecated.");var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(r,'"; please notify the developer'))}o(e,n)}},minDomActionDelay:{get:function(){return 40}}}))}(),Passage=(tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,encodedRE=/\r/g,hasEncodedRE=new RegExp(encodedRE.source),decodePassageText=function(e){if(null==e)return"";var t=String(e);return t&&hasEncodedRE.test(t)?t.replace(encodedRE,""):t},_createClass(function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,{name:{value:decodeEntities(t)},element:{value:r||null},tags:{value:Object.freeze(r&&r.hasAttribute("tags")?Array.from(new Set(r.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])}}),Object.defineProperties(this,{id:{value:"passage-".concat(createSlug(this.name))},classes:{value:Object.freeze(0===this.tags.length?[]:this.tags.filter(function(e){return!tagsToSkip.test(e)}).map(function(e){return createSlug(e)}))},domId:{get:function(){return this.id}},title:{get:function(){return this.name}}})},[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=encodeMarkup(this.name),t="".concat(L10n.get("errorViewTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:e}));return'<div class="error-view"><span class="error">'.concat(t,"</span></div>")}return decodePassageText(this.element.textContent)}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var e=this.text;return Config.passages.onProcess&&(e=Config.passages.onProcess.call(null,{title:this.name,tags:this.tags,text:e})),(Config.passages.nobr||this.tags.includes("nobr"))&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),e}},{key:"render",value:function(e){var t=document.createDocumentFragment();return new Wikifier(t,this.processText(),e),t}},{key:"description",value:function(){return"".concat(L10n.get("textTurn")," ").concat(State.turns)}}])),encodedRE,hasEncodedRE,tagsToSkip,decodePassageText,Save=function(){var e=enumFrom({Unknown:0,Auto:1,Slot:2,Disk:3,Base64:4,Autosave:1,Serialize:4}),t=15,r=":",n="".concat("save.","auto."),a="".concat(n,"data").concat(r),i="".concat(n,"info").concat(r),o="".concat("save.","slot."),s="".concat(o,"data").concat(r),u="".concat(o,"info").concat(r),c=new Set,l=new Set;function d(e,t,r){var n=_typeof(r);if("object"!==n&&"undefined"!==n)throw new TypeError("metadata parameter must be an object or null/undefined");var a=Config.saves.metadata?Config.saves.metadata(e):undefined,i=_typeof(a);if("object"!==i&&"undefined"!==i)throw new TypeError("Config.saves.metadata function must return an object or null/undefined");var o,s={type:e};null!=t&&(o=String(t).trim()),o||"function"!=typeof Config.saves.descriptions||"string"==typeof(o=Config.saves.descriptions(e))&&(o=o.trim()),s.desc=o||"".concat(L10n.get("textTurn")," ").concat(State.turns);var u=Object.assign({},a,r);return Object.keys(u).length>0&&(s.metadata=u),s}function p(t){var r;switch(t){case e.Auto:r=y(k);break;case e.Slot:r=y(x);break;default:r=y(w)}switch(r.length){case 0:return{index:-1};case 1:return{index:f(r[0]),type:b(r[0])}}return r.map(function(e){return{value:{index:f(e),type:b(e)},date:storage.get(e).date}}).sort(function(e,t){return t.date-e.date}).first().value}function f(e){var t=e.lastIndexOf(r);if(-1===t)throw new Error("unable to get index from save key (received: ".concat(e,")"));return Number(e.slice(t+1))}function h(e){return"".concat(i).concat(e)}function g(e){return"".concat(a).concat(e)}function m(e){return"".concat(u).concat(e)}function v(e){return"".concat(s).concat(e)}function y(e){return storage.keys().filter(e)}function b(t){return E(t)?e.Auto:e.Slot}function w(e){return e.startsWith(i)||e.startsWith(u)}function E(e){return e.startsWith(n)}function k(e){return e.startsWith(i)}function S(e){return e.startsWith(o)}function x(e){return e.startsWith(u)}function j(e,t,r){if("string"!=typeof t)throw new Error("filename parameter must be a string");var n=createFilename(t);if(""===n)throw new Error("filename parameter must not consist solely of illegal characters");var a=function(e){if(!(e instanceof Date))throw new TypeError("createDatestamp date parameter must be a Date object");var t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0".concat(t)),r<10&&(r="0".concat(r)),n<10&&(n="0".concat(n)),a<10&&(a="0".concat(a)),i<10&&(i="0".concat(i)),"".concat(e.getFullYear()).concat(t).concat(r,"-").concat(n).concat(a).concat(i)}(new Date),i=createFilename(r)||"save";saveAs(new Blob([e],{type:"text/plain;charset=UTF-8"}),"".concat(n,"-").concat(a,".").concat(i))}function T(e){var t=e.data,r=e.dataKey,n=e.info,a=e.infoKey;try{storage.set(r,t)&&(storage.set(a,n)||storage.delete(r))}catch(e){throw storage.delete(r),storage.delete(a),e}}function O(){return C(),L(),!0}function A(){return M()||W()}function C(){return y(E).forEach(function(e){return storage.delete(e)}),!0}function _(e){if(!Number.isInteger(e))throw new TypeError("auto save index must be an integer");if(e<0||e>t)throw new RangeError("auto save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.delete(h(e)),storage.delete(g(e)),!0}function D(e){if(!Number.isInteger(e))throw new TypeError("auto save index must be an integer");if(e<0||e>t)throw new RangeError("auto save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.get(h(e))}function P(e){if(!Number.isInteger(e))throw new TypeError("auto save index must be an integer");if(e<0||e>t)throw new RangeError("auto save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.has(h(e))}function M(){return"cookie"!==storage.name&&Config.saves.maxAutoSaves>0}function I(e){return new Promise(function(r){if(!Number.isInteger(e))throw new TypeError("auto save index must be an integer");if(e<0||e>t)throw new RangeError("auto save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var n=storage.get(h(e)),a=storage.get(g(e));if(!n||!a)throw new Error(L10n.get("saveErrorNonexistent"));K(Object.assign(n,a)),r(!0)})}function N(t,r){if(!M()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(e.Auto))return!1;var n=(p(e.Auto).index+1)%Config.saves.maxAutoSaves,a=h(n),i=g(n),o=J(Z(d(e.Auto,t,r))),s=o.info;T({data:o.data,dataKey:i,info:s,infoKey:a})}function L(){return y(S).forEach(function(e){return storage.delete(e)}),!0}function R(e){if(!Number.isInteger(e))throw new TypeError("slot save index must be an integer");if(e<0||e>t)throw new RangeError("slot save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.delete(m(e)),storage.delete(v(e)),!0}function Q(e){if(!Number.isInteger(e))throw new TypeError("slot save index must be an integer");if(e<0||e>t)throw new RangeError("slot save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.get(m(e))}function F(e){if(!Number.isInteger(e))throw new TypeError("slot save index must be an integer");if(e<0||e>t)throw new RangeError("slot save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));return storage.has(m(e))}function W(){return"cookie"!==storage.name&&Config.saves.maxSlotSaves>0}function V(e){return new Promise(function(r){if(!Number.isInteger(e))throw new TypeError("slot save index must be an integer");if(e<0||e>t)throw new RangeError("slot save index out of bounds (range: 0–".concat(t,"; received: ").concat(e,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var n=storage.get(m(e)),a=storage.get(v(e));if(!n||!a)throw new Error(L10n.get("saveErrorNonexistent"));K(Object.assign(n,a)),r(!0)})}function B(t,r,n){if(!Number.isInteger(t))throw new TypeError("slot save index must be an integer");if(t<0||t>=Config.saves.maxSlotSaves)throw new RangeError("slot save index out of bounds (range: 0–".concat(Config.saves.maxSlotSaves-1,"; received: ").concat(t,")"));if(!W()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(e.Slot))throw new Error(L10n.get("saveErrorDisallowed"));var a=m(t),i=v(t),o=J(Z(d(e.Slot,r,n))),s=o.info;T({data:o.data,dataKey:i,info:s,infoKey:a})}function U(){return y(x).length}function z(e){return new Promise(function(t,r){var n=new FileReader;jQuery(n).on("loadend",function(){try{if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));if(n.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(n.error));var e;try{e=Serial.parse(LZString.decompressFromBase64(n.result))}catch(e){throw new Error(L10n.get("saveErrorDecodeFail"))}K(e),t(e.metadata)}catch(e){r(e)}}),n.readAsText(e.target.files[0])})}function q(t,r){if(null==t)throw new Error("Save.disk.save filename parameter is required");if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(e.Disk))throw new Error(L10n.get("saveErrorDisallowed"));var n=d(e.Disk,t,r);j(LZString.compressToBase64(Serial.stringify(Z(n))),t,"save")}function H(e){return new Promise(function(t){if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var r;try{r=Serial.parse(LZString.decompressFromBase64(e))}catch(e){throw new Error(L10n.get("saveErrorDecodeFail"))}K(r),t(r.metadata)})}function $(t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(e.Base64))throw new Error(L10n.get("saveErrorDisallowed"));var r=d(e.Base64,null,t);return LZString.compressToBase64(Serial.stringify(Z(r)))}function Z(t){var r=Object.assign({},t,{date:Date.now(),id:Config.saves.id,state:State.marshalForSave()});return null!=Config.saves.version&&(r.version=Config.saves.version),l.forEach(function(t){return t(r,function(t){switch(t.type){case e.Auto:return{type:"autosave"};case e.Slot:return{type:"slot"};case e.Disk:return{type:"disk"};case e.Base64:return{type:"serialize"}}throw new Error("save.type must be an integer (received: ".concat(_typeof(t.type),")"))}(r))}),r.state.delta=State.deltaEncode(r.state.history),delete r.state.history,r}function J(e){var t=e.state;return{info:_objectWithoutProperties(e,_excluded3),data:{state:t}}}function K(t){if(null==t||"object"!==_typeof(t)||!Object.hasOwn(t,"id")||!Object.hasOwn(t,"state")||"object"!==_typeof(t.state)||!Object.hasOwn(t.state,"delta"))throw new Error(L10n.get("saveErrorInvalidData"));if(t.id!==Config.saves.id)throw new Error(L10n.get("saveErrorIdMismatch"));if(t.state.history=State.deltaDecode(t.state.delta),delete t.state.delta,"string"==typeof t.type){switch(t.type){case"auto":case"autosave":t.type=e.Auto;break;case"slot":t.type=e.Slot;break;case"disk":t.type=e.Disk;break;case"base64":case"serialize":t.type=e.Base64}if("number"!=typeof t.type)throw new Error("save.type is unknown")}c.forEach(function(e){return e(t)}),State.unmarshalForSave(t.state)}return Object.preventExtensions(Object.create(null,{Type:{value:e},MAX_INDEX:{get:function(){return t}},init:{value:function(){return function(){var t=storage.get("saves");if(null!==t){if(C(),L(),t.autosave){var r=J(t.autosave),n=r.info,a=r.data;n.desc=n.title,delete n.title,n.type=e.Auto;var i=h(0),o=g(0);storage.set(o,a)&&(storage.set(i,n)||storage.delete(o))}t.slots.forEach(function(t,r){if(t){var n=J(t),a=n.info,i=n.data;a.desc=a.title,delete a.title,a.type=e.Slot;var o=m(r),s=v(r);storage.set(s,i)&&(storage.set(o,a)||storage.delete(s))}}),storage.delete("saves")}}(),!0}},browser:{value:Object.preventExtensions(Object.create(null,{clear:{value:O},continue:{value:function(){var t=p();return-1===t.index?Promise.reject(new Error(L10n.get("saveErrorNonexistent"))):t.type===e.Auto?I(t.index):V(t.index)}},isEnabled:{value:A},size:{get:function(){return y(w).length}},auto:{value:Object.preventExtensions(Object.create(null,{clear:{value:C},delete:{value:_},entries:{value:function(){return y(k).map(function(e){return{index:f(e),info:storage.get(e)}}).sort(function(e,t){return t.info.date-e.info.date})}},get:{value:D},has:{value:P},isEnabled:{value:M},load:{value:I},save:{value:N},size:{get:function(){return y(k).length}}}))},slot:{value:Object.preventExtensions(Object.create(null,{clear:{value:L},delete:{value:R},entries:{value:function(){return y(x).map(function(e){return{index:f(e),info:storage.get(e)}}).sort(function(e,t){return e.index-t.index})}},get:{value:Q},has:{value:F},isEnabled:{value:W},load:{value:V},save:{value:B},size:{get:U}}))}}))},disk:{value:Object.preventExtensions(Object.create(null,{export:{value:function(e){if(null==e)throw new Error("Save.browser.export filename parameter is required");var t=y(k).map(function(e){var t=f(e),r=storage.get(e),n=storage.get(g(t));if(!r||!n)throw new Error("during saves export auto save info or data nonexistent");return{index:t,info:r,data:n}}),r=y(x).map(function(e){var t=f(e),r=storage.get(e),n=storage.get(v(t));if(!r||!n)throw new Error("during saves export slot save info or data nonexistent");return{index:t,info:r,data:n}});j(LZString.compressToBase64(Serial.stringify({auto:t,slot:r})),e,"savesbundle")}},import:{value:function(e){return new Promise(function(t,r){var n=new FileReader;jQuery(n).on("loadend",function(){try{if(n.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(n.error));var e,a=function(e){return!Object.hasOwn(e,"index")||!Object.hasOwn(e,"info")||!Object.hasOwn(e,"data")};try{e=Serial.parse(LZString.decompressFromBase64(n.result))}catch(e){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==e||"object"!==_typeof(e)||!Object.hasOwn(e,"auto")||!(e.auto instanceof Array)||e.auto.some(a)||!Object.hasOwn(e,"slot")||!(e.slot instanceof Array)||e.slot.some(a))throw new Error(L10n.get("saveErrorInvalidData"));C(),L(),e.auto.forEach(function(e){return T({data:e.data,dataKey:g(e.index),info:e.info,infoKey:h(e.index)})}),e.slot.forEach(function(e){return T({data:e.data,dataKey:v(e.index),info:e.info,infoKey:m(e.index)})}),t(!0)}catch(e){r(e)}}),n.readAsText(e.target.files[0])})}},load:{value:z},save:{value:q}}))},base64:{value:Object.preventExtensions(Object.create(null,{export:{value:function(){var e=y(k).map(function(e){var t=f(e),r=storage.get(e),n=storage.get(g(t));if(!r||!n)throw new Error("during saves export auto save info or data nonexistent");return{index:t,info:r,data:n}}),t=y(x).map(function(e){var t=f(e),r=storage.get(e),n=storage.get(v(t));if(!r||!n)throw new Error("during saves export slot save info or data nonexistent");return{index:t,info:r,data:n}});return LZString.compressToBase64(Serial.stringify({auto:e,slot:t}))}},import:{value:function(e){return new Promise(function(t){var r,n=function(e){return!Object.hasOwn(e,"index")||!Object.hasOwn(e,"info")||!Object.hasOwn(e,"data")};try{r=Serial.parse(LZString.decompressFromBase64(e))}catch(e){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==r||"object"!==_typeof(r)||!Object.hasOwn(r,"auto")||!(r.auto instanceof Array)||r.auto.some(n)||!Object.hasOwn(r,"slot")||!(r.slot instanceof Array)||r.slot.some(n))throw new Error(L10n.get("saveErrorInvalidData"));C(),L(),r.auto.forEach(function(e){return T({data:e.data,dataKey:g(e.index),info:e.info,infoKey:h(e.index)})}),r.slot.forEach(function(e){return T({data:e.data,dataKey:v(e.index),info:e.info,infoKey:m(e.index)})}),t(!0)})}},load:{value:H},save:{value:$}}))},onLoad:{value:Object.preventExtensions(Object.create(null,{add:{value:function(e){var t=getTypeOf(e);if("function"!==t)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(t,")"));c.add(e)}},clear:{value:function(){c.clear()}},delete:{value:function(e){return c.delete(e)}},size:{get:function(){return c.size}}}))},onSave:{value:Object.preventExtensions(Object.create(null,{add:{value:function(e){var t=getTypeOf(e);if("function"!==t)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(t,")"));l.add(e)}},clear:{value:function(){l.clear()}},delete:{value:function(e){return l.delete(e)}},size:{get:function(){return l.size}}}))},get:{value:function(){throw new Error("[REMOVED] Save.get() has been removed.")}},clear:{value:function(){return console.warn("[DEPRECATED] Save.clear() is deprecated."),O()}},ok:{value:function(){return console.warn("[DEPRECATED] Save.ok() is deprecated."),A()}},autosave:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.autosave.ok() is deprecated."),M()}},has:{value:function(){return console.warn("[DEPRECATED] Save.autosave.has() is deprecated."),P(0)}},get:{value:function(){return console.warn("[DEPRECATED] Save.autosave.get() is deprecated."),D(0)}},load:{value:function(){return console.warn("[DEPRECATED] Save.autosave.load() is deprecated."),I(0)}},save:{value:function(){return console.warn("[DEPRECATED] Save.autosave.save() is deprecated."),N.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.autosave.delete() is deprecated."),_(0)}}}))},slots:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.slots.ok() is deprecated."),W()}},length:{get:function(){return console.warn("[DEPRECATED] Save.slots.length is deprecated."),Config.saves.maxSlotSaves}},isEmpty:{value:function(){return console.warn("[DEPRECATED] Save.slots.isEmpty() is deprecated."),0===U()}},count:{value:function(){return console.warn("[DEPRECATED] Save.slots.count() is deprecated."),U()}},has:{value:function(){return console.warn("[DEPRECATED] Save.slots.has() is deprecated."),F.apply(void 0,arguments)}},get:{value:function(){return console.warn("[DEPRECATED] Save.slots.get() is deprecated."),Q.apply(void 0,arguments)}},load:{value:function(){return console.warn("[DEPRECATED] Save.slots.load() is deprecated."),V.apply(void 0,arguments)}},save:{value:function(){return console.warn("[DEPRECATED] Save.slots.save() is deprecated."),B.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.slots.delete() is deprecated."),R.apply(void 0,arguments)}}}))},export:{value:function(){return console.warn("[DEPRECATED] Save.export() is deprecated."),q.apply(void 0,arguments)}},import:{value:function(){return console.warn("[DEPRECATED] Save.import() is deprecated."),z.apply(void 0,arguments)}},serialize:{value:function(){return console.warn("[DEPRECATED] Save.serialize() is deprecated."),$.apply(void 0,arguments)}},deserialize:{value:function(){return console.warn("[DEPRECATED] Save.deserialize() is deprecated."),H.apply(void 0,arguments)}}}))}(),Setting=function(){var e=enumFrom({Header:0,Toggle:1,List:2,Range:3,Value:4}),t=[];function r(e){window.SugarCube.settings=settings=e}function n(e){var t={name:e.name,value:settings[e.name],default:e.default};return Object.hasOwn(e,"list")&&(t.list=e.list),Object.hasOwn(e,"min")&&(t.min=e.min),Object.hasOwn(e,"max")&&(t.max=e.max),Object.hasOwn(e,"step")&&(t.step=e.step),t}function a(){return r(i()),storage.delete("settings"),!0}function i(){return Object.create(null)}function o(){var n=i(),a=storage.get("settings")||i();t.filter(function(t){return t.type!==e.Header}).forEach(function(e){return n[e.name]=e.default}),r(Object.assign(n,a))}function s(){var r=i();return Object.keys(settings).length>0&&t.filter(function(t){return t.type!==e.Header&&settings[t.name]!==t.default}).forEach(function(e){return r[e.name]=settings[e.name]}),0===Object.keys(r).length?(storage.delete("settings"),!0):storage.set("settings",r)}function u(r,n,a){if(arguments.length<2){var i=[];throw arguments.length<1&&i.push("type"),arguments.length<2&&i.push("name"),new Error("missing parameters, no ".concat(i.join(" or ")," specified"))}if(null==a)a={};else if("object"!==_typeof(a))throw new TypeError("definition parameter must be an object");if(l(n))throw new Error('cannot clobber existing setting "'.concat(n,'"'));var o,s,u={type:r,name:n};if(r!==e.Value&&(u.label="string"==typeof a.label?a.label.trim():""),"string"==typeof a.desc){var c=a.desc.trim();""!==c&&(u.desc=c)}switch(r){case e.Header:break;case e.List:if(!Object.hasOwn(a,"list"))throw new Error("no list specified");if(!Array.isArray(a.list))throw new TypeError("list must be an array");if(0===a.list.length)throw new Error("list must not be empty");if(u.list=Object.freeze(a.list),null==a.default)u.default=a.list[0];else{var d=a.list.indexOf(a.default);if(-1===d)throw new Error("list does not contain default");u.default=a.list[d]}break;case e.Range:if(!Object.hasOwn(a,"min"))throw new Error("no min specified");if("number"!=typeof a.min||Number.isNaN(a.min)||!Number.isFinite(a.min))throw new TypeError("min must be a finite number");if(!Object.hasOwn(a,"max"))throw new Error("no max specified");if("number"!=typeof a.max||Number.isNaN(a.max)||!Number.isFinite(a.max))throw new TypeError("max must be a finite number");if(!Object.hasOwn(a,"step"))throw new Error("no step specified");if("number"!=typeof a.step||Number.isNaN(a.step)||!Number.isFinite(a.step)||a.step<=0)throw new TypeError("step must be a finite number greater than zero");var p=-1===(s=(o=String(a.step)).lastIndexOf("."))?0:o.length-s-1;if(function(e){if(p>0){var t=Number("".concat(a.min,"e").concat(p)),r=Number("".concat(a.step,"e").concat(p)),n=Number("".concat(e,"e").concat(p))-t;return Number("".concat(n-n%r+t,"e-").concat(p))}var i=e-a.min;return i-i%a.step+a.min}(a.max)!==a.max)throw new RangeError("max (".concat(a.max,") is not a multiple of the step (").concat(a.step,") plus the min (").concat(a.min,")"));if(u.max=a.max,u.min=a.min,u.step=a.step,null==a.default)u.default=a.max;else{if("number"!=typeof a.default||Number.isNaN(a.default)||!Number.isFinite(a.default))throw new TypeError("default must be a finite number");if(a.default<a.min)throw new RangeError("default (".concat(a.default,") is less than min (").concat(a.min,")"));if(a.default>a.max)throw new RangeError("default (".concat(a.default,") is greater than max (").concat(a.max,")"));u.default=a.default}break;case e.Toggle:u.default=Boolean(a.default);break;case e.Value:u.default=a.default;break;default:throw new Error("unknown Setting type: ".concat(r))}"function"==typeof a.onInit&&(u.onInit=Object.freeze(a.onInit)),"function"==typeof a.onChange&&(u.onChange=Object.freeze(a.onChange)),t.push(Object.freeze(u))}function c(e){return t.find(function(t){return t.name===e})}function l(e){return t.some(function(t){return t.name===e})}return Object.preventExtensions(Object.create(null,{Types:{value:e},init:{value:function(){o(),t.forEach(function(e){if(Object.hasOwn(e,"onInit")){var t=n(e);e.onInit.call(t,t)}})}},clear:{value:a},create:{value:i},load:{value:o},reset:{value:function(t){if(0===arguments.length)a(),o();else{if(null==t||!l(t))throw new Error('nonexistent setting "'.concat(t,'"'));var r=c(t);r.type!==e.Header&&(settings[t]=r.default)}return s()}},save:{value:s},add:{value:u},addHeader:{value:function(t,r){u(e.Header,t,{desc:r})}},addList:{value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];u.apply(void 0,[e.List].concat(r))}},addRange:{value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];u.apply(void 0,[e.Range].concat(r))}},addToggle:{value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];u.apply(void 0,[e.Toggle].concat(r))}},addValue:{value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];u.apply(void 0,[e.Value].concat(r))}},delete:{value:function(e){for(var r=0;r<t.length;++r)if(t[r].name===e){t.splice(r,1);break}Object.hasOwn(settings,e)&&delete settings[e]}},forEach:{value:function(e,r){t.forEach(e,r)}},get:{value:c},has:{value:l},isEmpty:{value:function(){return 0===t.length}},getValue:{value:function(e){return settings[e]}},setValue:{value:function(e,t){if(!l(e))throw new Error("no such setting");settings[e]=t,s();var r=c(e);if(Object.hasOwn(r,"onChange")){var a=n(r);r.onChange.call(a,a)}return!0}}}))}(),Story=function(){var e="",t="",r="",n=l(),a=[],i=[],o=[],s=[],u=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryDisplayTitle","StoryInit","StoryInterface","StoryMenu","StoryShare","StorySubtitle"],c=["init","widget"];function l(e){var t=Object.create(null);return e?Object.assign(t,e):t}function d(){return t}function p(){return r}function f(e,t){if("function"!=typeof e)throw new TypeError("Story.filter() predicate parameter must be a function");for(var r=[],a=0,i=Object.keys(n);a<i.length;++a){var o=n[i[a]];e.call(void 0===t?this:t,o)&&r.push(o)}return r}return Object.preventExtensions(Object.create(null,{init:{value:function(){function l(e,t){if(e.tags.includesAny(c))throw new Error("".concat(t,' passage "').concat(e.name,'" includes code tags; invalid: "').concat(e.tags.filter(function(e){return c.includes(e)}).sort().join('", "'),'"'))}function d(e){var t=e.tags.filter(function(e){return c.includes(e)}).sort();if(t.length>1)throw new Error('passage "'.concat(e.name,'" includes multiple code tags; invalid: "').concat(t.join('", "'),'"'))}var p=jQuery("tw-storydata"),f=p.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(p.attr("options")),p.children("style").each(function(e){o.push(new Passage("tw-user-style-".concat(e),this))}),p.children("script").each(function(e){i.push(new Passage("tw-user-script-".concat(e),this))}),p.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var e=jQuery(this),t=e.attr("pid")||"",r=new Passage(e.attr("name"),this);t===f&&""!==f?(Config.passages.start=r.name,l(r,"starting"),n[r.name]=r):u.includes(r.name)?(l(r,"code"),n[r.name]=r):r.tags.includes("init")?(d(r),a.push(r)):r.tags.includes("widget")?(d(r),s.push(r)):n[r.name]=r}),e=p.attr("ifid"),r=function(e){if(null==e)throw new Error("story name must not be null or undefined");var t=decodeEntities(String(e)).trim();if(""===t)throw new Error("story name must not be empty or consist solely of whitespace");return t}("index"),t=function(t){var r=createSlug(t);if(""===r)if(""!==e)r=e;else for(var n=0;n<t.length;++n){var a=charAndPosAt(t,n),i=a.char,o=a.start,s=a.end;r+=i.codePointAt(0).toString(16),n+=s-o}return r}(r),Config.saves.id=t,document.title=r}},id:{get:d},ifId:{get:function(){return e}},name:{get:p},add:{value:function(e){if("Object"!==getTypeOf(e))throw new TypeError("Story.add() descriptor parameter must be a generic object");if(Object.hasOwn(n,e.name))return!1;var t=document.createElement("div");t.setAttribute("name",e.name),t.setAttribute("tags",e.tags),t.textContent=e.text;var r=new Passage(e.name,t);if(u.includes(r.name))throw new Error('Story.add() passage descriptor object "'.concat(r.name,'" must not be a code passage'));if(r.tags.includesAny(c))throw new Error('Story.add() passage descriptor object "'.concat(r.name,'" must not include code tags'));return n[r.name]=r,!0}},delete:{value:function(e){var t=_typeof(e);switch(t){case"number":case"string":var r=String(e);if(!Object.hasOwn(n,r))return!1;if(r===Config.passages.start||u.includes(r))throw new Error('Story.delete() passage "'.concat(r,'" must not be a code passage'));if(n[r].tags.includesAny(c))throw new Error('Story.delete() passage "'.concat(r,'" must not include code tags'));return delete n[r],!0;case"undefined":break;case"object":t=null===e?"null":"an object";break;default:t="a ".concat(t)}throw new TypeError("Story.delete() name parameter cannot be ".concat(t))}},filter:{value:f},find:{value:function(e,t){if("function"!=typeof e)throw new TypeError("Story.find() predicate parameter must be a function");for(var r=0,a=Object.keys(n);r<a.length;++r){var i=n[a[r]];if(e.call(void 0===t?this:t,i))return i}}},get:{value:function(e){var t=_typeof(e);switch(t){case"number":case"string":var r=String(e);return Object.hasOwn(n,r)?n[r]:new Passage(r||"(unknown)");case"undefined":break;case"object":t=null===e?"null":"an object";break;default:t="a ".concat(t)}throw new TypeError("Story.get() name parameter cannot be ".concat(t))}},getInits:{value:function(){return Object.freeze(Array.from(a))}},getNormals:{value:function(){return Object.freeze(l(n))}},getScripts:{value:function(){return Object.freeze(Array.from(i))}},getStyles:{value:function(){return Object.freeze(Array.from(o))}},getWidgets:{value:function(){return Object.freeze(Array.from(s))}},has:{value:function(e){var t=_typeof(e);switch(t){case"number":case"string":return Object.hasOwn(n,String(e));case"undefined":break;case"object":t=null===e?"null":"an object";break;default:t="a ".concat(t)}throw new TypeError("Story.has name parameter cannot be ".concat(t))}},domId:{get:function(){return console.warn("[DEPRECATED] Story.domId is deprecated."),d()}},title:{get:function(){return console.warn("[DEPRECATED] Story.title is deprecated."),p()}},lookup:{value:function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"name";return console.warn("[DEPRECATED] Story.lookup() is deprecated."),f(function(r){return"object"===_typeof(r[e])&&null!==r[e]?r[e]instanceof Array&&r[e].some(function(e){return sameValueZero(e,t)}):sameValueZero(r[e],t)}).sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1})}},lookupWith:{value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"name";if(console.warn("[DEPRECATED] Story.lookupWith() is deprecated."),"function"!=typeof e)throw new TypeError("Story.lookupWith() predicate parameter must be a function");return f(e).sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1})}}}))}(),UI=function(){function e(e,t){var r=t,n=Config.debug;Config.debug=!1;try{null==r&&(r=document.createElement("ul"));var a=document.createDocumentFragment();new Wikifier(a,Story.get(e).processText().trim(),{cleanup:!1});var i=Array.from(a.querySelectorAll(".error")).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(i.length>0)throw new Error(i.join("; "));for(;a.hasChildNodes();){var o=a.firstChild;if(o.nodeType===Node.ELEMENT_NODE&&"A"===o.nodeName.toUpperCase()){var s=document.createElement("li");r.appendChild(s),s.appendChild(o)}else a.removeChild(o)}}finally{Config.debug=n}return r}function t(){return Dialog.create(L10n.get("restartTitle"),"restart").append("<p>".concat(L10n.get("restartMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartTextOk","textOk"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(Dialog.body()).find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function r(){function e(e,t){var r=document.createElement("input");return jQuery(r).attr({id:e,type:"file",tabindex:-1,"aria-hidden":!0}).css({display:"block",visibility:"hidden",position:"fixed",left:"-16128px",top:"-16128px",width:"1px",height:"1px"}).on("change",t),r}function t(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-".concat(e)).text(r);return t&&i.addClass(t),a?i.ariaClick({label:n},a):i.ariaDisabled(!0),jQuery(document.createElement("li")).append(i)}var n=Save.browser.isEnabled();if(!n&&!Has.fileAPI)return a(L10n.get("warningNoSaves")),!1;Dialog.create(L10n.get("savesTitle"),"saves");var i=jQuery(Dialog.body());if(n){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderBrowser")).appendTo(i),i.append(function(){function e(e,t,r,n,i){var o;switch(e){case"delete":o=L10n.get("textDelete");break;case"load":o=L10n.get("textLoad");break;case"save":o=L10n.get("textSave");break;default:throw new Error('buildSaves unknown ID "'.concat(e,'"'))}var s=jQuery(document.createElement("button")).attr("id","saves-".concat(e,"-").concat(n)).addClass(e);return t&&s.addClass(t),i?s.ariaClick({label:"".concat(o," ").concat(r," ").concat(n+1)},function(){try{i(n)}catch(e){a("".concat(e.message,".</p><p>").concat(L10n.get("textAborting"),"."))}}):s.ariaDisabled(!0),s}var t=jQuery(document.createElement("tbody"));Save.browser.auto.entries().forEach(function(n){var i=n.index,o=n.info,s=jQuery(document.createElement("td")),u=jQuery(document.createElement("td")),c=jQuery(document.createElement("td")),l=jQuery(document.createElement("td"));jQuery(document.createElement("div")).text(o.desc).appendTo(c),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserAuto")," ").concat(i+1,"  •  ")).append(o.date?"".concat(new Date(o.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo(c),u.append(e("load","ui-close",L10n.get("savesTextBrowserAuto"),i,function(e){jQuery(document).one(":dialogclosed",function(){Save.browser.auto.load(e).then(Engine.show,function(e){return a("".concat(e.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))})})})),l.append(e("delete",null,L10n.get("savesTextBrowserAuto"),i,function(e){Save.browser.auto.delete(e),r()})),jQuery(document.createElement("tr")).append(s).append(u).append(c).append(l).appendTo(t)});var n="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Slot);return Save.browser.slot.entries().reduce(function(e,t){return e[t.index]=t,e},Array.from({length:Config.saves.maxSlotSaves},function(e,t){return{index:t}})).forEach(function(i){var o=i.index,s=i.info,u=jQuery(document.createElement("td")),c=jQuery(document.createElement("td")),l=jQuery(document.createElement("td")),d=jQuery(document.createElement("td"));s?(jQuery(document.createElement("div")).text(s.desc).appendTo(l),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(o+1,"  •  ")).append(s.date?"".concat(new Date(s.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo(l),c.append(e("load","ui-close",L10n.get("savesTextBrowserSlot"),o,function(e){jQuery(document).one(":dialogclosed",function(){Save.browser.slot.load(e).then(Engine.show,function(e){return a("".concat(e.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))})})})),d.append(e("delete",null,L10n.get("savesTextBrowserSlot"),o,function(e){Save.browser.slot.delete(e),r()}))):(l.addClass("empty"),jQuery(document.createElement("div")).text(" ").appendTo(l),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(o+1)).appendTo(l),c.append(e("save",null,L10n.get("savesTextBrowserSlot"),o,o<Config.saves.maxSlotSaves&&n?function(e){Save.browser.slot.save(e),r()}:null)),d.append(e("delete",null,L10n.get("savesTextBrowserSlot"),o))),jQuery(document.createElement("tr")).append(u).append(c).append(l).append(d).appendTo(t)}),jQuery(document.createElement("table")).attr("id","saves-list").append(t)}());var o=jQuery(document.createElement("ul")).addClass("buttons slots").appendTo(i);if(Has.fileAPI){var s=e("saves-import-handler",function(e){Save.disk.import(e).then(r,function(e){return a("".concat(e.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))})});o.append(t("export",null,"".concat(L10n.get("textExport"),"…"),L10n.get("savesLabelBrowserExport"),function(){return Save.disk.export("saves-export-".concat(Story.name))})).append(t("import",null,"".concat(L10n.get("textImport"),"…"),L10n.get("savesLabelBrowserImport"),function(){return s.click()})),jQuery(s).appendTo(i)}o.append(t("clear",null,L10n.get("textClear"),L10n.get("savesLabelBrowserClear"),Save.browser.size>0?function(){Save.browser.clear(),r()}:null))}if(Has.fileAPI){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderDisk")).appendTo(i);var u=jQuery(document.createElement("ul")).addClass("buttons").appendTo(i),c=e("saves-disk-load-handler",function(e){jQuery(document).one(":dialogclosed",function(){Save.disk.load(e).then(Engine.show,function(e){return a("".concat(e.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))})}),Dialog.close()});u.append(t("disk-save",null,"".concat(L10n.get("textSave"),"…"),L10n.get("savesLabelDiskSave"),"function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Disk)?function(){return Save.disk.save(Story.name)}:null)).append(t("disk-load",null,"".concat(L10n.get("textLoad"),"…"),L10n.get("savesLabelDiskLoad"),function(){return c.click()})),jQuery(c).appendTo(i)}return!0}function n(){Dialog.create(L10n.get("settingsTitle"),"settings");var e=jQuery(Dialog.body());return Setting.forEach(function(t){switch(t.type){case Setting.Types.Header:var r=t.name,n=createSlug(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2"));return a.attr("id","header-body-".concat(n)).append(i).appendTo(e),i.attr("id","header-heading-".concat(n)).wikiWithOptions({cleanup:!1},r),void(t.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(n)).wikiWithOptions({cleanup:!1},t.desc).appendTo(a));case Setting.Types.Value:return}var o,s=t.name,u=createSlug(s),c=jQuery(document.createElement("div")),l=jQuery(document.createElement("label")),d=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append(l).append(d).appendTo(c),t.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(u)).wikiWithOptions({cleanup:!1},t.desc).appendTo(c),l.attr({id:"setting-label-".concat(u),for:"setting-control-".concat(u)}).wikiWithOptions({cleanup:!1},t.label),null==Setting.getValue(s)&&Setting.setValue(s,t.default),t.type){case Setting.Types.List:o=jQuery(document.createElement("select"));for(var p=0,f=t.list.length;p<f;++p)jQuery(document.createElement("option")).val(p).text(t.list[p]).appendTo(o);o.val(t.list.indexOf(Setting.getValue(s))).attr("tabindex",0).on("change",function(){Setting.setValue(s,t.list[Number(this.value)])});break;case Setting.Types.Range:(o=jQuery(document.createElement("input"))).attr({type:"range",min:t.min,max:t.max,step:t.step,value:Setting.getValue(s),tabindex:0}).on("change input",function(){Setting.setValue(s,Number(this.value))}).on("keypress",function(e){13===e.which&&(e.preventDefault(),triggerEvent("change",o))});break;case Setting.Types.Toggle:o=jQuery(document.createElement("button")),Setting.getValue(s)?o.addClass("enabled").text(L10n.get("textOn")):o.text(L10n.get("textOff")),o.ariaClick(function(){var e=Setting.getValue(s);e?jQuery(this).removeClass("enabled").text(L10n.get("textOff")):jQuery(this).addClass("enabled").text(L10n.get("textOn")),Setting.setValue(s,!e)})}o.attr("id","setting-control-".concat(u)).appendTo(d),c.attr("id","setting-body-".concat(u)).appendTo(e)}),e.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsTextOk","textOk"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsTextReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function a(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=Dialog.create(L10n.get("alertTitle"),"alert").append("<p>".concat(e,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertTextOk","textOk"]),"</button></li>")+"</ul>")).open.apply(t,n)}function i(){console.warn("[DEPRECATED] UI.buildJumpto() is deprecated.");var e=document.createElement("ul");Dialog.create(L10n.get("jumptoTitle"),"jumpto list").append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one(":dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text("".concat(L10n.get("textTurn")," ").concat(t+r+1))).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>".concat(L10n.get("jumptoMesgUnavailable"),"</em></a></li>"))}function o(){console.warn("[DEPRECATED] UI.buildShare() is deprecated.");try{Dialog.create(L10n.get("shareTitle"),"share list").append(e("StoryShare"))}catch(e){return console.error(e),Alert.error("StoryShare",e.message),!1}return!0}return Object.preventExtensions(Object.create(null,{assembleLinkList:{value:e},buildRestart:{value:t},buildSaves:{value:r},buildSettings:{value:n},update:{value:function(){triggerEvent(":uiupdate")}},alert:{value:a},restart:{value:function(){t(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){r(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){n(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:function(){return console.warn("[DEPRECATED] UI.buildAutoload() is deprecated."),Dialog.create(L10n.get("autoloadTitle"),"autoload").append("<p>".concat(L10n.get("autoloadMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadTextOk","textOk"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one(":dialogclosed",function(){new Promise(function(e,r){t&&e(),r()}).then(function(){return Save.browser.continue()}).catch(function(){Engine.play(Config.passages.start)})})}),!0}},buildJumpto:{value:i},buildShare:{value:o},jumpto:{value:function(){i(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){o(),Dialog.open.apply(Dialog,arguments)}}}))}(),UIBar=function(){var e=null;function t(t){var r;return e&&!e.hasClass("stowed")&&(t&&((r=jQuery("#story")).addClass("no-transition"),e.addClass("no-transition")),e.addClass("stowed"),t&&setTimeout(function(){r.removeClass("no-transition"),e.removeClass("no-transition")},Engine.DOM_DELAY)),UIBar}function r(){if(console.warn("[DEPRECATED] UIBar.update() is deprecated."),e)return UI.update(),UIBar}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(!document.getElementById("ui-bar")){var t,r,n,a,i,o,s=(t=L10n.get("uiBarLabelToggle"),r=L10n.get("uiBarLabelBackward"),n=L10n.get("uiBarLabelJumpto"),a=L10n.get("uiBarLabelForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(t,'" aria-label="').concat(t,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(r,'" aria-label="').concat(r,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(n,'" aria-label="').concat(n,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(a,'" aria-label="').concat(a,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-continue"><a tabindex="0">'.concat(L10n.get("continueTitle"),"</a></li>")+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));e=jQuery(s.find("#ui-bar").get(0)),s.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate".concat(".ui-bar"),(i=jQuery("#history-backward"),o=jQuery("#history-forward"),function(){i.ariaDisabled(State.length<2),o.ariaDisabled(State.length===State.size)}))}}},destroy:{value:function(){e&&(e.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),e.remove(),e=null)}},hide:{value:function(){return e&&e.hide(),UIBar}},isHidden:{value:function(){return e&&"none"===e.css("display")}},isStowed:{value:function(){return e&&e.hasClass("stowed")}},show:{value:function(){return e&&e.show(),UIBar}},start:{value:function(){if(e){("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&t(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarLabelToggle")},function(){return e.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarLabelBackward")},function(){return Engine.backward()}),Story.filter(function(e){return e.tags.includes("bookmark")}).length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarLabelJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarLabelForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove();var r,n=function(e){return jQuery(document)[Config.ui.updateStoryElements?"on":"one"](":uiupdate".concat(".ui-bar"),e)},a=function(e,t){var r=jQuery(e);Story.has(t)?n(function(){var e=document.createDocumentFragment();new Wikifier(e,Story.get(t).processText().trim()),r.empty().append(e)}):r.remove()};if(r=Story.has("StoryDisplayTitle")?function(){return setDisplayTitle(Story.get("StoryDisplayTitle").processText())}:function(){return setDisplayTitle(Story.name,!0)},n(r),a("#story-banner","StoryBanner"),a("#story-subtitle","StorySubtitle"),a("#story-author","StoryAuthor"),a("#story-caption","StoryCaption"),Story.has("StoryMenu")){var i=jQuery("#menu-story");jQuery(document).on(":uiupdate".concat(".ui-bar"),function(){try{var e=UI.assembleLinkList("StoryMenu",document.createDocumentFragment());i.empty().append(e)}catch(e){console.error(e),Alert.error("StoryMenu",e.message)}})}else jQuery("#menu-story").remove();Save.browser.size>0?(jQuery("#menu-item-continue a").ariaClick({role:"button"},function(e){e.preventDefault(),Save.browser.continue().then(function(){jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove(),Engine.show()},function(e){return UI.alert("".concat(e.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))})}).text(L10n.get("continueTitle")),jQuery(document).on(":passagestart.menu-item-continue",function(){State.turns>1&&(jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove())})):jQuery("#menu-item-continue").remove(),jQuery("#menu-item-saves a").ariaClick({role:"button"},function(e){e.preventDefault(),UI.buildSaves(),Dialog.open()}).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},function(e){e.preventDefault(),UI.buildSettings(),Dialog.open()}).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},function(e){e.preventDefault(),UI.buildRestart(),Dialog.open()}).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},function(e){e.preventDefault(),UI.buildShare(),Dialog.open()}).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove()}}},stow:{value:t},unstow:{value:function(t){var r;return e&&e.hasClass("stowed")&&(t&&((r=jQuery("#story")).addClass("no-transition"),e.addClass("no-transition")),e.removeClass("stowed"),t&&setTimeout(function(){r.removeClass("no-transition"),e.removeClass("no-transition")},Engine.DOM_DELAY)),UIBar}},setStoryElements:{value:r},update:{value:r}}))}(),DebugBar=function(){var e="debug.state",t=new RegExp("^".concat(Patterns.variable,"$")),r=/^\d+$/,n=[],a=[],i=null,o=null,s=!0,u=null,c=null,l=null,d=null,p=null;function f(){j(),A(),u.css("right","-".concat(u.outerWidth(),"px")),s=!0,D()}function h(){k()&&O(),C(),u.css("right",0),s=!1,D()}function g(){s?h():f()}function m(e){t.test(e)&&(n.pushUnique(e),n.sort(),P(),M(),D())}function v(){Object.keys(State.variables).map(function(e){return n.pushUnique("$".concat(e))}),Object.keys(State.temporary).map(function(e){return n.pushUnique("_".concat(e))}),n.sort(),P(),M(),D()}function y(){n.length=0,c.empty().append("<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")),P(),M(),D()}function b(e){n.deleteFirst(e),c.find('tr[data-name="'.concat(e,'"]')).remove(),P(),M(),D()}function w(){j(),x(),D()}function E(){O(),T(),D()}function k(){return!c.attr("hidden")}function S(){c.attr("hidden")?E():w()}function x(){c.attr({"aria-hidden":!0,hidden:"hidden"})}function j(){null!==i&&(clearInterval(i),i=null)}function T(){c.removeAttr("aria-hidden hidden")}function O(){null===i&&(i=setInterval(function(){return P()},200))}function A(){null!==o&&(clearInterval(o),o=null)}function C(){null===o&&(o=setInterval(function(){return M()},500))}function _(){session.delete(e)}function D(){session.set(e,{stowed:s,watchList:n,watchEnabled:k(),viewsEnabled:DebugView.isEnabled()})}function P(){if(0!==n.length){var e,t=new Map,r=jQuery(c.children("table"));r.length>0?(e=jQuery(r.children("tbody"))).children("tr").each(function(e,r){return t.set(r.getAttribute("data-name"),jQuery(r))}):(r=jQuery(document.createElement("table")),e=jQuery(document.createElement("tbody")),r.append(e),c.empty().append(r));var a=L10n.get("debugBarLabelWatchDelete"),i=t.size>0?e.children("tr").get(0):null;n.forEach(function(r){var n=r.slice(1),o=L(("$"===r[0]?State.variables:State.temporary)[n]),s=t.get(r);if(s){var u=s.children().children("code");o!==u.text()&&u.text(o)}else s=function(e,t){var r=jQuery(document.createElement("tr")),n=jQuery(document.createElement("button")),i=jQuery(document.createElement("code"));return r.attr("data-name",e),n.addClass("watch-delete").ariaClick({one:!0,label:a},function(){return b(e)}),i.text(t),jQuery(document.createElement("td")).append(n).appendTo(r),jQuery(document.createElement("td")).text(e).appendTo(r),jQuery(document.createElement("td")).append(i).appendTo(r),r}(r,o),i?s.insertAfter(i):s.appendTo(e);i=s.get(0)})}}function M(){var e=[].concat(Object.keys(State.variables).map(function(e){return"$".concat(e)}),Object.keys(State.temporary).map(function(e){return"_".concat(e)}));if(0===e.length)return a.length=0,void l.empty();if(e.sort().deleteAll(n),e.length!==a.length||!e.every(function(e,t){return e===a[t]})){a=e;var t=document.createDocumentFragment();a.forEach(function(e){jQuery(document.createElement("option")).val(e).appendTo(t)}),l.empty().append(t)}}function I(){for(var e=State.size,t=State.expired.length,r=document.createDocumentFragment(),n=0;n<e;++n)jQuery(document.createElement("option")).val(n).text("".concat(t+n+1,". ").concat(State.history[n].title)).appendTo(r);d.empty().ariaDisabled(e<2).append(r).val(State.activeIndex)}function N(){var e=Object.keys(Story.getNormals()).sort(),t=document.createDocumentFragment();e.forEach(function(e){jQuery(document.createElement("option")).val(e).appendTo(t)}),p.empty().append(t)}function L(e){if(null===e)return"null";switch(_typeof(e)){case"bigint":case"boolean":case"number":case"symbol":case"undefined":return String(e);case"string":return JSON.stringify(e);case"function":return"Function"}var t=getToStringTag(e);if("Date"===t)return"Date {".concat(e.toLocaleString(),"}");if("RegExp"===t)return"RegExp ".concat(e.toString());var n=[];if(e instanceof Array||e instanceof Set){for(var a=e instanceof Array?e:Array.from(e),i=0,o=a.length;i<o;++i)n.push(Object.hasOwn(a,i)?L(a[i]):"<empty>");return Object.keys(a).filter(function(e){return!r.test(e)}).forEach(function(e){return n.push("".concat(L(e),": ").concat(L(a[e])))}),"".concat(t,"(").concat(a.length,") [").concat(n.join(", "),"]")}return e instanceof Map?(e.forEach(function(e,t){return n.push("".concat(L(t)," → ").concat(L(e)))}),"".concat(t,"(").concat(e.size,") {").concat(n.join(", "),"}")):(Object.keys(e).forEach(function(t){return n.push("".concat(L(t),": ").concat(L(e[t])))}),"".concat(t," {").concat(n.join(", "),"}"))}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(Config.debug){var e=L10n.get("debugBarLabelToggle"),t=L10n.get("debugBarLabelWatchAdd"),r=L10n.get("debugBarLabelWatchAll"),n=L10n.get("debugBarLabelWatchClear"),a=L10n.get("debugBarLabelWatchToggle"),i=L10n.get("debugBarLabelViewsToggle"),o=L10n.get("debugBarLabelPassagePlay");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")+"</div><div>"+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarTextWatch"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelWatchPlaceholder"),'" list="debug-bar-var-list" tabindex="0">')+'<datalist id="debug-bar-var-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(t,'" aria-label="').concat(t,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(r,'" aria-label="').concat(r,'"></button>')+'<button id="debug-bar-watch-clear" tabindex="0" title="'.concat(n,'" aria-label="').concat(n,'"></button>')+"</div><div>"+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("textTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div><div>'+'<label id="debug-bar-passage-label" for="debug-bar-passage-input">'.concat(L10n.get("debugBarTextPassage"),"</label>")+'<input id="debug-bar-passage-input" name="debug-bar-passage-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelPassagePlaceholder"),'" list="debug-bar-passage-list" tabindex="0">')+'<datalist id="debug-bar-passage-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-passage-play" tabindex="0" title="'.concat(o,'" aria-label="').concat(o,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(i,'" aria-label="').concat(i,'">').concat(L10n.get("debugBarTextViews"),"</button>")+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(a,'" aria-label="').concat(a,'">').concat(L10n.get("debugBarTextWatch"),"</button>")+"</div>"+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(e,'" aria-label="').concat(e,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),u=jQuery("#debug-bar"),c=jQuery(u.find("#debug-bar-watch").get(0)),l=jQuery(u.find("#debug-bar-var-list").get(0)),d=jQuery(u.find("#debug-bar-turn-select").get(0)),p=jQuery(u.find("#debug-bar-passage-list").get(0));var s=jQuery(u.find("#debug-bar-watch-input").get(0)),f=jQuery(u.find("#debug-bar-watch-add").get(0)),h=jQuery(u.find("#debug-bar-watch-all").get(0)),b=jQuery(u.find("#debug-bar-watch-clear").get(0)),w=jQuery(u.find("#debug-bar-passage-input").get(0)),E=jQuery(u.find("#debug-bar-passage-play").get(0)),k=jQuery(u.find("#debug-bar-views-toggle").get(0)),x=jQuery(u.find("#debug-bar-watch-toggle").get(0)),j=jQuery(u.find("#debug-bar-toggle").get(0));s.on("sc:debug-watch-add",function(){m(this.value.trim()),this.value=""}).on("keypress",function(e){13===e.which&&(e.preventDefault(),triggerEvent("sc:debug-watch-add",s))}),f.ariaClick(function(){return triggerEvent("sc:debug-watch-add",s)}),h.ariaClick(v),b.ariaClick(y),d.on("change",function(){Engine.goTo(Number(this.value))}),w.on("sc:debug-passage-play",function(){Engine.play(this.value.trim()),this.value=""}).on("keypress",function(e){13===e.which&&(e.preventDefault(),triggerEvent("sc:debug-passage-play",w))}).on("focus",N),E.ariaClick(function(){return triggerEvent("sc:debug-passage-play",w)}),k.ariaClick(function(){DebugView.toggle(),D()}),x.ariaClick(S),j.ariaClick(g),jQuery(document).on(":passageend.debug-bar",function(){P(),M()}).on(":historyupdate.debug-bar",I).on(":enginerestart.debug-bar",_)}else jQuery(document.head).find('[id|="style-ui-debug"]').remove()}},isStowed:{value:function(){return s}},start:{value:function(){Config.debug&&(function(){if(!session.has(e))return!1;var t=session.get(e);return n.push.apply(n,_toConsumableArray(t.watchList)),t.watchEnabled?(s?j():O(),T()):(j(),x()),t.viewsEnabled?DebugView.enable():DebugView.disable(),(s=t.stowed)?(A(),f()):(C(),h()),!0}()||(f(),DebugView.enable(),O(),T()),M(),I())}},stow:{value:f},toggle:{value:g},unstow:{value:h},watch:{value:Object.preventExtensions(Object.create(null,{add:{value:m},all:{value:v},clear:{value:y},delete:{value:b},disable:{value:w},enable:{value:E},isEnabled:{value:k},toggle:{value:S}}))}}))}(),LoadScreen=function(){var e=new Set,t=0;function r(){jQuery(document.documentElement).removeAttr("data-init")}function n(){jQuery(document.documentElement).attr("data-init","loading")}return Object.preventExtensions(Object.create(null,{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",function(){e.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout(function(){0===e.size&&r()},Math.max(Engine.DOM_DELAY,Config.loadDelay)):r()):n())})}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),e.clear(),r()}},hide:{value:r},show:{value:n},lock:{value:function(){return++t,e.add(t),n(),t}},unlock:{value:function(t){if(null==t)throw new Error("LoadScreen.unlock called with a null or undefined ID");e.has(t)&&e.delete(t),0===e.size&&triggerEvent("readystatechange")}},size:{get:function(){return e.size}}}))}(),Util=Object.preventExtensions(Object.create(null,{charAndPosAt:{value:function(){return console.warn("[DEPRECATED] Util.charAndPosAt() is deprecated."),charAndPosAt.apply(void 0,arguments)}},escape:{value:function(){return console.warn("[DEPRECATED] Util.escape() is deprecated."),encodeEntities.apply(void 0,arguments)}},escapeMarkup:{value:function(){return console.warn("[DEPRECATED] Util.escapeMarkup() is deprecated."),encodeMarkup.apply(void 0,arguments)}},fromCssProperty:{value:function(){return console.warn("[DEPRECATED] Util.fromCssProperty() is deprecated."),cssPropToDOMProp.apply(void 0,arguments)}},fromCssTime:{value:function(){return console.warn("[DEPRECATED] Util.fromCssTime() is deprecated."),cssTimeToMS.apply(void 0,arguments)}},getType:{value:function(){return console.warn("[DEPRECATED] Util.getType() is deprecated."),getTypeOf.apply(void 0,arguments)}},hasMediaQuery:{value:function(){return console.warn("[DEPRECATED] Util.hasMediaQuery() is deprecated."),hasMediaQuery.apply(void 0,arguments)}},newExceptionFrom:{value:function(){return console.warn("[DEPRECATED] Util.newExceptionFrom() is deprecated."),exceptionFrom.apply(void 0,arguments)}},now:{value:function(){return console.warn("[DEPRECATED] Util.now() is deprecated."),now.apply(void 0,arguments)}},parseUrl:{value:function(){return console.warn("[DEPRECATED] Util.parseUrl() is deprecated."),parseURL.apply(void 0,arguments)}},sameValueZero:{value:function(){return console.warn("[DEPRECATED] Util.sameValueZero() is deprecated."),sameValueZero.apply(void 0,arguments)}},sanitizeFilename:{value:function(){return console.warn("[DEPRECATED] Util.sanitizeFilename() is deprecated."),createFilename.apply(void 0,arguments)}},scrubEventKey:{value:function(){return console.warn("[DEPRECATED] Util.scrubEventKey() is deprecated."),scrubEventKey.apply(void 0,arguments)}},slugify:{value:function(){return console.warn("[DEPRECATED] Util.slugify() is deprecated."),createSlug.apply(void 0,arguments)}},toCssTime:{value:function(){return console.warn("[DEPRECATED] Util.toCssTime() is deprecated."),msToCSSTime.apply(void 0,arguments)}},toEnum:{value:function(){return console.warn("[DEPRECATED] Util.toEnum() is deprecated."),enumFrom.apply(void 0,arguments)}},toStringTag:{value:function(){return console.warn("[DEPRECATED] Util.toStringTag() is deprecated."),getToStringTag.apply(void 0,arguments)}},unescape:{value:function(){return console.warn("[DEPRECATED] Util.unescape() is deprecated."),decodeEntities.apply(void 0,arguments)}}})),version=(semVerRE=/^[Vv]?(\d+)(?:\.(\d+)(?:\.(\d+)(?:-[0-9A-Za-z.-]+)?(?:\+[0-9A-Za-z.-]+)?)?)?$/,Object.preventExtensions(Object.create(null,{name:{value:"SugarCube"},major:{value:2},minor:{value:37},patch:{value:3},prerelease:{value:""},build:{value:10338},date:{value:new Date("2024-07-27T00:45:20.724Z")},isOk:{value:function(e){if("string"!=typeof e)throw new Error("version.isOk semver parameter must be a string (received: ".concat(_typeof(e),")"));var t=e.trim();if(""===t)throw new Error("version.isOk semver parameter must not be empty");var r=semVerRE.exec(t);if(!r)throw new Error("version.isOk semver parameter is invalid (format: [v]MAJOR[.MINOR[.PATCH[-PRERELEASE][+BUILD]]]; received: ".concat(t));var n=Number(r[1]),a=Number(r[2])||0,i=Number(r[3])||0;return n===this.major&&(a<this.minor||a===this.minor&&i<=this.patch)}},long:{value:function(){return"".concat(this.name," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}},short:{value:function(){var e=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.name," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(e,")")}},toString:{value:function(){var e=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(e,"+").concat(this.build)}},title:{value:"SugarCube"}}))),semVerRE,TempState={},session=null,settings=Setting.create(),setup={},storage=null,macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={};Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))}),jQuery(function(){var e=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),new Promise(function(e){Story.init();try{SugarCube.storage=storage=SimpleStore.create(Story.id,!0),SugarCube.session=session=SimpleStore.create(Story.id,!1)}catch(e){throw new Error(L10n.get("warningNoStorage"))}Dialog.init(),UIBar.init(),Engine.init(),Outliner.init(),Engine.runUserScripts(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),DebugBar.init();var t=jQuery(window),r=setInterval(function(){t.width()&&LoadScreen.size<=1&&(clearInterval(r),e())},Engine.DOM_DELAY)}).then(function(){Engine.runUserInit(),UIBar.start(),Engine.start(),DebugBar.start(),triggerEvent(":storyready"),setTimeout(function(){return LoadScreen.unlock(e)},2*Engine.DOM_DELAY)}).catch(function(e){return console.error(e),LoadScreen.clear(),Alert.fatal(null,e.message,e)})})}(window,window.document,jQuery)</script>
